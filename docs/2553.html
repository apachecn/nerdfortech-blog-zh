<html>
<head>
<title>Time picker and custom entries in Preference Fragment made simple ğŸ•’</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ç®€åŒ–äº†é¦–é€‰é¡¹ç‰‡æ®µä¸­çš„æ—¶é—´é€‰æ‹©å™¨å’Œè‡ªå®šä¹‰æ¡ç›®ğŸ•’</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/nerd-for-tech/time-picker-and-custom-entries-in-preference-fragment-made-simple-1e0e125ff2ac?source=collection_archive---------2-----------------------#2021-05-11">https://medium.com/nerd-for-tech/time-picker-and-custom-entries-in-preference-fragment-made-simple-1e0e125ff2ac?source=collection_archive---------2-----------------------#2021-05-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="0903" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">ä»¥ä¸€ä¸ª(ä¸»é¢˜åŒ–çš„)æ—¶é—´é€‰æ‹©å™¨ä¸ºä¾‹ï¼Œæ¦‚è¿°äº†åœ¨ Android ä¸­å®ç°è‡ªå®šä¹‰åå¥½è®¾ç½®çš„æœ€å¿«ã€æœ€å¹²å‡€çš„æ–¹æ³•</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/c71da5471015b2703d93603c59e6c159.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eLV5o8O3Yy662nSdxlFmlg.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">ææ–™æ—¶é—´é€‰å–å™¨</figcaption></figure></div><div class="ab cl jn jo gp jp" role="separator"><span class="jq bw bk jr js jt"/><span class="jq bw bk jr js jt"/><span class="jq bw bk jr js"/></div><div class="hb hc hd he hf"><p id="2cdd" class="pw-post-body-paragraph ju jv hi jw b jx jy ij jz ka kb im kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">ä½¿ç”¨ Android ä¸­çš„ PreferenceFragmentCompat å®ç°çš„æ ‡å‡†é¦–é€‰é¡¹è‚¯å®šæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å¿«é€Ÿè§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥è·å¾—åŠŸèƒ½è®¾ç½®å±å¹•ã€‚ç„¶è€Œï¼Œä»¥è¿™ç§æ–¹å¼å®ç°çš„æ ‡å‡†è®¾ç½®å±å¹•æœ‰ä¸€äº›é™åˆ¶:ä¾‹å¦‚ï¼Œåªæ”¯æŒæœ‰é™çš„è®¾ç½®ç±»å‹ï¼Œå¹¶ä¸”å±å¹•å¸ƒå±€ä¸å—æˆ‘ä»¬çš„æ§åˆ¶ã€‚</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es kq"><img src="../Images/f54a58e7a900ec5de43300cd75e7f678.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oxALaOnNDn4jZU964hOF7g.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">è‡ªå®šä¹‰é¦–é€‰é¡¹å±å¹•ç¤ºä¾‹</figcaption></figure><p id="27c0" class="pw-post-body-paragraph ju jv hi jw b jx jy ij jz ka kb im kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†é‡ç‚¹å…³æ³¨<strong class="jw hj">æ—¶é—´é€‰æ‹©å™¨</strong>ï¼Œå› ä¸ºå®ƒæ˜¯è‡ªå®šä¹‰é¦–é€‰é¡¹è¾“å…¥çš„ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ï¼Œä½†æ˜¯åŒæ ·çš„æ–¹æ³•å¯ä»¥åº”ç”¨äºå‡ ä¹æ‰€æœ‰ç±»å‹çš„è‡ªå®šä¹‰é¦–é€‰é¡¹ã€‚æˆ‘å°†å‘å¸ƒå¹¶è¯„è®ºä»£ç å’Œä¸€ä¸ªé¡¹ç›®çš„é“¾æ¥ï¼Œåœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘æœ€åˆä½¿ç”¨è¿™ä¸ªè§£å†³æ–¹æ¡ˆæ¥å®ç°è¿™ä¸ªå’Œå…¶ä»–è‡ªå®šä¹‰é¦–é€‰é¡¹ã€‚ä¼šå¾ˆç®€å•çš„ï¼Œæ”¾å¿ƒå§ï¼æˆ‘å°†ä½¿ç”¨<strong class="jw hj">ç§‘ç‰¹æ—</strong>å’Œæˆ‘æ‰€çŸ¥é“çš„æ¯ä¸€ä¸ªæœ€ä½³å®è·µã€‚æˆ‘ä»¬èµ°å§ï¼</p></div><div class="ab cl jn jo gp jp" role="separator"><span class="jq bw bk jr js jt"/><span class="jq bw bk jr js jt"/><span class="jq bw bk jr js"/></div><div class="hb hc hd he hf"><h1 id="9e8d" class="kr ks hi bd kt ku kv kw kx ky kz la lb io lc ip ld ir le is lf iu lg iv lh li bi translated">ç¬¬ä¸€æ­¥:è®¾ç½®åå¥½å±å¹•</h1><p id="8e8e" class="pw-post-body-paragraph ju jv hi jw b jx lj ij jz ka lk im kc kd ll kf kg kh lm kj kk kl ln kn ko kp hb bi translated">é¦–å…ˆï¼Œæ‚¨éœ€è¦ä¸€ä¸ªä½¿ç”¨<strong class="jw hj"> PreferenceFragmentCompat </strong>å®ç°çš„é¦–é€‰é¡¹å±å¹•ï¼Œåœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼Œè¿™æ˜¯æœ€ç°ä»£çš„è§£å†³æ–¹æ¡ˆã€‚è¿™æ„å‘³ç€æ‚¨åº”è¯¥:</p><ol class=""><li id="27ac" class="lo lp hi jw b jx jy ka kb kd lq kh lr kl ls kp lt lu lv lw bi translated"><strong class="jw hj">å®ç° PreferenceFragmentCompat çš„è®¾ç½®ç‰‡æ®µ</strong></li></ol><pre class="iy iz ja jb fd lx ly lz ma aw mb bi"><span id="6736" class="mc ks hi ly b fi md me l mf mg">class SettingsFragment : PreferenceFragmentCompat<em class="mh">()</em>, OnSharedPreferenceChangeListener {<em class="mh"><br/></em><br/>    // Create the screen, given the xml containing the preferences<br/>    override fun onCreatePreferences<em class="mh">(</em>savedInstanceState: Bundle?, rootKey: String?<em class="mh">) {<br/>        </em>setPreferencesFromResource<em class="mh">(</em>R.xml.<em class="mh">preferences</em>, rootKey<em class="mh">)<br/>    }<br/><br/>    </em>override fun onResume<em class="mh">() {<br/>        </em>super.onResume<em class="mh">()<br/>        </em>// Set up a listener whenever a key changes<br/>        <em class="mh">preferenceScreen</em>.<em class="mh">sharedPreferences<br/>            </em>.registerOnSharedPreferenceChangeListener<em class="mh">(</em>this<em class="mh">)<br/>    }<br/><br/>    </em>override fun onPause<em class="mh">() {<br/>        </em>super.onPause<em class="mh">()<br/>        </em>// Unregister the listener whenever a key changes<br/>        <em class="mh">preferenceScreen</em>.<em class="mh">sharedPreferences<br/>            </em>.unregisterOnSharedPreferenceChangeListener<em class="mh">(</em>this<em class="mh">)<br/>    }<br/>    </em>override fun onSharedPreferenceChanged<em class="mh">(</em>sharedPreferences: SharedPreferences, key: String<em class="mh">) {<br/>        </em>when <em class="mh">(</em>key<em class="mh">) {<br/>            </em>"theme_color" -&gt; activity.recreate<em class="mh">()<br/>            </em>"accent_color" -&gt; activity.recreate<em class="mh">()<br/>        }<br/>    }</em></span></pre><p id="7eee" class="pw-post-body-paragraph ju jv hi jw b jx jy ij jz ka kb im kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">2.<strong class="jw hj">RES/XML/preferences . XML ä¸­åŒ…å«å±å¹•ç»“æ„çš„ XML</strong></p><pre class="iy iz ja jb fd lx ly lz ma aw mb bi"><span id="e39e" class="mc ks hi ly b fi md me l mf mg"><em class="mh">&lt;?</em>xml version="1.0" encoding="utf-8"<em class="mh">?&gt;<br/>&lt;</em>PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"<br/>    xmlns:app="http://schemas.android.com/apk/res-auto"<em class="mh">&gt;<br/><br/>    &lt;</em>PreferenceCategory<br/>        android:key="app_behavior"<br/>        android:title="@string/app_behavior"<br/>        app:icon="@drawable/ic_app_behavior_24dp"<em class="mh">&gt;<br/><br/>        &lt;</em>SwitchPreference<br/>            android:defaultValue="false"<br/>            android:key="hide_images"<br/>            android:summaryOff="@string/hide_images_off"<br/>            android:summaryOn="@string/hide_images_on"<br/>            android:title="@string/hide_images"<br/>            app:iconSpaceReserved="false" <em class="mh">/&gt;<br/><br/>        &lt;</em>SwitchPreference<br/>            android:defaultValue="false"<br/>            android:key="only_fav"<br/>            android:summaryOff="@string/only_fav_off"<br/>            android:summaryOn="@string/only_fav_on"<br/>            android:title="@string/only_fav"<br/>            app:iconSpaceReserved="false" <em class="mh">/&gt;<br/><br/>        &lt;</em>SwitchPreference<br/>            android:defaultValue="false"<br/>            android:key="surname_first"<br/>            android:summaryOff="@string/surname_first_off"<br/>            android:summaryOn="@string/surname_first_on"<br/>            android:title="@string/surname_first"<br/>            app:iconSpaceReserved="false" <em class="mh">/&gt;<br/><br/>    &lt;/</em>PreferenceCategory<em class="mh">&gt;<br/><br/>    &lt;</em>PreferenceCategory<br/>        android:key="customization"<br/>        android:title="@string/customization"<br/>        app:icon="@drawable/ic_customization_24dp"<em class="mh">&gt;<br/><br/>        &lt;</em>ListPreference<br/>            android:defaultValue="system"<br/>            android:entries="@array/themes"<br/>            android:entryValues="@array/themeValues"<br/>            android:key="theme_color"<br/>            android:summary="%s"<br/>            android:title="@string/theme_name"<br/>            app:iconSpaceReserved="false" <em class="mh">/&gt;<br/><br/>        &lt;</em>ListPreference<br/>            android:defaultValue="aqua"<br/>            android:entries="@array/accents"<br/>            android:entryValues="@array/accentValues"<br/>            android:key="accent_color"<br/>            android:summary="%s"<br/>            android:title="@string/accent_name"<br/>            app:iconSpaceReserved="false" <em class="mh">/&gt;<br/>    &lt;/</em>PreferenceCategory<em class="mh">&gt;<br/>&lt;/</em>PreferenceScreen<em class="mh">&gt;</em></span></pre><p id="c175" class="pw-post-body-paragraph ju jv hi jw b jx jy ij jz ka kb im kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå±å¹•(å®ƒåªæ˜¯ä¸€ä¸ªæ™®é€šçš„ç‰‡æ®µï¼Œå¯ä»¥æ˜¯åº”ç”¨ç¨‹åºæ™®é€šå¯¼èˆªçš„ä¸€éƒ¨åˆ†)æ˜¯ä½¿ç”¨åŒ…å«é¦–é€‰é¡¹çš„ xml(å®ƒæ˜¯<strong class="jw hj">è€Œä¸æ˜¯</strong>ä¸€ä¸ªå¸ƒå±€)åˆ›å»ºçš„ï¼Œå¹¶ä¸”æ¯å½“ä¸»é¢˜æˆ–é‡ç‚¹æ”¹å˜æ—¶ï¼Œç›‘å¬å™¨è¢«ç”¨æ¥åˆ·æ–°æ´»åŠ¨ã€‚åªæœ‰å½“æŸä¸ªè®¾ç½®éœ€è¦<strong class="jw hj">è¿›ä¸€æ­¥çš„æ­¥éª¤</strong>æ—¶ï¼Œè¿™ç§æ“ä½œæ‰æ˜¯å¿…è¦çš„ï¼Œè€Œä¸æ˜¯ç®€å•åœ°æ›´æ–° SharedPreferences æ¡ç›®ã€‚XML ç”¨ä¸€ä¸ª(å¯é€‰)å›¾æ ‡å®šä¹‰äº†ä¸¤ä¸ªé€‰é¡¹ç±»åˆ«ã€‚â€œ%sâ€ä»£è¡¨é€‰é¡¹çš„<strong class="jw hj">å®é™…å€¼</strong>ï¼Œå–è‡ªå¯èƒ½å€¼åˆ—è¡¨ã€‚</p></div><div class="ab cl jn jo gp jp" role="separator"><span class="jq bw bk jr js jt"/><span class="jq bw bk jr js jt"/><span class="jq bw bk jr js"/></div><div class="hb hc hd he hf"><h1 id="6864" class="kr ks hi bd kt ku kv kw kx ky kz la lb io lc ip ld ir le is lf iu lg iv lh li bi translated">æ­¥éª¤ 2:ä¸ºè‡ªå®šä¹‰é¦–é€‰é¡¹å®šä¹‰å¸ƒå±€</h1><p id="cb2a" class="pw-post-body-paragraph ju jv hi jw b jx lj ij jz ka lk im kc kd ll kf kg kh lm kj kk kl ln kn ko kp hb bi translated">æ·»åŠ æ—¶é—´é€‰æ‹©å™¨çš„ç¬¬ä¸€æ­¥æ˜¯å®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰çš„â€œè¡Œâ€ç”¨äºé¦–é€‰é¡¹å±å¹•ã€‚å¸ƒå±€å°†åªåŒ…å«è¡Œæœ¬èº«çš„è®¾è®¡ã€‚è®©æˆ‘ä»¬è®¾è®¡ä¸€ä¸ªç±»ä¼¼äº<strong class="jw hj">æ™®é€šé¦–é€‰é¡¹è¡Œ</strong>çš„å¸ƒå±€:</p><pre class="iy iz ja jb fd lx ly lz ma aw mb bi"><span id="2ba3" class="mc ks hi ly b fi md me l mf mg"><em class="mh">&lt;?</em>xml version="1.0" encoding="utf-8"<em class="mh">?&gt;<br/>&lt;</em>LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"<br/>    android:id="@+id/timePicker"<br/>    android:layout_width="match_parent"<br/>    android:layout_height="wrap_content"<br/>    android:orientation="vertical"<br/>    android:paddingHorizontal="@dimen/settings_row_padding"<br/>    android:paddingVertical="@dimen/settings_row_padding"<br/>    android:hapticFeedbackEnabled="false"<br/>    android:background="?attr/selectableItemBackground"<em class="mh">&gt;<br/><br/>        &lt;</em>TextView<br/>            android:id="@+id/timePickerTitle"<br/>            android:layout_width="match_parent"<br/>            android:layout_height="wrap_content"<br/>            android:text="@string/notification_hour_name"<br/>            android:textAppearance="@style/TextAppearance.MaterialComponents.Body1" <em class="mh">/&gt;<br/><br/>        &lt;</em>TextView<br/>            android:id="@+id/timePickerDescription"<br/>            android:layout_width="match_parent"<br/>            android:layout_height="wrap_content"<br/>            android:text="@string/notification_hour_description"<br/>            android:textAppearance="@style/TextAppearance.MaterialComponents.Body2"<br/>            android:textSize="@dimen/custom_preference_text_size"<em class="mh">/&gt;<br/><br/>&lt;/</em>LinearLayout<em class="mh">&gt;</em></span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mi"><img src="../Images/bb60114d1ddad573d9d04d8c6f5b7a30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2FvhtkOhVrVOwPmteKRpzw.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">ä¸Šè¿°å¸ƒå±€çš„ç»“æœ</figcaption></figure><p id="d8dc" class="pw-post-body-paragraph ju jv hi jw b jx jy ij jz ka kb im kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">å¤–è§‚ç¬¦åˆæ ‡å‡†æ–‡æœ¬ï¼Œå¤§å°ä¸º 14spï¼Œå¡«å……ä¸º 16dpï¼Œä»…ä¾›å‚è€ƒã€‚æ–‡æœ¬æ¯”é€šå¸¸çš„è¦é•¿ä¸€ç‚¹ï¼Œä½†æ˜¯ä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæ ‡å‡†çš„å•è¡Œæè¿°ã€‚å½“ç„¶ï¼Œæ¢è¡Œç¬¦æ˜¯ä½¿ç”¨å­—ç¬¦ä¸²ä¸­çš„â€œ\nâ€è·å¾—çš„ï¼Œæˆ‘å†™çš„è­¦å‘Šä¸é€šçŸ¥ç›¸å…³ï¼Œå› ä¸ºè¿™ä¸ªç‰¹å®šçš„æ—¶é—´é€‰æ‹©å™¨å°†åŒ…å«å‘é€é€šçŸ¥çš„æ—¶é—´ã€‚æ­¤å¤–ï¼Œè¯·è®°ä½ï¼Œè¯¥è¡Œæ–‡æœ¬ä¸­çš„ä»»ä½•æ›´æ”¹éƒ½å¿…é¡»æ‰‹åŠ¨ç®¡ç†ã€‚</p></div><div class="ab cl jn jo gp jp" role="separator"><span class="jq bw bk jr js jt"/><span class="jq bw bk jr js jt"/><span class="jq bw bk jr js"/></div><div class="hb hc hd he hf"><h1 id="de7c" class="kr ks hi bd kt ku kv kw kx ky kz la lb io lc ip ld ir le is lf iu lg iv lh li bi translated">æ­¥éª¤ 3:ä¸ºæˆ‘ä»¬çš„æ—¶é—´é€‰æ‹©å™¨é¦–é€‰é¡¹åˆ›å»ºä¸€ä¸ªç±»</h1><p id="727c" class="pw-post-body-paragraph ju jv hi jw b jx lj ij jz ka lk im kc kd ll kf kg kh lm kj kk kl ln kn ko kp hb bi translated">ç°åœ¨æˆ‘ä»¬éœ€è¦ä¸€ä¸ªç±»æ¥ç®¡ç†ä¸æˆ‘ä»¬æ­£åœ¨åˆ›å»ºçš„è‡ªå®šä¹‰è¡Œçš„äº¤äº’ã€‚è¯¥ç±»åº”è¯¥å®ç°<strong class="jw hj">é¦–é€‰é¡¹</strong>å’Œ<strong class="jw hj"> OnClickListener </strong>ï¼Œå¹¶ç®¡ç†æ—¶é—´é€‰æ‹©å™¨æœ¬èº«å’Œè¡Œä¸­æ–‡æœ¬çš„æ›´æ–°ã€‚ä¸å¤šä¸å°‘ã€‚</p><pre class="iy iz ja jb fd lx ly lz ma aw mb bi"><span id="7bea" class="mc ks hi ly b fi md me l mf mg">// A custom preference to show a time picker<br/>class TimePickerPreference<em class="mh">(</em>context: Context?, attrs: AttributeSet?<em class="mh">) </em>: Preference<em class="mh">(</em>context, attrs<em class="mh">)</em>,<br/>    View.OnClickListener <em class="mh">{<br/>    </em>private lateinit var sharedPrefs: SharedPreferences<br/>    private lateinit var currentHour: String<br/>    private lateinit var currentMinute: String<br/>    private lateinit var binding: TimePickerRowBinding<br/>    val formatter: DateTimeFormatter = DateTimeFormatter.ofLocalizedTime<em class="mh">(</em>FormatStyle.<em class="mh">SHORT)<br/><br/>    </em>override fun onBindViewHolder<em class="mh">(</em>holder: PreferenceViewHolder<em class="mh">) {<br/>        </em>sharedPrefs = PreferenceManager.getDefaultSharedPreferences<em class="mh">(context)<br/>        </em>currentHour = sharedPrefs.getString<em class="mh">(</em>"notification_hour", "8"<em class="mh">)</em>.<em class="mh">toString()<br/>        </em>currentMinute = sharedPrefs.getString<em class="mh">(</em>"notification_minute", "0"<em class="mh">)</em>.<em class="mh">toString()<br/>        </em>super.onBindViewHolder<em class="mh">(</em>holder<em class="mh">)<br/>        </em>binding = TimePickerRowBinding.bind<em class="mh">(</em>holder.itemView<em class="mh">)<br/><br/>        </em>// Format the time correctly<br/>        val currentTime = LocalTime.of<em class="mh">(</em>currentHour.<em class="mh">toInt()</em>, currentMinute.<em class="mh">toInt())<br/><br/>        </em>binding.timePickerDescription.<em class="mh">text </em>=<br/>            String.<em class="mh">format(<br/>                context</em>.getString<em class="mh">(</em>R.string.<em class="mh">notification_hour_description)</em>,<br/>                "~<em class="mh">${</em>formatter.format<em class="mh">(</em>currentTime<em class="mh">)}</em>"<br/>            <em class="mh">)<br/><br/>        </em>binding.<em class="mh">root</em>.setOnClickListener<em class="mh">(</em>this<em class="mh">)<br/>    }<br/><br/>    </em>override fun onClick<em class="mh">(</em>v: View<em class="mh">) {<br/>        </em>val act = <em class="mh">context </em>as MainActivity<br/>        currentHour = sharedPrefs.getString<em class="mh">(</em>"notification_hour", "8"<em class="mh">)</em>.<em class="mh">toString()<br/>        </em>currentMinute = sharedPrefs.getString<em class="mh">(</em>"notification_minute", "0"<em class="mh">)</em>.<em class="mh">toString()<br/><br/>        </em>// Show the time picker<br/>        val isSystem24Hour = is24HourFormat<em class="mh">(context)<br/>        </em>val clockFormat = if <em class="mh">(</em>isSystem24Hour<em class="mh">) </em>TimeFormat.<em class="mh">CLOCK_24H </em>else TimeFormat.<em class="mh">CLOCK_12H<br/>        </em>val picker =<br/>            MaterialTimePicker.Builder<em class="mh">()<br/>                </em>.setTimeFormat<em class="mh">(</em>clockFormat<em class="mh">)<br/>                </em>.setHour<em class="mh">(</em>currentHour.<em class="mh">toInt())<br/>                </em>.setMinute<em class="mh">(</em>currentMinute.<em class="mh">toInt())<br/>                </em>.setTitleText<em class="mh">(context</em>.getString<em class="mh">(</em>R.string.<em class="mh">notification_hour_name))<br/>                </em>.build<em class="mh">()<br/><br/>        </em>picker.addOnPositiveButtonClickListener <strong class="ly hj">{<br/>            </strong>val editor = sharedPrefs.edit<em class="mh">()<br/>            </em>editor.putString<em class="mh">(</em>"notification_hour", "<em class="mh">${</em>picker.<em class="mh">hour}</em>"<em class="mh">)<br/>            </em>editor.putString<em class="mh">(</em>"notification_minute", "<em class="mh">${</em>picker.<em class="mh">minute}</em>"<em class="mh">)<br/>            </em>editor.apply<em class="mh">()<br/><br/>            </em>// Format the selected hour and update the text<br/>            val currentTime = LocalTime.of<em class="mh">(</em>picker.<em class="mh">hour</em>, picker.<em class="mh">minute)<br/><br/>            </em>binding.timePickerDescription.<em class="mh">text </em>=<br/>                String.<em class="mh">format(<br/>                    context</em>.getString<em class="mh">(</em>R.string.<em class="mh">notification_hour_description)</em>,<br/>                    "~<em class="mh">${</em>formatter.format<em class="mh">(</em>currentTime<em class="mh">)}</em>"<br/>                <em class="mh">)<br/>        </em><strong class="ly hj">}<br/><br/>        </strong>picker.show<em class="mh">(</em>act.<em class="mh">supportFragmentManager</em>, "timepicker"<em class="mh">)<br/>    }<br/><br/>}</em></span></pre><p id="0a1a" class="pw-post-body-paragraph ju jv hi jw b jx jy ij jz ka kb im kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">ä¸Šé¢çš„ä»£ç ä½¿ç”¨äº†<a class="ae mj" href="https://developer.android.com/topic/libraries/view-binding" rel="noopener ugc nofollow" target="_blank"> <strong class="jw hj">è§†å›¾ç»‘å®š</strong> </a>ï¼Œä½†æ˜¯æ‚¨å¯ä»¥ä½¿ç”¨æ ‡å‡†çš„â€œfindViewByIdâ€æ–¹æ³•ï¼Œè¿™æ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚å½“ç”¨æˆ·ç‚¹å‡»è¯¥è¡Œæ—¶ï¼Œæ—¶é—´é€‰æ‹©å™¨è¢«é…ç½®(ä½¿ç”¨æœ¬åœ°æ—¶é—´æ ¼å¼)å¹¶æ˜¾ç¤ºã€‚å½“ç”¨æˆ·ç‚¹å‡»æ—¶é—´é€‰æ‹©å™¨çš„æ­£æŒ‰é’®(â€œç¡®å®šâ€æŒ‰é’®)æ—¶ï¼Œæ—¶é—´è¢«ä¿å­˜ï¼Œæ–‡æœ¬è¢«æ›´æ–°ã€‚æˆ‘é€‰æ‹©åœ¨ä¸¤ä¸ªä¸åŒçš„ SharedPreference æ¡ç›®ä¸­èŠ‚çœåˆ†é’Ÿå’Œå°æ—¶ï¼Œä½†è¿™å–å†³äºä½ :åœ¨æˆ‘çš„æƒ…å†µä¸‹ï¼Œé¿å…ç ´åä»¥å‰ç‰ˆæœ¬çš„åº”ç”¨ç¨‹åºå’Œæ­£ç¡®ç®¡ç†é€šçŸ¥è°ƒåº¦æ˜¯å¾ˆæ–¹ä¾¿çš„ã€‚å…³äºæ—¶é—´é€‰æ‹©å™¨å¦‚ä½•å·¥ä½œçš„å®Œæ•´æ¦‚è¿°ï¼Œè¯·å‚è€ƒ<a class="ae mj" href="https://material.io/components/time-pickers/android" rel="noopener ugc nofollow" target="_blank">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p></div><div class="ab cl jn jo gp jp" role="separator"><span class="jq bw bk jr js jt"/><span class="jq bw bk jr js jt"/><span class="jq bw bk jr js"/></div><div class="hb hc hd he hf"><h1 id="f6b4" class="kr ks hi bd kt ku kv kw kx ky kz la lb io lc ip ld ir le is lf iu lg iv lh li bi translated">æ­¥éª¤ 4:ä½¿ç”¨ preference.xml ä¸­çš„è‡ªå®šä¹‰é¦–é€‰é¡¹</h1><p id="d152" class="pw-post-body-paragraph ju jv hi jw b jx lj ij jz ka lk im kc kd ll kf kg kh lm kj kk kl ln kn ko kp hb bi translated">æœ€åï¼Œæ˜¯æ—¶å€™å°†æˆ‘ä»¬çš„è‡ªå®šä¹‰å‚æ•°é“¾æ¥åˆ°åŒ…å«æ ‡å‡†å‚æ•°çš„ xml äº†ã€‚å¾ˆç®€å•ï¼Œåªéœ€ä½¿ç”¨å®Œå…¨é™å®šçš„ç±»åå’Œå¯¹å¸ƒå±€çš„å¼•ç”¨ï¼ç»“æœå¦‚ä¸‹:</p><pre class="iy iz ja jb fd lx ly lz ma aw mb bi"><span id="9f2b" class="mc ks hi ly b fi md me l mf mg"><em class="mh">&lt;?</em>xml version="1.0" encoding="utf-8"<em class="mh">?&gt;<br/>&lt;</em>PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"<br/>    xmlns:app="http://schemas.android.com/apk/res-auto"<em class="mh">&gt;<br/><br/>    &lt;</em>PreferenceCategory<br/>        android:key="app_behavior"<br/>        android:title="@string/app_behavior"<br/>        app:icon="@drawable/ic_app_behavior_24dp"<em class="mh">&gt;<br/>    <br/>        &lt;</em>com.author.example.utilities.TimePickerPreference<br/>            android:layout="@layout/time_picker_row"<br/>            android:selectable="true" <em class="mh">/&gt;</em></span><span id="72d1" class="mc ks hi ly b fi mk me l mf mg"><em class="mh">        &lt;</em>SwitchPreference<br/>            android:defaultValue="false"<br/>            android:key="hide_images"<br/>            android:summaryOff="@string/hide_images_off"<br/>            android:summaryOn="@string/hide_images_on"<br/>            android:title="@string/hide_images"<br/>            app:iconSpaceReserved="false" <em class="mh">/&gt;<br/><br/>        &lt;</em>SwitchPreference<br/>            android:defaultValue="false"<br/>            android:key="only_fav"<br/>            android:summaryOff="@string/only_fav_off"<br/>            android:summaryOn="@string/only_fav_on"<br/>            android:title="@string/only_fav"<br/>            app:iconSpaceReserved="false" <em class="mh">/&gt;<br/><br/>        &lt;</em>SwitchPreference<br/>            android:defaultValue="false"<br/>            android:key="surname_first"<br/>            android:summaryOff="@string/surname_first_off"<br/>            android:summaryOn="@string/surname_first_on"<br/>            android:title="@string/surname_first"<br/>            app:iconSpaceReserved="false" <em class="mh">/&gt;<br/><br/>    &lt;/</em>PreferenceCategory<em class="mh">&gt;<br/><br/>    &lt;</em>PreferenceCategory<br/>        android:key="customization"<br/>        android:title="@string/customization"<br/>        app:icon="@drawable/ic_customization_24dp"<em class="mh">&gt;<br/><br/>        &lt;</em>ListPreference<br/>            android:defaultValue="system"<br/>            android:entries="@array/themes"<br/>            android:entryValues="@array/themeValues"<br/>            android:key="theme_color"<br/>            android:summary="%s"<br/>            android:title="@string/theme_name"<br/>            app:iconSpaceReserved="false" <em class="mh">/&gt;<br/><br/>        &lt;</em>ListPreference<br/>            android:defaultValue="aqua"<br/>            android:entries="@array/accents"<br/>            android:entryValues="@array/accentValues"<br/>            android:key="accent_color"<br/>            android:summary="%s"<br/>            android:title="@string/accent_name"<br/>            app:iconSpaceReserved="false" <em class="mh">/&gt;<br/>    &lt;/</em>PreferenceCategory<em class="mh">&gt;<br/>&lt;/</em>PreferenceScreen<em class="mh">&gt;</em></span></pre><p id="0bbd" class="pw-post-body-paragraph ju jv hi jw b jx jy ij jz ka kb im kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">å½“ç„¶ï¼Œç”¨ä½ çš„åŒ…åæ›¿æ¢â€œcom.author.example â€,ç”¨ä½ ç”¨æ¥å­˜å‚¨æˆ‘ä»¬ä¹‹å‰è®¨è®ºè¿‡çš„ç±»çš„åŒ…<strong class="jw hj">æ›¿æ¢â€œutilitiesâ€ã€‚æˆ‘å†³å®šå°†å®ƒå­˜å‚¨åœ¨ä¸€ä¸ªé€šç”¨çš„â€œå®ç”¨å·¥å…·â€åŒ…ä¸­ï¼Œä½†è¿™ä¸æ˜¯æœ€ä½³å®è·µã€‚å¦‚æœæ‚¨éœ€è¦åœ¨è‡ªå®šä¹‰é¦–é€‰é¡¹æ›´æ–°æ—¶æ·»åŠ æ›´å¤šçš„é€»è¾‘ï¼Œæ‚¨å¯ä»¥åœ¨è‡ªå®šä¹‰ç±»æœ¬èº«æˆ– PreferenceFragmentCompat ä¸­ä½¿ç”¨æˆ‘ä»¬ä¹‹å‰è®¾ç½®çš„ä¾¦å¬å™¨æ¥å®Œæˆã€‚</strong></p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es kq"><img src="../Images/592fcb759ef5c81fa28aa956b54b6c49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KMGowMmVTygt7XlzEC5g_g.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">æ—¶é—´é€‰æ‹©å™¨åœ¨å·¥ä½œï¼</figcaption></figure><p id="1584" class="pw-post-body-paragraph ju jv hi jw b jx jy ij jz ka kb im kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">ä¸‹é¢æ˜¯<strong class="jw hj">æœ€ç»ˆç»“æœ</strong>ã€‚å½“å•å‡»è¯¥è¡Œæ—¶ï¼Œæ—¶é—´é€‰æ‹©å™¨æ‰“å¼€ï¼Œé€‰æ‹©å¾—åˆ°å®Œç¾çš„ç®¡ç†ã€‚æ ¹æ®ä½ çš„ä¸»é¢˜/é¢œè‰²ï¼Œæ‹¾è‰²å™¨åœ¨ä½ çš„åº”ç”¨ç¨‹åºä¸­ä¼šæœ‰æ‰€ä¸åŒï¼Œæˆ‘å°†åœ¨æ–‡ç« çš„æœ€åä¸€éƒ¨åˆ†ï¼Œå¥–é‡‘éƒ¨åˆ†æ¶‰åŠè¿™ä¸ªä¸»é¢˜ã€‚æ˜¾ç„¶ï¼Œåªæœ‰å½“è®¾å¤‡ä½¿ç”¨ 12 å°æ—¶åˆ¶æ—¶,â€œAM/PMâ€é€‰æ‹©å™¨æ‰å¯è§ã€‚</p></div><div class="ab cl jn jo gp jp" role="separator"><span class="jq bw bk jr js jt"/><span class="jq bw bk jr js jt"/><span class="jq bw bk jr js"/></div><div class="hb hc hd he hf"><h1 id="93d0" class="kr ks hi bd kt ku kv kw kx ky kz la lb io lc ip ld ir le is lf iu lg iv lh li bi translated">å¥–é‡‘:ä¸»é¢˜çš„æ—¶é—´æŒ‘é€‰ï¼</h1><p id="a02a" class="pw-post-body-paragraph ju jv hi jw b jx lj ij jz ka lk im kc kd ll kf kg kh lm kj kk kl ln kn ko kp hb bi translated">æ—¶é—´é€‰æ‹©å™¨å¯ä»¥ä¸»é¢˜åŒ–ï¼Œä»¥åŒ¹é…åº”ç”¨ç¨‹åºä¸­çš„å…¶ä»–å¯¹è¯æ¡†ã€‚è™½ç„¶æ–‡æ¡£ä¸­åŒ…å«äº†åŸºæœ¬çš„ä¸»é¢˜åŒ–(ä¸»è¦æ˜¯é¢œè‰²ç›¸å…³çš„)æ¥ä¸»é¢˜åŒ–<strong class="jw hj">è§’è½</strong>å’Œ<strong class="jw hj">èƒŒæ™¯</strong>ä½ å°†éœ€è¦ä¸€äº›é¢å¤–çš„ä¸»é¢˜åŒ–ã€‚è¿™æ˜¯æˆ‘çš„ä¸»é¢˜:</p><pre class="iy iz ja jb fd lx ly lz ma aw mb bi"><span id="17fb" class="mc ks hi ly b fi md me l mf mg">&lt;!-- Base app theme --&gt;<em class="mh"><br/>&lt;</em>style name="AppTheme" parent="Theme.MaterialComponents.DayNight.NoActionBar"<em class="mh">&gt;<br/>...    </em>name="materialTimePickerTheme"<em class="mh">&gt;</em>@style/ThemeOverlay.App.TimePicker<em class="mh">&lt;/</em>item<em class="mh">&gt;<br/>...<br/>&lt;/</em>style<em class="mh">&gt;</em></span><span id="993f" class="mc ks hi ly b fi mk me l mf mg">&lt;!-- Time picker theme --&gt;<br/><em class="mh">&lt;</em>style name="ThemeOverlay.App.TimePicker" parent="@style/ThemeOverlay.MaterialComponents.TimePicker"<em class="mh">&gt;<br/>    &lt;</em>item name="shapeAppearanceMediumComponent"<em class="mh">&gt;</em>@style/ShapeAppearance.App.MediumComponent<em class="mh">&lt;/</em>item<em class="mh">&gt;<br/>    &lt;</em>item name="boxCornerRadiusBottomEnd"<em class="mh">&gt;</em>@dimen/text_field_corner<em class="mh">&lt;/</em>item<em class="mh">&gt;<br/>    &lt;</em>item name="boxCornerRadiusTopEnd"<em class="mh">&gt;</em>@dimen/text_field_corner<em class="mh">&lt;/</em>item<em class="mh">&gt;<br/>    &lt;</em>item name="boxCornerRadiusBottomStart"<em class="mh">&gt;</em>@dimen/text_field_corner<em class="mh">&lt;/</em>item<em class="mh">&gt;<br/>    &lt;</em>item name="boxCornerRadiusTopStart"<em class="mh">&gt;</em>@dimen/text_field_corner<em class="mh">&lt;/</em>item<em class="mh">&gt;<br/>    &lt;</em>item name="colorSurface"<em class="mh">&gt;</em>?android:colorBackgroundFloating<em class="mh">&lt;/</em>item<em class="mh">&gt;<br/>&lt;/</em>style<em class="mh">&gt;</em></span><span id="1518" class="mc ks hi ly b fi mk me l mf mg"><em class="mh">&lt;</em>style name="ShapeAppearance.App.MediumComponent" parent="ShapeAppearance.MaterialComponents.MediumComponent"<em class="mh">&gt;<br/>    &lt;</em>item name="cornerSize"<em class="mh">&gt;</em>@dimen/rounded_corners<em class="mh">&lt;/</em>item<em class="mh">&gt;<br/>&lt;/</em>style<em class="mh">&gt;</em></span></pre><p id="1e64" class="pw-post-body-paragraph ju jv hi jw b jx jy ij jz ka kb im kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">è¿™å°†åŸºæœ¬ä¸Šä½¿<strong class="jw hj">å¯¹è¯æ¡†è§’</strong>å’Œ<strong class="jw hj">æ–‡æœ¬å­—æ®µè§’</strong>å˜åœ†ï¼Œå¹¶ä½¿ç”¨æµ…ç°è‰²ä½œä¸ºèƒŒæ™¯(é»˜è®¤æ¯”æ ‡å‡†åå¥½å¯¹è¯æ¡†æš—)ã€‚</p></div><div class="ab cl jn jo gp jp" role="separator"><span class="jq bw bk jr js jt"/><span class="jq bw bk jr js jt"/><span class="jq bw bk jr js"/></div><div class="hb hc hd he hf"><p id="aded" class="pw-post-body-paragraph ju jv hi jw b jx jy ij jz ka kb im kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">æˆ‘è¦è¯´çš„å·®ä¸å¤šå°±æ˜¯è¿™äº›äº†ï¼è¿™ä¸ªå’Œå…¶ä»–è‡ªå®šä¹‰é¦–é€‰é¡¹çš„å®Œæ•´æºä»£ç åœ¨<a class="ae mj" href="https://github.com/m-i-n-a-r/birday" rel="noopener ugc nofollow" target="_blank"> <strong class="jw hj">è¿™ä¸ªèµ„æºåº“</strong> </a>ä¸­ï¼ŒæŸ¥çœ‹ä¸€ä¸‹ï¼Œå¦‚æœä½ æ„¿æ„ï¼Œå¯ä»¥éšæ„ç•™ä¸‹ä¸€ä¸ª<strong class="jw hj">star</strong>â­ï¼›)</p></div></div>    
</body>
</html>