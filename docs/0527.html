<html>
<head>
<title>Dynamic Markdown Blogs in Next.js/React using gray-matter, react-markdown and react-syntax-highlighter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Next.js/Reactçš„åŠ¨æ€é™ä»·åšå®¢ä½¿ç”¨ç°è‰²ç‰©è´¨ï¼Œååº”-é™ä»·å’Œååº”-è¯­æ³•-é«˜äº®</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/nerd-for-tech/dynamic-markdown-blogs-in-next-js-react-c0ed10d2d8a2?source=collection_archive---------1-----------------------#2021-01-09">https://medium.com/nerd-for-tech/dynamic-markdown-blogs-in-next-js-react-c0ed10d2d8a2?source=collection_archive---------1-----------------------#2021-01-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="b105" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ä½ æ­£åœ¨å¯»æ‰¾ä¸€ä¸ªå¯æŒç»­çš„ã€å¯æ‰©å±•çš„è§£å†³æ–¹æ¡ˆæ¥åˆ›å»ºåŠ¨æ€åšå®¢ï¼Œæ— è®ºæ˜¯ä¸ºä½ çš„ç½‘ç«™ï¼Œè¿˜æ˜¯å…¶ä»–äººçš„ç½‘ç«™ï¼Œé‚£ä¹ˆreact-markdownå°±æ˜¯å®ƒçš„è§£å†³æ–¹æ¡ˆã€‚æ˜¾ç„¶ï¼Œè¿™ç¯‡åšå®¢å‡è®¾ä½ æ­£åœ¨å’ŒNext.js/React.ä¸€èµ·å·¥ä½œ</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/11fd18288238751f0bca76f98c47826c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DZqkBELtxVeDk-HJNXUfNg.png"/></div></div></figure><p id="3d74" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªç›®å½•ï¼Œæ¯”å¦‚â€œ_snippetsâ€ï¼Œå¹¶åœ¨è¯¥ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªç¤ºä¾‹é™ä»·æ–‡ä»¶ï¼Œæ¯”å¦‚<strong class="ih hj">â€œä½¿ç”¨gray-matterã€react-markdownå’Œreact-syntax-highlighter.mdåœ¨Next.jsä¸­åŠ¨æ€é™ä»·åšå®¢â€</strong>ã€‚ç‰¹å®šåšå®¢çš„è·¯ç”±æ®µå°†ä»markdownæ–‡ä»¶åæœ¬èº«å¯¼å‡ºã€‚</p><p id="94b4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">è¿™æ˜¯é™ä»·æ ·æœ¬ï¼Œä¾›æ‚¨å¤åˆ¶:</p><pre class="je jf jg jh fd jp jq jr js aw jt bi"><span id="4100" class="ju jv hi jq b fi jw jx l jy jz">---<br/>title: 'Dynamic Markdown Blogs in Next.js/React using gray-matter, react-markdown and react-syntax-highlighter'<br/>excerpt: 'Implementing markdown blogs in Next.js/React with remark-markdown in just 5 minutes. Thinking of using strings? Nah, they are too old, use markdown. Export statically to achieve great perfomance.'<br/>date: '2021-01-06'<br/>---<br/><br/>You are looking for a sustainable, scalable solution to create dynamic blogs whether it be for your website, or someone else's, then react-markdown is the solution for it. This blog assumes, obviously, you are working with Next.js/React.</span></pre><p id="9d36" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å®Œæˆå†…å®¹ğŸš€é€šè¿‡åœ¨æ‚¨çš„ç»ˆç«¯ä¸Šæ‰§è¡Œä»¥ä¸‹æ“ä½œæ¥ç»§ç»­æ“ä½œ:</p><pre class="je jf jg jh fd jp jq jr js aw jt bi"><span id="b163" class="ju jv hi jq b fi jw jx l jy jz">npm i react-syntax-highlighter gray-matter react-markdown</span></pre><p id="88d3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å®‰è£…å®Œæ¯•ğŸš€ï¼Œç»§ç»­åˆ›å»ºä»¥ä¸‹ç»„ä»¶:</p><pre class="je jf jg jh fd jp jq jr js aw jt bi"><span id="c388" class="ju jv hi jq b fi jw jx l jy jz">// File: /components/MarkdownHighlight.js<br/><br/>import React from 'react'<br/>import { Prism as SyntaxHighlighter } from 'react-syntax-highlighter'<br/>import {<br/>  materialDark,<br/>  materialLight,<br/>} from 'react-syntax-highlighter/dist/cjs/styles/prism'<br/><br/>const MarkdownHighlight = ({ darkMode, language, value }) =&gt; {<br/>  return (<br/>    &lt;SyntaxHighlighter<br/>      language={language}<br/>      style={darkMode ? materialLight : materialDark}<br/>    &gt;<br/>      {value}<br/>    &lt;/SyntaxHighlighter&gt;<br/>  )<br/>}<br/><br/>export default MarkdownHighlight</span></pre><p id="0445" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">è¿™ä¸ªç»„ä»¶å°†è´Ÿè´£çªå‡ºæ˜¾ç¤ºä½ çš„markdownä»£ç å—ï¼Œæ— è®ºæ˜¯htmlã€cssã€jsè¿˜æ˜¯markdownã€‚æµè§ˆ<strong class="ih hj">react-syntax-highlight er/dist/cjs/styles/prism</strong>æ¢ç´¢ä¸åŒç§ç±»çš„æ»¤é•œï¼Œå¦‚{coy}ã€{dark}é™¤äº†{materialDark}ã€{materialLight}ã€‚</p><p id="b976" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ä¸‹é¢çš„ä»£ç å°†å¤„ç†æ¥è‡ªmarkdownæ–‡ä»¶çš„åšå®¢æ•°æ®çš„æ ¼å¼ã€‚å¢åŠ äº†å¯¹æ¯ä¸ªåŠŸèƒ½çš„è§£é‡Šã€‚</p><pre class="je jf jg jh fd jp jq jr js aw jt bi"><span id="c834" class="ju jv hi jq b fi jw jx l jy jz">// File: /lib/markdown.js<br/><br/>import { join } from 'path'<br/>import fs from 'fs'<br/>import matter from 'gray-matter'<br/><br/>// Directory of snippets<br/>const pagesDirectory = join(process.cwd(), '_snippets')<br/><br/>// Form slugs from the markdown names<br/>export function getSlugsFromDirectory(dir) {<br/>  return fs.readdirSync(dir)<br/>}<br/><br/>/**<br/> * Gets the contents of a file<br/> * The gray-matter (metadata at the top of the file) will be<br/> * added to the item object, the content will be in<br/> * item.content and the file name (slug) will be in item.slug.<br/> */<br/>export function getBySlug(dir, slug, fields = []) {<br/>  const realSlug = slug.replace(/\.md$/, '')<br/>  const fullPath = join(dir, `${realSlug}.md`)<br/>  const fileContents = fs.readFileSync(fullPath, 'utf8')<br/>  const { data, content } = matter(fileContents)<br/>  const items = {}<br/>  fields.forEach((field) =&gt; {<br/>    if (field === 'slug') {<br/>      items[field] = realSlug<br/>    }<br/>    if (field === 'content') {<br/>      items[field] = content<br/>    }<br/>    if (data[field]) {<br/>      items[field] = data[field]<br/>    }<br/>  })<br/>  return items<br/>}<br/><br/>// Returns contents of a page in the _snippets directory<br/>export function getPageContentBySlug(slug, fields = []) {<br/>  return getBySlug(pagesDirectory, slug, fields)<br/>}<br/><br/>// Returns pages in the _snippets directory<br/>export function getAllSnippets(fields = []) {<br/>  const slugs = getSlugsFromDirectory(pagesDirectory)<br/>  const pages = slugs.map((slug) =&gt; getPageContentBySlug(slug, fields))<br/>  return pages<br/>}</span></pre><p id="ec95" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å®Œæˆåˆ›å»ºå¸®åŠ©åŠŸèƒ½ğŸš€ï¼Œè®©æˆ‘ä»¬ç»§ç»­åˆ›å»ºåŠ¨æ€åšå®¢é¡µé¢:</p><pre class="je jf jg jh fd jp jq jr js aw jt bi"><span id="d195" class="ju jv hi jq b fi jw jx l jy jz">// File: /pages/snippet/[slug].js<br/><br/>import { useRouter } from 'next/router'<br/>import ReactMarkdown from 'react-markdown'<br/>import MarkdownHighlight from '@/components/MarkdownHighlight'<br/>import { getAllSnippets, getPageContentBySlug } from '@/lib/markdown'<br/><br/>const Snippet = ({ page, darkMode }) =&gt; {<br/>  const router = new useRouter()<br/>  return router.isFallback ? (<br/>    &lt;div&gt;Loading...&lt;/div&gt;<br/>  ) : (<br/>    &lt;div className="container"&gt;<br/>      &lt;h1&gt;{page.title}&lt;/h1&gt;<br/>      &lt;div className={styles['mt-3']}&gt;<br/>        &lt;div className={darkMode ? 'text-white' : 'text-dark'}&gt;<br/>          &lt;ReactMarkdown<br/>            source={page.content}<br/>            renderers={{<br/>              code: ({ language, value }) =&gt; {<br/>                /* Automatically takes in the language &amp; value from the markdown file when: ```&lt;html/css/js&gt;<br/>                  Content here<br/>                  ``` in the markdown file*/<br/>                return (<br/>                  &lt;MarkdownHighlight<br/>                    language={language}<br/>                    value={value}<br/>                    darkMode={darkMode}<br/>                  /&gt;<br/>                )<br/>              },<br/>            }}<br/>          /&gt;<br/>        &lt;/div&gt;<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>  )<br/>}<br/><br/>export default Snippet<br/><br/>export async function getStaticProps({ params }) {<br/>  const { slug } = params<br/>  const page = getPageContentBySlug(slug, [<br/>    'title',<br/>    'image',<br/>    'slug',<br/>    'content',<br/>    'date',<br/>  ])<br/>  return {<br/>    props: {<br/>      page: {<br/>        ...page,<br/>        markdown: page.content,<br/>      },<br/>    },<br/>  }<br/>}<br/><br/>export async function getStaticPaths() {<br/>  const posts = getAllSnippets(['slug'])<br/>  const paths = posts.map(({ slug }) =&gt; ({<br/>    params: {<br/>      slug,<br/>    },<br/>  }))<br/>  return {<br/>    paths,<br/>    fallback: 'blocking'<br/>  }<br/>}</span></pre><p id="a870" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">ä¸€åˆ‡å°±ç»ªï¼å¸Œæœ›ä½ å–œæ¬¢:)</strong></p></div></div>    
</body>
</html>