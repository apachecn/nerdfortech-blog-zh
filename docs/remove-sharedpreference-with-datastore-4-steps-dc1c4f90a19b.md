# ä½¿ç”¨æ•°æ®å­˜å‚¨åˆ é™¤ SharedPreference ä¸ªæ­¥éª¤

> åŸæ–‡ï¼š<https://medium.com/nerd-for-tech/remove-sharedpreference-with-datastore-4-steps-dc1c4f90a19b?source=collection_archive---------2----------------------->

![](img/0737191c04757eb72b20ea47bf7b74fe.png)

# åœ¨ä½ çš„åº”ç”¨æ¨¡å—çš„ **build.gradle** æ–‡ä»¶ä¸­æ·»åŠ ä¾èµ–å…³ç³»

![](img/ddbd3614460993d1636025099fcbe2e0.png)

# åˆ›å»ºæ•°æ®å­˜å‚¨

![](img/af34114870f5d64b9d51e22e3c59cb96.png)

åœ¨è¿™é‡Œï¼Œå¦‚æœæ‚¨æƒ³è¿ç§»å·²ç»å­˜åœ¨äºæ‚¨çš„åº”ç”¨ç¨‹åºä¸­çš„**å…±äº«å‚è€ƒ**ï¼Œè¯·å°†å…¶ä½œä¸ºåˆ—è¡¨ä¼ é€’ç»™**è¿ç§»**ğŸ‘†äº‰åµ

# ä»æ•°æ®å­˜å‚¨ä¸­æå–æ•°æ®

![](img/6b3af54a816e0001624f8fd931eadbec.png)

åœ¨ä»æ•°æ®å­˜å‚¨ä¸­è¯»å–æ—¶ï¼Œå¯èƒ½ä¼šæœ‰ä¸€ä¸ª**å¼‚å¸¸**ï¼Œå®ƒå¯ä»¥æ˜¯ **IOException** æˆ–å…¶ä»–ä»»ä½•ä¸œè¥¿ï¼Œå› æ­¤æˆ‘ä»¬åœ¨æµçš„é¡¶éƒ¨æ·»åŠ äº† **catch** æ¥æ­£ç¡®å¤„ç†è¿™ç§æƒ…å†µ

> *æ•°æ®å­˜å‚¨è¿”å›æµç¨‹*

# å°†æ•°æ®æ’å…¥æ•°æ®å­˜å‚¨

![](img/b6b866bc3f54dacf043d1e5624510b9e.png)

**DataStore æ˜¯å¼‚æ­¥ APIï¼Œæ„å»ºåœ¨ Kotlin åç¨‹å’Œæµ**ä¹‹ä¸Šï¼Œå› æ­¤æˆ‘ä»¬åœ¨å‡½æ•°ä¸­æ·»åŠ äº† **suspend** å…³é”®å­—

![](img/f1cf308e5d6ebf071e25aadc19c3d063.png)

## å‚è€ƒ

*   [https://developer . Android . com/topic/libraries/architecture/datastore](https://developer.android.com/topic/libraries/architecture/datastore)
*   **å…¨ç æ ·æœ¬ã€https://github.com/navczydev/datastoreã€‘:**
*   [https://developer.android.com/kotlin/flow](https://developer.android.com/kotlin/flow)

# ğŸ‘ğŸ‘ğŸ‘ğŸ‘å¿«ä¹ç¼–ç ğŸ‘ğŸ‘ğŸ‘ğŸ‘

# ä¿æŒè”ç³»

*   [é¢†è‹±](https://www.linkedin.com/in/navczydev/)
*   [æ¨ç‰¹](https://twitter.com/navczydev)