# çŸ­ä¿¡éªŒè¯ API Android

> åŸæ–‡ï¼š<https://medium.com/nerd-for-tech/sms-verification-api-android-f351a3e81112?source=collection_archive---------0----------------------->

![](img/07a269a0c797586ad844320644e22e3c.png)

æ•…äº‹æ ‡é¢˜

åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†äº†è§£ä½¿ç”¨çŸ­ä¿¡éªŒè¯ API çš„**çŸ­ä¿¡éªŒè¯ã€‚**

*   API ä¸ºæˆ‘ä»¬æä¾›äº†ä¸¤ç§åœ¨ android åº”ç”¨ç¨‹åºä¸­å¤„ç†ä¸€æ¬¡æ€§å¯†ç éªŒè¯çš„æ–¹æ³•ã€‚

![](img/97d75a1781c8c1e375a529068fa566be.png)

å›¾ç‰‡æ¥æº:[https://4 . BP . blogspot . com/-H3wBrYcICPI/weejpy 6 psi/aaaaaaaaaeqc/db1ff-ksnkeyfaaitba 2 qexnspootnnwclcbgas/s 1600/image3 . png](https://4.bp.blogspot.com/-H3wBrYcICPI/WeEjPy6tPsI/AAAAAAAAEqc/db1ff-kSnkEYCfaaiTbA2qeXnSPoOtnNwCLcBGAs/s1600/image3.png)

å¦‚æœæ‚¨åœ¨å½“å‰çš„åº”ç”¨ç¨‹åºä¸­æœ‰ç”¨ä¾‹ï¼Œæˆ–è€…å°†æ¥è¦å®ç°ç”µè¯å·ç çš„ä¸€æ¬¡æ€§å¯†ç éªŒè¯ï¼Œé‚£ä¹ˆæ‚¨åº”è¯¥è€ƒè™‘**çŸ­ä¿¡éªŒè¯ APIã€‚**

ä»¥è¿™æ ·ä¸€ç§æ–¹å¼å¤„ç†éªŒè¯ï¼Œæ‚¨çš„**ç”¨æˆ·ä¸åº”è¯¥æ¥å›ä½¿ç”¨æ¶ˆæ¯åº”ç”¨ç¨‹åºæ¥è·å–ä»£ç å¹¶å°†å…¶è¾“å…¥åˆ°æ‚¨çš„åº”ç”¨ç¨‹åº**ã€‚

**çŸ­ä¿¡éªŒè¯ APIï¼Œæä¾› 2 ç§å¤„ç†çŸ­ä¿¡éªŒè¯çš„æ–¹å¼**

*   SMS æ£€ç´¢å™¨ API
*   SMS ç”¨æˆ·åŒæ„ API

# SMS æ£€ç´¢å™¨ API

å®ƒæä¾›äº†å®Œå…¨è‡ªåŠ¨åŒ–çš„ç”¨æˆ·ä½“éªŒï¼Œåº”è¯¥å°½å¯èƒ½ä½¿ç”¨ã€‚

ç„¶è€Œï¼Œ**ç¡®å®è¦æ±‚æ‚¨åœ¨æ¶ˆæ¯ä½“ä¸­æ”¾ç½®ä¸€ä¸ªå®šåˆ¶çš„å“ˆå¸Œä»£ç ï¼Œå¦‚æœæ‚¨ä¸æ˜¯è¯¥æ¶ˆæ¯çš„å‘é€è€…ï¼Œè¿™å¯èƒ½å¾ˆéš¾åšåˆ°ã€‚**

# **çŸ­ä¿¡ç”¨æˆ·åŒæ„ API**

> å¦‚æœåœ¨æœåŠ¡å™¨ç«¯æ²¡æœ‰ä»»ä½•è‡ªå®šä¹‰æ¶ˆæ¯å†…å®¹çš„æ§ä»¶ã€‚

å®ƒä¸éœ€è¦è‡ªå®šä¹‰å“ˆå¸Œä»£ç ã€‚ç„¶è€Œï¼Œå®ƒéœ€è¦ç”¨æˆ·æ‰¹å‡†ä½ çš„åº”ç”¨ç¨‹åºè®¿é—®åŒ…å«éªŒè¯ç çš„æ¶ˆæ¯çš„è¯·æ±‚ã€‚

ä¸ºäº†æœ€å¤§é™åº¦åœ°å‡å°‘å‘ç”¨æˆ·æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯çš„å¯èƒ½æ€§ï¼ŒSMS ç”¨æˆ·è®¸å¯å°†æ£€æŸ¥æ¶ˆæ¯æ˜¯å¦åŒ…å«è‡³å°‘åŒ…å«ä¸€ä¸ªæ•°å­—çš„ 4-10 ä¸ªå­—ç¬¦çš„å­—æ¯æ•°å­—ä»£ç ã€‚

å®ƒè¿˜ä¼šè¿‡æ»¤æ‰æ¥è‡ªç”¨æˆ·è”ç³»äººåˆ—è¡¨ä¸­å‘ä»¶äººçš„æ¶ˆæ¯ï¼Œè¿™æ„å‘³ç€å¦‚æœå‘ä»¶äººçš„å·ç ä¿å­˜åœ¨è”ç³»äººåˆ—è¡¨ä¸­ï¼Œå®ƒå°†ä¸ä¼šè¢« API å¤„ç†ã€‚

# **ä¸‹è¡¨æ€»ç»“äº†è¿™äº›å·®å¼‚:**

![](img/4a10020d6338448d411bc9b17b297f1d.png)

åŒºåˆ«-çŸ­ä¿¡æ£€ç´¢å™¨å’ŒçŸ­ä¿¡ç”¨æˆ·åŒæ„ APIã€‚å›¾ç‰‡æ¥è‡ª android å¼€å‘è€…æ–‡æ¡£

# SMS ç”¨æˆ·åŒæ„ API çš„å®ç°

è¦ä½¿ç”¨ **SMS ç”¨æˆ·åŒæ„ API** å®ç° SMS éªŒè¯æµç¨‹ï¼Œæ‚¨éœ€è¦ä¸åç«¯æœåŠ¡å™¨äº¤äº’ä»¥å‘é€ SMSï¼Œå¹¶ä¸ SMS ç”¨æˆ·åŒæ„ API äº¤äº’ä»¥æç¤ºç”¨æˆ·è®¿é—®åŒ…å«ä¸€æ¬¡æ€§ä»£ç çš„å•ä¸ªæ¶ˆæ¯ã€‚

*   **API ä¸éœ€è¦ä»»ä½•æƒé™ï¼Œ**å’Œ**æ˜¾ç¤º**æ‰‹æœºæˆ– Google è´¦æˆ·ä¸Šå¯ç”¨çš„**å·ç ï¼Œä¾›ç”¨æˆ·**é€‰æ‹©**ã€‚**
*   å½“ç”¨æˆ·**é€‰æ‹©ä¸€ä¸ªç”µè¯å·ç æ—¶ï¼Œå®ƒå°†ä»¥** [**E164 æ ¼å¼**](https://en.wikipedia.org/wiki/E.164) è¿”å›ç»™åº”ç”¨ç¨‹åº

æ‚¨çš„åº”ç”¨ç¨‹åºå’ŒæœåŠ¡å™¨å¿…é¡»é€æ­¥æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼Œä»¥ä½¿ç”¨ SMS ç”¨æˆ·åŒæ„ API å®ç° SMS éªŒè¯æµç¨‹:

1.  æ‚¨çš„åº”ç”¨ç¨‹åºè°ƒç”¨ SMS ç”¨æˆ·åŒæ„ API å¼€å§‹ä¾¦å¬æ¥è‡ªæœåŠ¡å™¨çš„ SMS å“åº”ã€‚**åœ¨å¼€å§‹ SMS ç”¨æˆ·è®¸å¯ä¹‹å‰æ”¶åˆ°çš„ SMS æ¶ˆæ¯ä¸ä¼šè½¬å‘åˆ°æ‚¨çš„åº”ç”¨ç¨‹åº**ã€‚
2.  åœ¨æ‚¨**å¯åŠ¨ SMS ç”¨æˆ·åŒæ„ API** åï¼Œæ‚¨çš„åº”ç”¨ç¨‹åºå‘æœåŠ¡å™¨å‘å‡ºè¯·æ±‚ï¼Œä½¿ç”¨ SMS éªŒè¯æ¥éªŒè¯ç”¨æˆ·çš„ç”µè¯å·ç ã€‚
3.  å½“ç”¨æˆ·çš„è®¾å¤‡æ”¶åˆ°åŒ…å«ä¸€æ¬¡æ€§ä»£ç çš„çŸ­ä¿¡æ—¶ï¼ŒGoogle Play æœåŠ¡ä¼šå‘ç”¨æˆ·æ˜¾ç¤ºè¯¥çŸ­ä¿¡çš„å†…å®¹ï¼Œå¹¶è¯·æ±‚ç”¨æˆ·åŒæ„å°†è¯¥æ–‡æœ¬æä¾›ç»™ä½ çš„åº”ç”¨ç¨‹åºã€‚
4.  å¦‚æœç”¨æˆ·åŒæ„ï¼Œæ‚¨çš„åº”ç”¨ç¨‹åºå¯ä»¥ä½¿ç”¨æ•´ä¸ªçŸ­ä¿¡ã€‚
5.  æ‚¨çš„**åº”ç”¨ç¨‹åºä»æ¶ˆæ¯æ–‡æœ¬**ä¸­è§£æå‡ºä¸€æ¬¡æ€§ä»£ç ï¼Œç„¶å**å°†å…¶å‘é€åˆ°æœåŠ¡å™¨**ã€‚

# **å®‰è£…ä¾èµ–å…³ç³»**

*   åœ¨æ‚¨çš„åº”ç”¨ç¨‹åºçš„`build.gradle`æ–‡ä»¶ä¸­åŒ…å« Play Services auth ç»„ä»¶:

```
 implementation 'com.google.android.gms:play-services-auth:19.0.0'
    implementation 'com.google.android.gms:play-services-auth-api-phone:17.5.0'
```

# è·å–ç”¨æˆ·çš„ç”µè¯å·ç 

> å¦‚æœæ‚¨å·²ç»æœ‰äº†ç”¨æˆ·çš„ç”µè¯å·ç ï¼Œæ‚¨å¯ä»¥è·³è¿‡è¿™ä¸€æ­¥:

**åœ¨å¼€å§‹çŸ­ä¿¡éªŒè¯æµç¨‹ä¹‹å‰ï¼Œè¯·æ±‚ç”µè¯å·ç ã€‚**

æ‚¨å¯ä»¥é€šè¿‡é€‚åˆæ‚¨çš„åº”ç”¨ç¨‹åºçš„æ–¹å¼è·å–ç”¨æˆ·çš„ç”µè¯å·ç ã€‚

è€ƒè™‘ä½¿ç”¨**æ™ºèƒ½å¯†ç é”æç¤ºé€‰æ‹©å™¨**å¸®åŠ©ç”¨æˆ·å¡«å†™ä»–ä»¬çš„ç”µè¯å·ç ï¼Œ

**ä½¿ç”¨æç¤ºé€‰æ‹©å™¨:**

![](img/dc20ba241d001ff87326daefd2ef267b.png)

ç”µè¯å·ç çš„ HintRequestDialog

# å¼€å§‹ç›‘å¬ä¼ å…¥çš„æ¶ˆæ¯

åœ¨æ¥ä¸‹æ¥çš„**äº”åˆ†é’Ÿå†…**ï¼Œå½“è®¾å¤‡æ”¶åˆ°åŒ…å«ä¸€æ¬¡æ€§ä»£ç çš„çŸ­ä¿¡æ—¶ï¼Œ **Play services å°†å‘æ‚¨çš„åº”ç”¨ç¨‹åºå¹¿æ’­ï¼Œæç¤ºç”¨æˆ·å…è®¸é˜…è¯»è¯¥çŸ­ä¿¡**ã€‚

åªæœ‰æ»¡è¶³ä»¥ä¸‹æ¡ä»¶çš„æ¶ˆæ¯æ‰ä¼šè§¦å‘å¹¿æ’­:

*   æ¶ˆæ¯åŒ…å«ä¸€ä¸ª 4-10 ä¸ªå­—ç¬¦çš„å­—æ¯æ•°å­—å­—ç¬¦ä¸²ï¼Œå…¶ä¸­è‡³å°‘æœ‰ä¸€ä¸ªæ•°å­—ã€‚
*   ä¿¡æ¯æ˜¯ç”±ç”¨æˆ·è”ç³»äººä¸­çš„*è€Œé*ç”µè¯å·ç å‘é€çš„ã€‚
*   å¦‚æœæ‚¨æŒ‡å®šäº†å‘ä»¶äººçš„ç”µè¯å·ç ï¼Œé‚®ä»¶å°†é€šè¿‡è¯¥å·ç å‘é€ã€‚

# **ç”¨å¹¿æ’­æ¥æ”¶å™¨å¤„ç†è¿™äº›å¹¿æ’­**

*   å…·æœ‰`SEND_PERMISSION`æƒé™çš„**å’Œ**
*   å›åº”`SMS_RETRIEVED_ACTION`çš„æ„å›¾ã€‚

**åˆ›å»ºå¹¶æ³¨å†Œå¹¿æ’­æ¥æ”¶æœº:**

# æ³¨å†Œæ¥æ”¶å™¨

# ä»é‚®ä»¶ä¸­è·å–éªŒè¯ç 

![](img/f08f8d297386c4a585177e8faf8d1951.png)

ä¸€æ¬¡æ€§å¯†ç çš„æ¶ˆæ¯ç¤ºä¾‹

# ä»Šå¤©å°±åˆ°è¿™é‡Œï¼Œå¸Œæœ›ä½ èƒ½å­¦åˆ°æ–°çš„ä¸œè¥¿ã€‚

# ğŸ‘¨â€ğŸ’»ğŸ‘¨â€ğŸ’»ğŸ‘ğŸ‘å¿«ä¹ç¼–ç ğŸ‘¨â€ğŸ’»ğŸ‘¨â€ğŸ’»ğŸ‘ğŸ‘

# **ä¿æŒè”ç³»**

https://twitter.com/navczydev

 [## çº³å¤«Â·è¾›æ ¼-ä½œå®¶-åª’ä½“| LinkedIn

### åœ¨ä¸–ç•Œä¸Šæœ€å¤§çš„èŒä¸šç¤¾åŒº LinkedIn ä¸ŠæŸ¥çœ‹ Nav Singh çš„ä¸ªäººèµ„æ–™ã€‚Nav åˆ—å‡ºäº† 7 ä¸ªèŒä½â€¦

www.linkedin.com](https://www.linkedin.com/in/navczydev/) [](https://github.com/navczydev) [## navczydev -æ¦‚è¿°

### GDG-è’™ç‰¹å¨„çš„ Android å¼€å‘è€…ç»„ç»‡è€… motionlayout å®ç°äº† android Kotlin 2 éå¸¸åŸºæœ¬çš„å°éƒ¨ä»¶å®ç°äº†â€¦

github.com](https://github.com/navczydev) 

# **å‚è€ƒæ–‡çŒ®**

[](https://developers.google.com/identity/sms-retriever) [## çŸ­ä¿¡éªŒè¯ APIs |è°·æ­Œå¼€å‘è€…

### é€šè¿‡çŸ­ä¿¡éªŒè¯æ‚¨çš„ç”¨æˆ·ï¼Œæ— éœ€è®©ä»–ä»¬å¤„ç†éªŒè¯ç ã€‚é€šè¿‡ä½¿ç”¨ SMS æ£€ç´¢å™¨ APIï¼Œæ‚¨çš„åº”ç”¨ç¨‹åºå¯ä»¥â€¦

developers.google.com](https://developers.google.com/identity/sms-retriever) [](https://developers.google.com/identity/sms-retriever/overview) [## ä½¿ç”¨çŸ­ä¿¡æ£€ç´¢å™¨ API è¿›è¡Œè‡ªåŠ¨çŸ­ä¿¡éªŒè¯

### ä½¿ç”¨çŸ­ä¿¡æ£€ç´¢å™¨ APIï¼Œæ‚¨å¯ä»¥åœ¨ Android åº”ç”¨ç¨‹åºä¸­è‡ªåŠ¨æ‰§è¡ŒåŸºäºçŸ­ä¿¡çš„ç”¨æˆ·éªŒè¯ï¼Œè€Œæ— éœ€â€¦

developers.google.com](https://developers.google.com/identity/sms-retriever/overview) [](https://developers.google.com/identity/sms-retriever/user-consent/overview) [## ä½¿ç”¨çŸ­ä¿¡ç”¨æˆ·è®¸å¯ API è¿›è¡Œä¸€é”®å¼çŸ­ä¿¡éªŒè¯

### " type": "thumb-down "ï¼Œ" id ":" missingtheinformationneed "ï¼Œ" label ":"ç¼ºå°‘æˆ‘éœ€è¦çš„ä¿¡æ¯" }ï¼Œ{ "type"â€¦

developers.google.com](https://developers.google.com/identity/sms-retriever/user-consent/overview) [](https://en.wikipedia.org/wiki/E.164) [## E.164

### E.164 æ˜¯ä¸€ä¸ªå›½é™…æ ‡å‡†(ITU-T æ¨èæ ‡å‡†)ï¼Œåä¸ºå›½é™…å…¬å…±ç”µä¿¡ç¼–å·â€¦

en.wikipedia.org](https://en.wikipedia.org/wiki/E.164) [](https://android-developers.googleblog.com/2017/10/effective-phone-number-verification.html) [## æœ‰æ•ˆçš„ç”µè¯å·ç éªŒè¯

### ç”±èº«ä»½äº§å“ç»ç† Steven Soneff å‘å¸ƒï¼Œæ„å»ºåˆ©ç”¨ç”µè¯å·ç çš„åº”ç”¨ç¨‹åºï¼Œé€šå¸¸è‡³å…³é‡è¦çš„æ˜¯â€¦

android-developers.googleblog.com](https://android-developers.googleblog.com/2017/10/effective-phone-number-verification.html)