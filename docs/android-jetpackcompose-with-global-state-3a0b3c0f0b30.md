# Android JetpackCompose â€”å…·æœ‰å…¨å±€çŠ¶æ€

> åŸæ–‡ï¼š<https://medium.com/nerd-for-tech/android-jetpackcompose-with-global-state-3a0b3c0f0b30?source=collection_archive---------6----------------------->

## ç§»åŠ¨åº”ç”¨ä¸­çš„ååº”å¼ç¼–ç¨‹â€”â€”ä¸€æ¬¡æ—…è¡Œ

## Android çš„ JetpackCompose(æˆ– iOS çš„ SwiftUI)æ˜¯ä¸€ç§å¾ˆæ£’çš„åŠŸèƒ½æ€§ã€å£°æ˜æ€§ã€åŸºäºç»„ä»¶çš„ UI å¼€å‘æŠ€æœ¯ã€‚è®©æˆ‘ä»¬ç”¨å…¨å±€çŠ¶æ€ç®¡ç†ä½¿å®ƒå˜å¾—æ›´å¥½

æˆ‘ä»¬éƒ½å¾ˆç†Ÿæ‚‰ [*React.js*](https://reactjs.org/) å’Œå®ƒä¼Ÿå¤§çš„ [*JSX* æ‰©å±•](https://reactjs.org/docs/introducing-jsx.html)ç”¨äºè½»æ¾æ„å»º UI ç»„ä»¶ã€‚å®ƒè®©å¼€å‘äººå‘˜ç›´æ¥ä»ä¸€äº›*æ•°æ®*æˆ–*çŠ¶æ€*ä¸­ç¼–å†™åŠ¨æ€ UIï¼Œè€Œä¸æ˜¯å°†é™æ€ UI ä»£ç (ä¾‹å¦‚ *xml* æˆ– *html* )å’ŒåŠ¨æ€çŠ¶æ€ç»‘å®šä»£ç (ä¾‹å¦‚[*view binding*](https://developer.android.com/topic/libraries/view-binding)*æˆ– [*JQuery*](https://jquery.com/) )åˆ†å¼€ã€‚*

**Android* å’Œ *iOS* å›¢é˜Ÿç´§éšå…¶åï¼Œå¼€å‘äº†ä»–ä»¬çš„åŸç”Ÿç­‰ä»·ç‰©*React+JSX*â€”â€”[â€”â€”*JetpackCompose*](https://developer.android.com/jetpack/compose)å’Œ [*SwiftUI*](https://developer.apple.com/xcode/swiftui/) ã€‚
åƒ *React* ä¸€æ ·ï¼Œå®ƒä»¬æä¾›å†…éƒ¨çŠ¶æ€ç®¡ç†ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸ªâ€˜ç»„ä»¶â€™è¦ä¹ˆå¯ä»¥æ§åˆ¶è‡ªå·±çš„çŠ¶æ€ï¼Œè¦ä¹ˆè¢«è‡ªå·±çš„â€˜çˆ¶ç»„ä»¶â€™æ§åˆ¶ï¼Œçˆ¶ç»„ä»¶å¤„ç†è‡ªå·±çš„çŠ¶æ€â€¦â€¦
åƒ *React* ä¸€æ ·ï¼Œå®ƒä»¬ç¼ºå°‘ [**å…¨å±€**çŠ¶æ€ç®¡ç†](https://spin.atomicobject.com/2017/06/07/react-state-vs-redux-state/) â€” [*Redux*](https://redux.js.org/) ï¼Œä¾‹å¦‚ã€‚è¿™æ­£æ˜¯æˆ‘ä»¬æ¥è¿™é‡Œçš„ç›®çš„ã€‚*

*![](img/8f3392a00558f732d326665df14ab614.png)*

*ä¸€ä¸ªç®€å•çš„å¸¦æœ‰å¯¹è¯æ¡†çš„ JetpackCompose å±å¹•â€”â€”ä½¿ç”¨ Reactdroid çš„å­˜å‚¨ä½œä¸ºçŠ¶æ€*

## *JetpackCompose é•¿ä»€ä¹ˆæ ·*

*è¿™æ˜¯ *JetpackCompose* ä¸­ä¸€ä¸ªç®€å•å±å¹•çš„æ ·å­:*

*JetpackCompose ä¸­å¸¦æœ‰æ ‡é¢˜çš„ç®€å•å±å¹•*

*è¿™æ˜¯ä¸€ä¸ªç±»ä¼¼çš„ä¾‹å­ï¼Œä½†æ˜¯ç”¨*åŠ¨æ€*çŠ¶æ€*æ¥æ§åˆ¶æ ‡é¢˜ï¼Œä½¿ç”¨ä¸€ä¸ª*æŒ‰é’®*:**

*JetpackCompose ä¸­å¸¦æœ‰åŠ¨æ€æ ‡é¢˜çš„ç®€å•å±å¹•*

*å¦‚æœä½ åœ¨è¿™é‡Œï¼Œä½ å¯èƒ½å·²ç»æ˜ç™½â€”â€”ä¸€æ—¦è¿™ä¸ªç»„ä»¶æ ‘åœ¨ä¸­å‹åº”ç”¨ç¨‹åºä¸­å˜å¾—è¶Šæ¥è¶Šæ·±ï¼Œç®¡ç†æ‰€æœ‰è¿™äº›å†…éƒ¨çš„*çŠ¶æ€*å°±å˜å¾—è¶Šæ¥è¶Šå›°éš¾ã€‚æ­¤å¤–ï¼Œä½ å¿…é¡»é€šè¿‡å±‚æ¬¡æ ‘æ·±å¤„çš„è®¸å¤š*çŠ¶æ€*ï¼Œä¾‹å¦‚ï¼Œä»…ä»…ä¸ºäº†æ§åˆ¶ä¸€ä¸ª*æ–‡æœ¬*ï¼Œæˆ–è€…*æŒ‰é’®*ã€‚
æ›´é‡è¦çš„æ˜¯â€”â€”å¦‚æœä½ æœ‰å¤šä¸ªå…·æœ‰ç›¸ä¼¼ UI çš„å±å¹•ï¼Œæˆ–è€…åªæœ‰ä¸€ä¸ªä¸ç›¸ä¼¼çš„*çŠ¶æ€*ç›¸å…³ï¼Œä½ å¿…é¡»å†æ¬¡ç¼–å†™å’Œç®¡ç†å®ƒï¼Œå¹¶ä»¥æŸç§æ–¹å¼åœ¨è¿™äº›*çŠ¶æ€*ä¹‹é—´è¿›è¡Œè¿æ¥(ä¾‹å¦‚ *SharedPrefs* ã€ *DB* æˆ– *Intents* )ã€‚å—¯ï¼Œè‡³å°‘æˆ‘ä»¬å·²ç»è®©`[rememberSaveable](https://stackoverflow.com/questions/66424642/android-jetpack-compose-by-remembersaveable-state-does-not-survive-back-button)`åœ¨å±å¹•æ—‹è½¬æœŸé—´ä¿æŒé‚£äº›*çŠ¶æ€*ğŸ˜…ã€‚*

## *æ‹¥æœ‰å…¨å±€çŠ¶æ€ç®¡ç†çœ‹èµ·æ¥åƒä»€ä¹ˆ*

*æ— è®ºå¦‚ä½•ï¼Œæˆ‘åœ¨è¿™é‡Œä¸æ˜¯è¦è¯´æœä½ ä¸ºä»€ä¹ˆ**å…¨å±€**çŠ¶æ€å¾ˆæ£’ï¼Œæˆ‘åœ¨è¿™é‡Œæ˜¯è¦å‘ä½ å±•ç¤ºå¦‚ä½•åœ¨ *JetpackCompose* :)
è·Ÿéš[æˆ‘çš„ç³»åˆ—](/nerd-for-tech/reactdroid-reactive-mvi-architecture-for-android-with-a-pure-kotlin-core-multiplatform-587726a5045f)ä¸Šçš„ [*Reactdroid*](https://github.com/GuyMichael/Reactdroid) åº“ï¼Œè¿™é‡Œæ˜¯ä½ å¦‚ä½•å¯ä»¥*è¿æ¥*ä½ çš„ *JetpackCompose* ä»£ç åˆ°*å­˜å‚¨åº“**

**JetpackCompose ä¸­å¸¦æœ‰å…¨å±€çŠ¶æ€æ ‡é¢˜çš„ç®€å•å±å¹•ï¼Œä½¿ç”¨ Reactdroid çš„å­˜å‚¨**

**å°±æ˜¯è¿™æ ·ï¼ç°åœ¨*æ ‡é¢˜*åœ¨å…¨å±€èŒƒå›´å†…ï¼Œå¯ä»¥è¢«ä½ æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­çš„è®¸å¤šç»„ä»¶è·¨é¡µé¢ä½¿ç”¨(ä¾‹å¦‚*æ´»åŠ¨*)ã€‚
æ­¤å¤–ï¼Œæ‚¨å¯ä»¥åœ¨åº”ç”¨ç¨‹åºçš„ä»»ä½•åœ°æ–¹ä»**æ›´æ”¹*æ ‡é¢˜*(ä½¿ç”¨*åˆ†æ´¾*)ï¼Œè€Œä¸ç®¡ä½¿ç”¨å®ƒçš„ç»„ä»¶åœ¨å“ªé‡Œã€‚****

**å½“ç„¶ï¼Œä½œä¸º [*Reactdroid*](https://github.com/GuyMichael/Reactdroid) åº“çš„ä¸€éƒ¨åˆ†ï¼Œæ‚¨å¯ä»¥å°† *props* æ¨¡å‹ç”¨äºå¤æ‚çŠ¶æ€ï¼Œè€Œä¸æ˜¯å•ä¸ªå€¼ã€‚è¿™æ¬¡æˆ‘ä»¬å°†å¯¼å‡ºä¸€ä¸ª*è¿æ¥çš„â€œ*ä¸»å±å¹•â€ï¼Œè€Œä¸æ˜¯è®©å®ƒâ€œçŸ¥é“â€å®ƒçš„*çŠ¶æ€*æ˜¯å¦‚ä½•è¢«æ§åˆ¶çš„ã€‚*jetpackcomposite*å›¢é˜Ÿç§°ä¹‹ä¸º [*åŠè£…*](https://developer.android.com/codelabs/jetpack-compose-state#5) :**

**JetpackCompose ä¸­çš„è¿æ¥å±å¹•ï¼Œä½¿ç”¨ Reactdroid çš„å­˜å‚¨å’Œæå‡**

**ç®€è€Œè¨€ä¹‹ï¼Œ*è¿æ¥*æ–¹æ³•*å°†é€šå¸¸æ¥æ”¶ä¸€äº›*å±æ€§*çš„*ç»„ä»¶(*ç»„ä»¶*)è¿æ¥åˆ°*å­˜å‚¨*(å…¨å±€çŠ¶æ€)ï¼Œå¹¶å¸®åŠ©æ‚¨å°† UI ä»£ç ä¸çŠ¶æ€ç®¡ç†ä»£ç åˆ†ç¦»â€”â€”ä¸å‰é¢ç¤ºä¾‹ä¸­çš„`observeAsValue`(ä»¥åŠç±»ä¼¼æ–¹æ³•)å’Œ`mutableStateOf`ç›¸åã€‚å°±åƒ *Redux* â€¦**

> *ä¾æˆ‘æ‹™è§ï¼Œè¿™åº”è¯¥æ˜¯å”¯ä¸€çš„æ–¹æ³•/é£æ ¼ã€‚
> ç°åœ¨å…³æ³¨ç‚¹çš„åˆ†ç¦»è¢«æœ€å¤§åŒ–äº†â€”â€”ä½ ç”šè‡³å¯ä»¥è®©ä¸åŒçš„å¼€å‘äººå‘˜åœ¨æ¯ä¸ªéƒ¨åˆ†å·¥ä½œ:
> çº¯ UI ä»£ç åœ¨*ä¸»å±å¹•*ä¸­ï¼Œè¿æ¥åˆ°æ•°æ®/çŠ¶æ€ä»£ç åœ¨*connectedmainseen*ä¸­ï¼Œè€Œ *MainActivity* å°±åƒå®ƒåº”è¯¥çš„é‚£æ ·â€”â€”å®Œå…¨ä¸çŸ¥é“ UI ä»£ç ã€‚*

# *æ‘˜è¦*

*è¿™æ˜¯ä¸€ä¸ªå¿«é€Ÿçš„æ¦‚è¿°ï¼Œå±•ç¤ºäº†å¦‚ä½•å°†å…¨å±€çŠ¶æ€å’Œ *JetpackCompose* ä¸€èµ·ä½¿ç”¨ã€‚å®ƒè®©æˆ‘ä»¬åœ¨å‰å¾€ [*ç§‘ç‰¹æ—å¤šå¹³å°*](https://kotlinlang.org/docs/multiplatform.html) çš„æ—…ç¨‹ä¸­åˆå‰è¿›äº†ä¸€æ­¥ã€‚æˆ‘å¸Œæœ›ä½ å–œæ¬¢å®ƒï¼Œå¦‚æœä½ æƒ³äº†è§£å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œè¯·ç»§ç»­å…³æ³¨ã€‚*

> *å¦‚æœä½ å¾ˆéš¾ç†è§£è¿™äº›ä¾‹å­ï¼Œä½ å¯èƒ½ä¼šé”™è¿‡*ä¸Šçš„[æˆ‘çš„ç³»åˆ—](/nerd-for-tech/reactdroid-reactive-mvi-architecture-for-android-with-a-pure-kotlin-core-multiplatform-587726a5045f)React*+*Redux*ä¸­çš„ *Kotlin* ä½†å®ƒåŸºæœ¬ä¸Šåªæ˜¯ [*Redux*](https://redux.js.org/) æ ·å¼ï¼Œå¹¶ç»‘å®šåˆ° JetpackComposeã€‚è¿™é‡Œçš„è¦ç‚¹æ˜¯â€”â€”ä½¿ç”¨ *JetpackCompose* å’Œ *SwiftUI* *:)* ï¼Œæˆ‘ä»¬ç¦»å…¨é¢çš„ [*Kotlin å¤šå¹³å°*](https://kotlinlang.org/docs/multiplatform.html) åº“åˆè¿‘äº†ä¸€æ­¥*