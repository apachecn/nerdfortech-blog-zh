<html>
<head>
<title>Angular 11: PART 2 Insert external HTML in your own website â€” Web scraping</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Angular 11:ç¬¬2éƒ¨åˆ†åœ¨è‡ªå·±çš„ç½‘ç«™ä¸­æ’å…¥å¤–éƒ¨HTMLç½‘ç»œæŠ“å–</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/nerd-for-tech/angular-11-part-2-insert-external-html-in-your-own-website-web-scraping-acbf73d51fda?source=collection_archive---------15-----------------------#2021-03-07">https://medium.com/nerd-for-tech/angular-11-part-2-insert-external-html-in-your-own-website-web-scraping-acbf73d51fda?source=collection_archive---------15-----------------------#2021-03-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="2a0f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">åœ¨ç¬¬ä¸€éƒ¨åˆ†ä¸­ï¼Œæˆ‘å‘ä½ å±•ç¤ºäº†æˆ‘æ˜¯å¦‚ä½•åœ¨æˆ‘çš„ç½‘ç«™ä¸Šå°†ä¸€ä¸ªç½‘é¡µä»ä¸€ä¸ªå¤–éƒ¨æºç§»åŠ¨åˆ°ä¸€ä¸ªæœ¬åœ°æ¨¡æ€çš„(ä½ æ²¡æœ‰é˜…è¯»å®ƒğŸ˜³å¤´é‚£è¾¹é©¬ä¸Š<a class="ae jd" href="https://johanfaerch.medium.com/angular-11-insert-external-html-in-your-own-website-web-scraping-ff78f2540c4b" rel="noopener"> Part 1 </a>)ã€‚</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/9db1181d3cd561836c63ed45e1063c60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Uli164q2r2fTWyXUlFR7QQ.jpeg"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">ä¼Šæ©Â·æ–½è€å¾·åœ¨<a class="ae jd" href="https://unsplash.com/s/photos/web-modal?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>ä¸Šçš„ç…§ç‰‡</figcaption></figure><p id="9bbe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ä½ çœ‹äº†å—ï¼Ÿå¥½å§ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­äº†ğŸ¤“</p><p id="add8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">è¿™ä¸€æ¬¡ï¼Œæˆ‘å°†æ‰©å±•åŸæ¥çš„è§£å†³æ–¹æ¡ˆï¼Œè¿›ä¸€æ­¥æ“çºµHTMLå’Œé”™è¯¯å¤„ç†ã€‚</p><p id="ce4e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">åœ¨æˆ‘æ”¶é›†äº†å¤–éƒ¨webé¡µé¢çš„HTMLå­—ç¬¦ä¸²ä¹‹åï¼Œæˆ‘å‘ç°ä¸webç«™ç‚¹çš„å…¶ä»–éƒ¨åˆ†ç›¸æ¯”ï¼Œæœ‰äº›æ ·å¼å·²ç»è¿‡æ—¶äº†ã€‚</p><pre class="jf jg jh ji fd ju jv jw jx aw jy bi"><span id="efdb" class="jz ka hi jv b fi kb kc l kd ke">...<br/>const originText = await response.text();</span></pre><p id="f7aa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">åŒ…å«æˆ‘ä»¬å¯ä»¥æ“ä½œçš„å­—ç¬¦ä¸²å½¢å¼çš„HTMLã€‚æˆ‘ä»¬å½“ç„¶å¯ä»¥æ ¹æ®å¤–éƒ¨HTMLçš„å…ƒç´ å’Œç°æœ‰ç±»æ·»åŠ ä¸€äº›æ ·å¼ï¼Œä½†åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘æ›´å–œæ¬¢æ”¹å˜HTMLå­—ç¬¦ä¸²ã€‚</p><p id="5a8e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">é¦–å…ˆï¼Œæ®µè½æ˜¯ç”¨pæ ‡ç­¾åŒ…è£…çš„ï¼Œæˆ‘æƒ³æŠŠå®ƒæ¢æˆspanæ ‡ç­¾ï¼Œå› ä¸ºè¿™æ˜¯æˆ‘åœ¨æˆ‘çš„ç½‘é¡µä¸Šå…¶ä»–åœ°æ–¹ä½¿ç”¨çš„ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä½¿ç”¨å¸¦æœ‰regexçš„å­—ç¬¦ä¸²â€œreplace()â€æ–¹æ³•åœ¨åŒä¸€ä¸ªæ–¹æ³•ä¸­æ‰§è¡Œå¤šæ¬¡æ›¿æ¢ï¼Œå³p -&gt; spanã€‚è¿™å¹¶æ²¡æœ‰å‰Šå‡å®ƒï¼Œå› ä¸ºè¿™å°†å–ä»£æ–‡æœ¬ä¸­çš„ä»»ä½•â€œpâ€ã€‚ç›¸åæˆ‘ä»¬è¿™æ ·æ›¿æ¢:</p><pre class="jf jg jh ji fd ju jv jw jx aw jy bi"><span id="a395" class="jz ka hi jv b fi kb kc l kd ke">const text1 = originText.replace(/&lt;p|&lt;\/p&gt;/gi, (x) =&gt; {<br/>  if (x === '&lt;p') {<br/>    return x = '&lt;span';<br/>  } else if (x === '&lt;/p&gt;') {<br/>     return x = '&lt;/span&gt;';<br/>  }<br/>});</span></pre><p id="69c7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">è¿™åº”è¯¥å¯ä»¥è§£å†³æ®µè½é—®é¢˜ã€‚æ­¤å¤–ï¼Œæ²¡æœ‰headeræ ‡è®°ï¼Œæ‰€ä»¥æˆ‘å°†æ•´ä¸ªâ€œheaderâ€æ›¿æ¢ä¸ºå…·æœ‰ç›¸åŒå†…å®¹çš„h1æ ‡è®°:</p><pre class="jf jg jh ji fd ju jv jw jx aw jy bi"><span id="4db8" class="jz ka hi jv b fi kb kc l kd ke">const text = text1.replace('&lt;span&gt;Nutzungsbedingungen&lt;/span&gt;', '&lt;h1&gt;Nutzungsbedingungen&lt;/h1&gt;');</span></pre><p id="ad37" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">é¡µè„šå˜å¾—å¾ˆå¥‡æ€ªï¼Œå› ä¸ºå®ƒæœ‰æ¥è‡ªä¸å†éœ€è¦çš„å¤–éƒ¨ç«™ç‚¹çš„æ”¯æŒä¿¡æ¯ã€‚é¡µé¢çš„æœ€åä¸€éƒ¨åˆ†çœ‹èµ·æ¥åƒè¿™æ ·:</p><pre class="jf jg jh ji fd ju jv jw jx aw jy bi"><span id="5ff5" class="jz ka hi jv b fi kb kc l kd ke">...<br/>&lt;span&gt;Yadayada&lt;/span&gt;</span><span id="2965" class="jz ka hi jv b fi kf kc l kd ke">&lt;hr&gt;</span><span id="ca6f" class="jz ka hi jv b fi kf kc l kd ke">&lt;span class="text-center"&gt;&lt;strong&gt;Contact Yada Support&lt;/strong&gt;<br/>&lt;br&gt;Need help?&lt;/span&gt;<br/>&lt;span class="text-center"&gt;&lt;a class="btn btn-primary" href="<a class="ae jd" href="mailto:unzerdirect@unzer.com" rel="noopener ugc nofollow" target="_blank">yada@yada.com</a>" role="button"&gt;&lt;i class="fa fa-envelope-o"&gt;&lt;/i&gt; <a class="ae jd" href="mailto:unzerdirect@unzer.com" rel="noopener ugc nofollow" target="_blank">yada@yada.com</a>&lt;/a&gt;&lt;/span&gt;</span></pre><p id="ac37" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æ‰€ä»¥æˆ‘è®¤ä¸ºè¿™å°†æ˜¯æ›´å®¹æ˜“åšçš„HTMLæ“ä½œï¼Œæ‰€ä»¥pçš„æ›¿æ¢ä¸ºspançš„ï¼Œæˆ‘å›åˆ°äº†HTML</p><pre class="jf jg jh ji fd ju jv jw jx aw jy bi"><span id="18c0" class="jz ka hi jv b fi kb kc l kd ke">const terms = parse(text);<br/>const htmlTerms1 = terms?.querySelector('#sidebar')?.nextElementSibling;</span></pre><p id="deb3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å¹¶åˆ é™¤äº†hræ ‡ç­¾åçš„ä¸¤ä¸ªå…„å¼Ÿ</p><pre class="jf jg jh ji fd ju jv jw jx aw jy bi"><span id="5d94" class="jz ka hi jv b fi kb kc l kd ke">htmlTerms1?.querySelector('hr')?.nextElementSibling?.remove();<br/>htmlTerms1?.querySelector('hr')?.nextElementSibling?.remove();<br/>this.htmlTerms = htmlTerms1?.innerHTML;</span></pre><p id="5ec9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å¯¹äºè¿™ä¸ªç»“æœ:</p><pre class="jf jg jh ji fd ju jv jw jx aw jy bi"><span id="9783" class="jz ka hi jv b fi kb kc l kd ke">...<br/>&lt;span&gt;Yadayada&lt;/span&gt;</span><span id="7b6b" class="jz ka hi jv b fi kf kc l kd ke">&lt;hr&gt;</span></pre><p id="7ff8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æ‰€ä»¥ç°åœ¨æˆ‘æœ‰äº†æˆ‘æƒ³è¦çš„æ ‡é¢˜å’Œæ®µè½æ ¼å¼ï¼Œå¹¶ä¸”æˆ‘å·²ç»ç§»é™¤äº†é¡µè„šã€‚ä¸‹é¢æ˜¯å±æ€§â€œhtmlTermsâ€ä¸­çš„æŠ“å–ã€æ ¼å¼åŒ–å’Œæœ€ç»ˆHTMLä»£ç :</p><pre class="jf jg jh ji fd ju jv jw jx aw jy bi"><span id="0250" class="jz ka hi jv b fi kb kc l kd ke">(async () =&gt; {<br/>  const response = await fetch('<a class="ae jd" href="https://www.unzerdirect.com/terms/'" rel="noopener ugc nofollow" target="_blank">https://your/external/terms/'</a>);<br/>  const originText = await response.text();<br/>  const text1 = originText.replace(/&lt;p|&lt;\/p&gt;/gi, (x) =&gt; {<br/>    if (x === '&lt;p') {<br/>      return x = '&lt;span';<br/>    } else if (x === '&lt;/p&gt;') {<br/>      return x = '&lt;/span&gt;';<br/>    }<br/>  });<br/>  const text = text1.replace('&lt;span&gt;Nutzungsbedingungen&lt;/span&gt;', '&lt;h1&gt;Nutzungsbedingungen&lt;/h1&gt;');<br/>  const terms = parse(text);<br/>  const htmlTerms1 = terms?.querySelector('#sidebar')?.nextElementSibling;<br/>  htmlTerms1?.querySelector('hr')?.nextElementSibling?.remove();<br/>  htmlTerms1?.querySelector('hr')?.nextElementSibling?.remove();<br/>  this.htmlTerms = htmlTerms1?.innerHTML;<br/>})();</span></pre><p id="5c8f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æ³¨æ„å¯é€‰çš„é“¾æ¥ï¼Ÿè¿™æ˜¯é¿å…åœ¨æˆ‘å‘ç”¨æˆ·äº¤ä»˜æ¨¡å‹çš„è¿‡ç¨‹ä¸­å‡ºç°é—®é¢˜æ—¶ç ´åä¸€åˆ‡çš„ç±»å‹è„šæœ¬éƒ¨åˆ†ã€‚ä½†æ˜¯å¦‚æœèƒ½å¤„ç†è¿™æ ·çš„é”™è¯¯å°±æ›´å¥½äº†ï¼Œæ‰€ä»¥æˆ‘æƒ³æˆ‘ä¼šé‡‡ç”¨æ¨¡æ€â€¦</p><pre class="jf jg jh ji fd ju jv jw jx aw jy bi"><span id="6b43" class="jz ka hi jv b fi kb kc l kd ke">openTerms() {<br/>  if (this.htmlTerms) { // Only needed for the error handling<br/>    this.dialogService.confirm(<br/>      '',<br/>      this.htmlTerms,<br/>      this.translate.instant('Accept'),<br/>      this.translate.instant('Cancel')<br/>    )<br/>    .afterClosed()<br/>    .subscribe((confirmed: boolean) =&gt; {<br/>      if (confirmed) {<br/>        this.accept = true;<br/>      }<br/>    });<br/>  } // end of if<br/>}</span></pre><p id="25f6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">â€¦å¹¶æ·»åŠ ä¸€ä¸ªelseå­å¥ï¼Œè‡³å°‘ç»™ç”¨æˆ·ä¸€äº›åŠæœ‰ç”¨çš„ä¿¡æ¯â€¦</p><pre class="jf jg jh ji fd ju jv jw jx aw jy bi"><span id="2fbe" class="jz ka hi jv b fi kb kc l kd ke">...<br/>  } else {<br/>    this.dialogService.alert(<br/>      `Sorry, we could not get the Terms at this point`,<br/>      `Please go to <a class="ae jd" href="https://www.unzerdirect.com/terms/" rel="noopener ugc nofollow" target="_blank">https://your/external/terms/</a> (copy the URL and paste it in a new tab)`,<br/>      'warning_amber'<br/>    );<br/>  }<br/>}</span></pre><p id="9e32" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">è¿™åªæ˜¯ä¸€ä¸ªå¸¦æœ‰URLçš„è­¦å‘Šï¼Œä»¥é˜²å‡ºç°æœªå®šä¹‰çš„æœ¯è¯­ã€‚</p><p id="9360" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æˆ‘å¸Œæœ›è¿™èƒ½ç»™ä½ è‡ªå·±çš„é¡¹ç›®æä¾›ä¸€äº›æ€è·¯ã€‚</p><p id="cbff" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å¿«ä¹ç¼–ç ğŸ¤—</p></div></div>    
</body>
</html>