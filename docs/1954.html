<html>
<head>
<title>Custom Lookups in Django</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Django ä¸­çš„è‡ªå®šä¹‰æŸ¥æ‰¾</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/nerd-for-tech/custom-lookups-in-django-69fd13e35bdb?source=collection_archive---------5-----------------------#2021-04-14">https://medium.com/nerd-for-tech/custom-lookups-in-django-69fd13e35bdb?source=collection_archive---------5-----------------------#2021-04-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="8984" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">åœ¨æˆ‘ä»¬æ£€æŸ¥è‡ªå®šä¹‰æŸ¥æ‰¾ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆçœ‹çœ‹åŸºç¡€çŸ¥è¯†ï¼Œäº†è§£ä»€ä¹ˆæ˜¯æŸ¥æ‰¾</p><h2 id="a8b6" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">é‚£ä¹ˆä»€ä¹ˆæ˜¯æŸ¥æ‰¾å‘¢â€¦</h2><p id="146e" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">æ ¹æ® Django æ–‡ä»¶</p><blockquote class="kd ke kf"><p id="9715" class="if ig kg ih b ii ij ik il im in io ip kh ir is it ki iv iw ix kj iz ja jb jc hb bi translated">å­—æ®µæŸ¥æ‰¾æ˜¯æŒ‡å®š SQL <code class="du kk kl km kn b"><strong class="ih hj">WHERE</strong></code>å­å¥å†…å®¹çš„æ–¹å¼ã€‚å®ƒä»¬è¢«æŒ‡å®šä¸º<code class="du kk kl km kn b"><strong class="ih hj">QuerySet</strong></code>æ–¹æ³•<code class="du kk kl km kn b"><a class="ae ko" href="https://docs.djangoproject.com/en/3.1/ref/models/querysets/#django.db.models.query.QuerySet.filter" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj">filter()</strong></a></code>ã€<code class="du kk kl km kn b"><a class="ae ko" href="https://docs.djangoproject.com/en/3.1/ref/models/querysets/#django.db.models.query.QuerySet.exclude" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj">exclude()</strong></a></code>å’Œ<code class="du kk kl km kn b"><a class="ae ko" href="https://docs.djangoproject.com/en/3.1/ref/models/querysets/#django.db.models.query.QuerySet.get" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj">get()</strong></a></code>çš„å…³é”®å­—å‚æ•°ã€‚</p></blockquote><p id="a482" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œä½†ä¸€ä¸ªä¾‹å­ä¼šä½¿å®ƒå˜å¾—å®¹æ˜“å¾—å¤š</p><pre class="kp kq kr ks fd kt kn ku kv aw kw bi"><span id="9652" class="jd je hi kn b fi kx ky l kz la">Entry.objects.filter(id__in=[1, 3, 4])</span></pre><p id="bd15" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œâ€˜ä¸­çš„<strong class="ih hj">â€™å°±æ˜¯æ‰€è°“çš„æŸ¥æ‰¾ï¼Œä¸Šé¢çš„æŸ¥è¯¢æ‰€åšçš„æ˜¯è¿‡æ»¤æ‰€æœ‰çš„<strong class="ih hj">æ¡ç›®</strong>æ•°æ®ï¼Œå…¶ä¸­å®ƒä»¬çš„<strong class="ih hj">id</strong>å±äºåˆ—è¡¨<strong class="ih hj">ã€1ï¼Œ3ï¼Œ4ã€‘</strong>ä¸­çš„ä»»æ„<strong class="ih hj"> </strong>å€¼</strong></p><p id="68fd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ç°åœ¨ï¼Œæˆ‘å¸Œæœ›æ‚¨å¯¹å¦‚ä½•ä»¥åŠåœ¨å“ªé‡Œä½¿ç”¨æŸ¥æ‰¾æœ‰æ‰€äº†è§£</p><p id="e09b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Django æœ‰è®¸å¤šå†…ç½®çš„æŸ¥æ‰¾ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œé‚£ä¹ˆé»˜è®¤ä¸º exact:</p><pre class="kp kq kr ks fd kt kn ku kv aw kw bi"><span id="91a8" class="jd je hi kn b fi kx ky l kz la">Entry.objects.get(id=14)</span></pre><p id="0bef" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ä¸ç›¸åŒ</p><pre class="kp kq kr ks fd kt kn ku kv aw kw bi"><span id="bb43" class="jd je hi kn b fi kx ky l kz la">Entry.objects.get(id__exact=14)</span></pre><p id="119f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å†…ç½®æŸ¥æ‰¾çš„å‡ ä¸ªä¾‹å­æ˜¯[<code class="du kk kl km kn b">in</code>ã€<code class="du kk kl km kn b">iexact,</code>ã€<code class="du kk kl km kn b">contains</code>ã€<code class="du kk kl km kn b">gt</code>ã€<code class="du kk kl km kn b">gte</code>ã€T10ã€<code class="du kk kl km kn b">startswith</code>â€¦ã€‚]</p><p id="211d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æ‚¨å¯ä»¥æŸ¥çœ‹å…¶ä½™å†…å®¹çš„é“¾æ¥:<a class="ae ko" href="https://docs.djangoproject.com/en/3.1/ref/models/querysets/#field-lookups" rel="noopener ugc nofollow" target="_blank">https://docs . django project . com/en/3.1/ref/models/query sets/# field-lookups</a></p><figure class="kp kq kr ks fd lc er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es lb"><img src="../Images/00683adc584b5c7bdfe9d6f068571b78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dDUNiGmvAfXKhUVvuFUtkw.png"/></div></div></figure><h1 id="577f" class="lj je hi bd jf lk ll lm jj ln lo lp jn lq lr ls jq lt lu lv jt lw lx ly jw lz bi translated">è®©æˆ‘ä»¬è·³åˆ°å¹¶è§£å†³ğŸ˜åœ¨â€¦â€¦é‡ŒğŸ â€” â€” â€” â€”ä¹ ä¿—ğŸ‘€ğŸ‘†ğŸ»</h1><p id="4db8" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">å“ˆå“ˆæŠ±æ­‰ï¼Œæˆ‘è¢«è¡¨æƒ…ç¬¦å·å†²æ˜äº†å¤´è„‘ï¼Œ</p><h1 id="16e0" class="lj je hi bd jf lk ll lm jj ln lo lp jn lq lr ls jq lt lu lv jt lw lx ly jw lz bi translated">é‚£ä¹ˆæˆ‘ä»¬éœ€è¦å®šåˆ¶æŸ¥æ‰¾æ˜¯ä¸ºäº†ä»€ä¹ˆå‘¢ï¼Ÿ</h1><p id="cee5" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">ä¸ºä»€ä¹ˆï¼Œç­”æ¡ˆå¾ˆç®€å•ï¼Œå› ä¸ºæ ¹æ®ä½ çš„å¤æ‚éœ€æ±‚ï¼Œå¯èƒ½æ²¡æœ‰å¯ä»¥è·å–æ•°æ®çš„æŸ¥æ‰¾</p><p id="5861" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªæ¥è‡ª Djangodocs çš„éå¸¸ç®€å•çš„ä¾‹å­ï¼Œå®ƒä¼šç»™ä½ è¶³å¤Ÿçš„ä¿¡æ¯æ¥å¼€å§‹å®šåˆ¶æŸ¥æ‰¾</p><p id="357d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æˆ‘ä»¬å°†ç¼–å†™ä¸€ä¸ªä¸<code class="du kk kl km kn b"><strong class="ih hj">exact</strong></code>ç›¸åçš„è‡ªå®šä¹‰æŸ¥æ‰¾<code class="du kk kl km kn b"><strong class="ih hj">ne</strong></code>ã€‚<code class="du kk kl km kn b"><strong class="ih hj">Author.objects.filter(name__ne='Jack')</strong></code>ä¼šç¿»è¯‘æˆ SQL:</p><pre class="kp kq kr ks fd kt kn ku kv aw kw bi"><span id="5c1f" class="jd je hi kn b fi kx ky l kz la">"author"."name" &lt;&gt; 'Jack'</span></pre><p id="dd0e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">è¿™ä¸ª SQL æ˜¯åç«¯ç‹¬ç«‹çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦æ‹…å¿ƒä¸åŒçš„æ•°æ®åº“ã€‚</p><p id="1a17" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œæœ‰ä¸¤ä¸ªæ­¥éª¤ã€‚é¦–å…ˆæˆ‘ä»¬éœ€è¦å®ç°æŸ¥æ‰¾ï¼Œç„¶åæˆ‘ä»¬éœ€è¦å‘Šè¯‰ Django:</p><pre class="kp kq kr ks fd kt kn ku kv aw kw bi"><span id="d4a0" class="jd je hi kn b fi kx ky l kz la"><strong class="kn hj">from</strong> <strong class="kn hj">django.db.models</strong> <strong class="kn hj">import</strong> Lookup</span><span id="f60a" class="jd je hi kn b fi ma ky l kz la"><strong class="kn hj">class</strong> <strong class="kn hj">NotEqual</strong>(Lookup):<br/>    lookup_name = 'ne'</span><span id="3d36" class="jd je hi kn b fi ma ky l kz la">    <strong class="kn hj">def</strong> as_sql(self, compiler, connection):<br/>        lhs, lhs_params = self.process_lhs(compiler, connection)<br/>        rhs, rhs_params = self.process_rhs(compiler, connection)<br/>        params = lhs_params + rhs_params<br/>        <strong class="kn hj">return</strong> '<strong class="kn hj">%s</strong> &lt;&gt; <strong class="kn hj">%s</strong>' % (lhs, rhs), params</span></pre><p id="3e92" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ä¸ºäº†æ³¨å†Œ<code class="du kk kl km kn b"><strong class="ih hj">NotEqual</strong></code>æŸ¥è¯¢ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æˆ‘ä»¬å¸Œæœ›æŸ¥è¯¢å¯ç”¨çš„å­—æ®µç±»ä¸Šè°ƒç”¨<code class="du kk kl km kn b"><strong class="ih hj">register_lookup</strong></code>ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒæŸ¥æ‰¾å¯¹æ‰€æœ‰çš„<code class="du kk kl km kn b"><strong class="ih hj">Field</strong></code>å­ç±»éƒ½æœ‰æ„ä¹‰ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥ç”¨<code class="du kk kl km kn b"><strong class="ih hj">Field</strong></code>æ³¨å†Œå®ƒ:</p><pre class="kp kq kr ks fd kt kn ku kv aw kw bi"><span id="5e6c" class="jd je hi kn b fi kx ky l kz la"><strong class="kn hj">from</strong> <strong class="kn hj">django.db.models</strong> <strong class="kn hj">import</strong> Field<br/>Field.register_lookup(NotEqual)</span></pre><p id="3d67" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æŸ¥æ‰¾æ³¨å†Œä¹Ÿå¯ä»¥ä½¿ç”¨è£…é¥°æ¨¡å¼æ¥å®Œæˆ:</p><pre class="kp kq kr ks fd kt kn ku kv aw kw bi"><span id="25a9" class="jd je hi kn b fi kx ky l kz la"><strong class="kn hj">from</strong> <strong class="kn hj">django.db.models</strong> <strong class="kn hj">import</strong> Field</span><span id="bbaf" class="jd je hi kn b fi ma ky l kz la">@Field.register_lookup<br/><strong class="kn hj">class</strong> <strong class="kn hj">NotEqualLookup</strong>(Lookup):</span></pre><p id="10d4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æŸ¥çœ‹æ›´å¤šä¿¡æ¯:<a class="ae ko" href="https://docs.djangoproject.com/en/3.1/howto/custom-lookups/" rel="noopener ugc nofollow" target="_blank">https://docs.djangoproject.com/en/3.1/howto/custom-lookups/</a></p><p id="91f1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æ‰€æœ‰äººéƒ½åˆ°æ­¤ä¸ºæ­¢äº†ï¼Œå¦‚æœä½ ä¸€ç›´è¯»åˆ°è¿™é‡Œï¼Œé‚£ä¹ˆâ€¦..</p><figure class="kp kq kr ks fd lc er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es mb"><img src="../Images/dcf21bddde5fc157c9aac93e9c15ed20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Jf6hf9EonuGzdIN5JeZObQ.gif"/></div></div></figure></div></div>    
</body>
</html>