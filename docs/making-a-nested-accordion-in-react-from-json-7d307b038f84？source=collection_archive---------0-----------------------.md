# åœ¨ React ä¸­ä» JSON åˆ¶ä½œåµŒå¥—æ‰‹é£ç´

> åŸæ–‡ï¼š<https://medium.com/nerd-for-tech/making-a-nested-accordion-in-react-from-json-7d307b038f84?source=collection_archive---------0----------------------->

![](img/292d1d03aff342b3883d7fc89e8aac44.png)

**ç›®å½•**
1ã€‚[åˆ›å»ºæˆ‘ä»¬çš„é¡¹ç›®](#f825)
2ã€‚[ç†è§£è¯­ä¹‰-ui-ååº”åµŒå¥—æ‰‹é£ç´](#979f)
3ã€‚ä» json
4 åˆ¶ä½œåµŒå¥—æ‰‹é£ç´ã€‚[å·¥ä½œç¤ºä¾‹](#4d2b)

# ğŸŒ åˆ›å»ºæˆ‘ä»¬çš„é¡¹ç›®

ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ›å»ºä¸€ä¸ª react åº”ç”¨ç¨‹åºã€‚

```
## Make react app
npx create-react-app my-app## change directory
cd my-app
```

åœ¨é¦–é€‰ç¼–è¾‘å™¨ä¸­æ‰“å¼€æ–‡ä»¶å¤¹ã€‚åœ¨æˆ‘ä»¬å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦[**semantic-ui-react**](https://react.semantic-ui.com/)**åŒ…ï¼Œå®ƒå°†å¸®åŠ©æˆ‘ä»¬æ¸²æŸ“åµŒå¥—çš„æ‰‹é£ç´ã€‚**

```
$  yarn add semantic-ui-react semantic-ui-css
## Or NPM
$  npm install semantic-ui-react semantic-ui-css
```

# **ğŸŒ **ç†è§£è¯­ä¹‰-ç”¨æˆ·ç•Œé¢-ååº”åµŒå¥—æ‰‹é£ç´****

**åœ¨ä» json æ•°æ®åˆ¶ä½œåµŒå¥— accordion ä¹‹å‰ï¼Œè®©æˆ‘ä»¬è¯•ç€ç†Ÿæ‚‰ä¸€ä¸‹ semantic-ui-react åŒ…æä¾›ç»™æˆ‘ä»¬çš„ n [ested accordionã€‚å¦‚æœä½ å·²ç»çŸ¥é“å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œè¯·è·³è¿‡è¿™ä¸€éƒ¨åˆ†ï¼Œçœ‹çœ‹ä¸‹ä¸€æ­¥](https://react.semantic-ui.com/modules/accordion/)ã€‚**

**åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ã€‚æˆ‘ä»¬å°†å®ƒå‘½åä¸º example.jsï¼Œä»¥åŒ¹é…(semantic-ui-react)æ–‡æ¡£ã€‚è¯¥æ–‡ä»¶å°†åŒ…å«ä»¥ä¸‹ä»£ç ã€‚**

*   **è¿™æ®µä»£ç å…è®¸æˆ‘ä»¬å‘ˆç°ä¸€ä¸ªåµŒå¥—çš„ accordion(åœ¨æ·»åŠ  index.js æ–‡ä»¶ä¹‹å),å¦‚ä¸‹æ‰€ç¤ºã€‚**

**![](img/00565b71314a714dab8e7ec3a58abb28.png)**

**ä¸€çº§æ‰‹é£ç´**

1.  **åˆ†åˆ«ä» react å’Œ semantic-ui-react åº“ä¸­å¯¼å…¥ React å’Œ Accordion(ç¬¬ 1 è¡Œå’Œç¬¬ 2 è¡Œ)ã€‚**
2.  **æ ¹ accordion(ç¬¬ 34 è¡Œ)å°† rootPanels ä½œä¸ºé¢æ¿å±æ€§çš„è¾“å…¥ã€‚å› ä¸ºæˆ‘ä»¬æƒ³è¦ä¸€ä¸ª Level1 é¢æ¿çš„å­ accordion(ç¬¬ 29 è¡Œ),æ‰€ä»¥æˆ‘ä»¬ç§° Level1Content ç»„ä»¶(ç¬¬ 9 è¡Œ)ä¸ºå®ƒçš„å†…å®¹ã€‚Level1Content å–å¦ä¸€ç»„é¢æ¿ä½œä¸ºå…¶é¢æ¿é“å…·ã€‚å®ƒæ²¡æœ‰ä»»ä½•å­ accordionï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼ é€’ä¸€ä¸ªç®€å•çš„å­—ç¬¦ä¸²ä½œä¸ºå®ƒçš„å†…å®¹(ç¬¬ 5 è¡Œå’Œç¬¬ 6 è¡Œ)ã€‚**

**3.è¿™åŒæ ·é€‚ç”¨äº 2 çº§é¢æ¿ã€‚å¸Œæœ›æˆ‘ä»¬èƒ½åœ¨è¿™é‡Œçœ‹åˆ°æ¨¡å¼ã€‚**

**![](img/39cd58451290fec1bf9f061e7c2f8490.png)**

**æ›´æ–° index.js æ–‡ä»¶(åœ¨æˆ‘ä»¬è¿è¡Œ create react app å‘½ä»¤æ—¶åˆ›å»º)ä»¥åŒ…å«ä»¥ä¸‹ä»£ç ã€‚**

1.  **æˆ‘ä»¬éœ€è¦ç¡®ä¿æ·»åŠ æ ·å¼è¡¨(ç¬¬ 7â€“11 è¡Œ)ã€‚å¦‚æœæ‚¨æƒ³çŸ¥é“è¿™äº›å‘åµŒå¥—çš„ accordion ç»„ä»¶æ·»åŠ äº†ä»€ä¹ˆæ ·å¼ï¼Œæˆ‘å»ºè®®æ‚¨æ³¨é‡Šæ‰è¿™äº›è¡Œï¼Œå¹¶æŸ¥çœ‹å¯¹å‘ˆç°ç»„ä»¶çš„å½±å“ã€‚**
2.  **ç”¨ Container åŒ…è£…æˆ‘ä»¬çš„åµŒå¥— accordion(åœ¨ç¬¬ 5 è¡Œä½œä¸ºâ€œExampleâ€å¯¼å…¥),ä»¥ç»™å‡ºä¸€ç‚¹ä½™é‡ã€‚**

**è¿™æ˜¯è¯­ä¹‰ç”¨æˆ·ç•Œé¢ååº”æ–‡æ¡£ä¸­çš„ä¸€ä¸ªå·¥ä½œç¤ºä¾‹ã€‚**

****åµŒå¥—æŠ˜å çš„è¯­ä¹‰-ç”¨æˆ·ç•Œé¢-ååº”æ²™ç®±****

# **ğŸŒ **ç”¨ json åˆ¶ä½œåµŒå¥—æ‰‹é£ç´****

**ç°åœ¨æˆ‘ä»¬(å¸Œæœ›)å·²ç»ç†Ÿæ‚‰äº† semantic-ui-react åŒ…æä¾›çš„åµŒå¥— accordionï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ä» json åˆ›å»ºåµŒå¥— accordionã€‚**

**é¦–å…ˆæ›´æ–° example.js æ–‡ä»¶ã€‚è®©æˆ‘ä»¬åˆ é™¤ example.js ä¸­é™¤å¯¼å…¥ä¹‹å¤–çš„æ‰€æœ‰å†…å®¹ï¼Œç„¶ååƒè¿™æ ·æ·»åŠ  json æ•°æ®ã€‚**

1.  **ä¸ºäº†è¿™ç¯‡æ–‡ç« çš„ç›®çš„ï¼Œæˆ‘é€‰æ‹©äº†ä¸€ä¸ªä¾‹å­ï¼Œå®ƒæœ‰ä¸¤è¡Œé‚£ä¹ˆé•¿ï¼Œè€Œä¸”æ˜¯åµŒå¥—çš„ã€‚è¿™æ˜¯ä¸ºäº†è®©æˆ‘ä»¬äº†è§£å¦‚ä½•åˆ¶å®šæˆ‘ä»¬çš„ json æ•°æ®ï¼Œä»¥è·å¾—æˆ‘ä»¬çš„åµŒå¥—æ‰‹é£ç´ã€‚**
2.  **json å®é™…ä¸ŠåªåŒ…æ‹¬ä¸‹é¢ä»£ç ä¸­æåˆ°çš„å¯¹è±¡ï¼Œæˆ‘å°†æŠŠå®ƒç§°ä¸º**ä¸»å¯¹è±¡**ã€‚**

```
{
    key : "String",
    title:"String",
    content:"Array including nested object"
}
```

**3.å¦‚æœæˆ‘ä»¬ä¸éœ€è¦å­ accordionï¼Œå†…å®¹é”®å°†åŒ…å«ä¸€ä¸ªç©ºæ•°ç»„ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦å­ accordionï¼Œåˆ™åŒ…å«ä¸Šé¢è§£é‡Šçš„ä¸»å¯¹è±¡æ•°ç»„ã€‚**

**4.è¿˜è¦æ³¨æ„ï¼Œjson æ•°æ®è¢«æ·»åŠ åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥æœ‰å¤šä¸ªæ ¹çº§åˆ«é¢æ¿ã€‚**

**æœ€åï¼Œæˆ‘ä»¬å¯ä»¥å…³æ³¨è¿™ä¸ªè¿‡ç¨‹çš„æ ¸å¿ƒï¼Œå³é€’å½’éå† json å¹¶å°†å…¶è½¬æ¢ä¸ºåµŒå¥— accordion çš„å‡½æ•°ã€‚åœ¨ example.js æ–‡ä»¶ä¸­è¿½åŠ ä»¥ä¸‹ä»£ç ã€‚**

*   **accordify å‡½æ•°å°†åŒ…å« json æ•°æ®çš„æ•°ç»„ä½œä¸ºå…¶å‚æ•°ã€‚å®ƒå°†å¸®åŠ©æˆ‘ä»¬é€’å½’åœ°éå† jsonã€‚æˆ‘ä»¬è¿™æ ·åšæ˜¯å› ä¸ºæˆ‘ä»¬é¦–å…ˆéœ€è¦æœ€æ·±çš„ä¸»å¯¹è±¡ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å°†å®ƒä½œä¸ºçˆ¶ accordion çš„è¾“å…¥ã€‚**
*   **å¦‚æœæˆ‘ä»¬åœ¨ç¬¬ 7 è¡Œçš„é€’å½’è°ƒç”¨ä¹‹åæ·»åŠ ä¸€ä¸ª console.log è¯­å¥ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™ä¸ªå‡½æ•°æ˜¯å¦‚ä½•éå†æˆ‘ä»¬çš„è¾“å…¥çš„ã€‚**

```
accordify(*jsonData*[i]["content"]);console.log(*jsonData*[i]["key"])
```

*   **å®ƒå…ˆéå†åˆ°æœ€æ·±çš„{key:"string "ï¼Œtitle:"string "ï¼Œcontent:[ ]}å¯¹è±¡(ä¸»å¯¹è±¡)ï¼Œç„¶åç§»åŠ¨åˆ°åŒçº§çš„å…„å¼Ÿå¯¹è±¡(å¦‚æœæœ‰çš„è¯)ï¼Œå†è·³è½¬åˆ°çˆ¶æ‰‹é£ç´ï¼Œç»§ç»­è¿™ä¸ªè¿‡ç¨‹ã€‚**

**![](img/db6db4b265dfceb99addccb54fbbb06c.png)****![](img/c3e6cac214b2073b4a39427c69cb9f73.png)**

*   **å¦‚æœä¸»å¯¹è±¡æœ‰ä¸€ä¸ªç©ºæ•°ç»„ä½œä¸ºå†…å®¹é”®çš„å€¼ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒæ²¡æœ‰å­ accordionï¼Œæˆ‘ä»¬ç”¨ Accordion åŒ…è£…å®ƒã€‚æ ‡é¢˜ç»„ä»¶(ç¬¬ 18 è¡Œ-ç¬¬ 31 è¡Œ)ã€‚å½“ç„¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»»ä½•å…¶ä»–ç»„ä»¶ã€‚**
*   **å¦‚æœä¸»å¯¹è±¡æœ‰ä¸€ä¸ªéç©ºæ•°ç»„ä½œä¸ºå†…å®¹é”®çš„å€¼ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒæœ‰ä¸€ä¸ªå­ accordion(è¿™ä¸ªå­ accordion æœ¬èº«è¿˜å¯ä»¥æœ‰ä¸€ä¸ªå­ accordion)ï¼Œæˆ‘ä»¬ç”¨ Accordion åŒ…è£…å®ƒã€‚æŠ˜å å¹¶å°†éç©ºæ•°ç»„ä¼ é€’ç»™å®ƒé¢æ¿æœ¬èº«(ç¬¬ 10 è¡Œåˆ°ç¬¬ 16 è¡Œ)ã€‚**
*   **å¦‚æœæˆ‘ä»¬æƒ³çœ‹çœ‹ json æ•°æ®åœ¨å‡½æ•°ä¸­è¿è¡Œåçš„å®é™…æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å‡½æ•°è°ƒç”¨åæ·»åŠ ä¸€ä¸ª console.log è¯­å¥ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚**

```
console.log(JSON.stringify(jsonData,null,2))
```

*   **æœ€åï¼Œæˆ‘ä»¬å°†æ›´æ–°åçš„ json æ•°æ®æä¾›ç»™ Accordion ç»„ä»¶çš„ panels propsï¼Œå¹¶å°†å…¶å¯¼å‡ºã€‚**

```
*const* AccordionExampleNested = () *=>* ( <Accordion *defaultActiveIndex*={0} *panels*={jsonData} *styled* />);
export default AccordionExampleNested;
```

*   **å¦‚æœå‡ºäºæŸç§åŸå› ï¼Œæ‚¨æƒ³çŸ¥é“è¿™ä¸ªå‡½æ•°æ‰§è¡Œéœ€è¦å¤šé•¿æ—¶é—´ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ·»åŠ  performance.now()å‡½æ•°æ¥å®ç°ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚å¯¹äºç¤ºä¾‹ä¸­çš„ jsonï¼Œå¹³å‡éœ€è¦ 3 æ¯«ç§’ã€‚**

```
*var start= performance.now();* accordify(jsonData);
*var end= performance.now();
console.log("Call to accordify took " + (end - start) + " milliseconds.");*
```

*   **å®Œæˆæ‰€æœ‰æ›´æ–°åï¼Œæ•´ä¸ª example.js æ–‡ä»¶åº”è¯¥å¦‚ä¸‹æ‰€ç¤ºã€‚**

**ä¸‹é¢æ˜¯æˆ‘ä»¬çš„ index.js æ–‡ä»¶çš„æ ·å­ã€‚**

# **ğŸŒ å·¥ä½œç¤ºä¾‹**

**æ‚¨å¯ä»¥åœ¨ä»£ç æ²™ç®±ä¸­ä½¿ç”¨è¿™ä¸ªå·¥ä½œç¤ºä¾‹ã€‚**

**æˆ–è€…å…‹éš†è¿™ä¸ª [github repo](https://github.com/AshCatchEmAll/Accordify) æ¥æŸ¥çœ‹å·¥ä½œç¤ºä¾‹ã€‚**

**çœ‹çœ‹æˆ‘å’Œæˆ‘çš„å›¢é˜Ÿåœ¨ [devpost](https://devpost.com/AshCatchEmAll?ref_content=user-portfolio&ref_feature=portfolio&ref_medium=global-nav) ä¸Šæ„å»ºçš„å…¶ä»–é¡¹ç›®ã€‚æ„Ÿè°¢æ‚¨çš„é˜…è¯»ã€‚**

**æ³¨æ„å®‰å…¨ï¼Œâœ¨ğŸŒ¸**