# ä½¿ç”¨ Github æ“ä½œè®¾ç½® CI/CD çš„åˆå­¦è€…æŒ‡å—

> åŸæ–‡ï¼š<https://medium.com/nerd-for-tech/a-beginners-guide-to-setting-up-ci-cd-with-github-actions-81554e7847d0?source=collection_archive---------6----------------------->

![](img/66401a3519771083cbe64309f0d3483b.png)

å¦‚æœæ‚¨æ­£åœ¨é˜…è¯»æœ¬æ–‡ï¼Œæ‚¨æˆ–æ‚¨çš„å›¢é˜Ÿå¯èƒ½éœ€è¦ä¸€ç§æ–¹æ³•æ¥è¿è¡Œè‡ªåŠ¨æµ‹è¯•ï¼Œæ›´å¿«åœ°æ„å»ºã€äº¤ä»˜å’Œéƒ¨ç½²é¡¹ç›®ï¼Œä¸ç”¨æ‹…å¿ƒï¼Œè¿™å°±æ˜¯ Github Actions çš„æŒç»­é›†æˆå’ŒæŒç»­äº¤ä»˜(CI/CD)çš„ç”¨æ­¦ä¹‹åœ°ã€‚ä½†æ˜¯ç­‰ç­‰ï¼ŒCI/CD æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ

# æŒç»­é›†æˆ

æŒç»­é›†æˆæ˜¯å°†æ¥è‡ªå¤šä¸ªå‚ä¸è€…çš„ä»£ç å˜æ›´è‡ªåŠ¨é›†æˆåˆ°å•ä¸ªè½¯ä»¶é¡¹ç›®ä¸­çš„å®è·µã€‚è¿™æ˜¯ä¸»è¦çš„ DevOps æœ€ä½³å®è·µï¼Œå…è®¸å¼€å‘äººå‘˜é¢‘ç¹åœ°å°†ä»£ç å˜æ›´åˆå¹¶åˆ°ä¸€ä¸ªä¸­å¤®å­˜å‚¨åº“ä¸­ï¼Œç„¶ååœ¨é‚£é‡Œè¿è¡Œæ„å»ºå’Œæµ‹è¯•ã€‚

# è¿ç»­äº¤ä»˜(CD)

æŒç»­äº¤ä»˜æ˜¯æŒ‡æ‚¨çš„ä»£ç æ€»æ˜¯å‡†å¤‡å¥½å‘å¸ƒï¼Œä½†é™¤éæ‚¨å†³å®šè¿™æ ·åšï¼Œå¦åˆ™ä¸ä¼šæ¨å‘ç”Ÿäº§ã€‚è¿™æ˜¯ä¸€ä¸ªæ‰‹åŠ¨æ­¥éª¤ã€‚é€šè¿‡æŒç»­éƒ¨ç½²ï¼Œåº”ç”¨ç¨‹åºçš„ä»»ä½•æ›´æ–°å·¥ä½œç‰ˆæœ¬éƒ½ä¼šè‡ªåŠ¨æ¨é€åˆ°ç”Ÿäº§ç¯å¢ƒä¸­ã€‚

# æŒç»­éƒ¨ç½²(CD)

è¿ç»­éƒ¨ç½²æ˜¯ä¸€ä¸ªè¿‡ç¨‹ï¼Œé€šè¿‡è¯¥è¿‡ç¨‹ï¼Œè½¯ä»¶ä»£ç æˆ–æ¶æ„ä¸­åˆæ ¼çš„å˜æ›´ä¸€æ—¦å‡†å¤‡å¥½å°±è¢«éƒ¨ç½²åˆ°ç”Ÿäº§ä¸­ã€‚

# **ç”¨äºæ‰§è¡Œ CI/CD çš„å·¥å…·ç¤ºä¾‹**

æœ‰è®¸å¤šå·¥å…·å¯ä»¥é…ç½®å’Œæ‰§è¡Œ CI/CD æµç¨‹:

*   [è©¹é‡‘æ–¯](https://www.jenkins.io/)
*   [CircleCI](https://circleci.com/)
*   [å›¢é˜Ÿåˆä½œ](https://www.jetbrains.com/teamcity/)
*   [ç«¹å­](https://www.atlassian.com/software/bamboo)
*   [Gitlab](https://about.gitlab.com/)
*   [ä»£ç èˆ¹](https://codeship.com/)
*   [ç‰¹æ‹‰ç»´æ–¯Â·CI](https://travis-ci.org/)

![](img/039b87a5a70da757868aa7359834eff3.png)![](img/c9634f1432ea721723eb2b6070c590a8.png)![](img/87cde02bcfdfac394426623301a8489d.png)![](img/c67cc2ffec74d45e8270304d8158772f.png)![](img/8ced4afa83f3ffe33154720e425b6e01.png)![](img/bebfeca0499a575bf3fbaab4615931c1.png)![](img/b34408bdc139965b568747193f649516.png)

[Github Actions](https://github.com/features/actions) æ˜¯ä¸€æ¬¾å¯ä»¥è½»æ¾å®ç°è½¯ä»¶å·¥ä½œæµè‡ªåŠ¨åŒ–å’Œå¤„ç† CI/CD æµç¨‹çš„å·¥å…·ï¼Œ[2018 å¹´ 10 æœˆæ¨å‡º](https://github.blog/2018-10-17-action-demos/)ï¼Œ2019 å¹´ 8 æœˆæ¨å‡º beta ç‰ˆï¼Œ2019 å¹´ 11 æœˆæœ€ç»ˆå‘å¸ƒï¼ŒGithub Actions ä¹Ÿæ˜¯ä»˜è´¹çš„ï¼Œè™½ç„¶æœ‰å…è´¹ç‰ˆï¼Œä½†æœ‰ä¸€äº›é™åˆ¶ã€‚

# åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ Github åŠ¨ä½œçš„ç¤ºä¾‹

å¯¹äºè¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ [React Js (Create React App)å¯åŠ¨é¡¹ç›®](https://reactjs.org/docs/create-a-new-react-app.html)è¿›è¡Œæ¼”ç¤ºã€‚

![](img/b16e3a6c2cc185aaeab5bcc243d24f28.png)

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦è¿›å…¥ GitHub é¡¹ç›®å¹¶è®¿é—® Actions é€‰é¡¹å¡:

![](img/637fc8f6619ca226f2264695a4f78a54.png)

æˆ‘ä»¬è¿›å…¥ä¸€ä¸ªå±å¹•ï¼Œå…è®¸æˆ‘ä»¬åœ¨é¢„å®šä¹‰çš„å·¥ä½œæµæˆ–å·²å»ºç«‹çš„å·¥ä½œæµä¹‹é—´è¿›è¡Œé€‰æ‹©ï¼Œåœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å·²å»ºç«‹çš„å·¥ä½œæµã€‚

![](img/828758d436283cfc2d3a27315d6ea6b8.png)

æ³¨æ„ä¸‹é¢`.github/workflows/`ä¸­çš„`main.yml`æ–‡ä»¶ä¸­çš„å·¥ä½œæµç¨‹ï¼Œè¿™æ˜¯æˆ‘ä»¬å»ºç«‹è‡ªå·±çš„å·¥ä½œæµç¨‹æ—¶ Github ç»™æˆ‘ä»¬çš„é»˜è®¤å·¥ä½œæµç¨‹ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ä¸åŒçš„å·¥ä½œæµç¨‹åˆ›å»ºä¸åŒçš„æ–‡ä»¶ã€‚

![](img/83e36b5d0c965dc1fadf77a970b79602.png)

ç°åœ¨æˆ‘ä»¬å°†æ”¹å˜æ–‡ä»¶çš„å†…å®¹ã€‚

```
name: Lint on: pushjobs:  
  run-linters:  
    name: Run linters
    runs-on: ${{ matrix.os }} strategy:
      matrix:
        os: [ubuntu-latest]
        node: [13.x, 14.x, 15.x] steps:
      - name: Check out Git repository
        uses: actions/checkout@v2 - name: Setup node env ğŸ— 
        uses: actions/setup-node@v2.1.2
        with:
          node-version: ${{ matrix.node }} - name: Install dependencies ğŸ‘¨ğŸ»â€ğŸ’»
        run: npm ci - name: Run linter ğŸ‘€
        run: npm run lint
```

# 'åç§°'

è¿™æ˜¯æˆ‘ä»¬å·¥ä½œæµç¨‹çš„æ ‡ç­¾ã€‚

# â€œå¼€â€

Github æ‰§è¡Œç”¨`on`é”®å®šä¹‰çš„å·¥ä½œæµâ€”â€”åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œä»»ä½•`push`äº‹ä»¶ã€‚æˆ‘ä»¬è¿˜å¯ä»¥å®šä¹‰ä¸€ä¸ªç‰¹å®šçš„åˆ†æ”¯ã€‚ä¾‹å¦‚ï¼Œ`master`åˆ†æ”¯ä¸­çš„`push`äº‹ä»¶:

```
on:
  push:
    branches:
      - master
```

# ä¹”å¸ƒæ–¯çš„

æ¯ä¸ªå·¥ä½œæµç”±ä¸€ä¸ªæˆ–å¤šä¸ª`jobs`ç»„æˆã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œåªæœ‰ä¸€ä¸ªã€‚

# â€œè¿ç»­è¿è¡Œâ€

æ­¤å‚æ•°åŒ…å«å°†åœ¨å…¶ä¸­æ‰§è¡Œä»£ç çš„è™šæ‹Ÿæœºçš„ç±»å‹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨`ubuntu-latest`(æŸ¥çœ‹ä¸åŒç±»å‹çš„å¯ç”¨è™šæ‹Ÿæœº)ã€‚

# â€œæˆ˜ç•¥â€å’Œâ€œçŸ©é˜µâ€

ä¸€ä¸ª`strategy`åˆ›å»ºä¸€ä¸ª`matrix`ç¯å¢ƒï¼Œåœ¨å…¶ä¸­æ‰§è¡Œå·¥ä½œã€‚æ¯ä¸ª`matrix`å…è®¸æˆ‘ä»¬å»ºç«‹ä¸€ç»„ä¸åŒé…ç½®çš„è™šæ‹Ÿç¯å¢ƒã€‚

# â€œæ­¥éª¤â€

ä¸€ä¸ª`step`æ˜¯ä¸€ç³»åˆ—çš„ä»»åŠ¡ã€‚åœ¨æˆ‘ä»¬çœ‹åˆ°çš„ä¾‹å­ä¸­ï¼Œç¬¬ä¸€æ­¥æ˜¯æ£€æŸ¥è§¦å‘æ¨é€äº‹ä»¶çš„å­˜å‚¨åº“ï¼Œä»¥ä¾¿å·¥ä½œæµå¯ä»¥è®¿é—®å®ƒã€‚

```
- name: Check out Git repository
  uses: actions/checkout@v2
```

åœ¨ç¬¬äºŒæ­¥ä¸­ï¼Œä½¿ç”¨ node.js ç‰ˆæœ¬è®¾ç½®å·¥ä½œæµä»¥æ‰§è¡Œåº”ç”¨ç¨‹åºã€‚

```
- name: Setup node env ğŸ— 
  uses: actions/setup-node@v2.1.2
  with:
    node-version: ${{ matrix.node }}
```

ç¬¬ä¸‰æ­¥ï¼Œå·¥ä½œæµä½¿ç”¨`npm ci`å‘½ä»¤å®‰è£…æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºæ‰€éœ€çš„æ‰€æœ‰ä¾èµ–é¡¹ï¼Œæœ‰å…³è¯¥å‘½ä»¤çš„æ›´å¤šä¿¡æ¯ï¼Œæˆ‘å¼ºçƒˆå»ºè®®æ‚¨æŸ¥çœ‹[æ–‡æ¡£](https://docs.npmjs.com/cli/v7/commands/npm-ci)ã€‚

```
- name: Install dependencies ğŸ‘¨ğŸ»â€ğŸ’»
  run: npm ci
```

ç»ˆäºï¼Œæˆ‘ä»¬åˆ°äº†æœ€åä¸€æ­¥ã€‚

![](img/dd035dc2a0c98135489c06f1ad4bdfbd.png)

åœ¨æœ€åä¸€æ­¥ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ [linter](https://eslint.org/) å·¥å…·ï¼Œè¿™æ˜¯ä¸€ä¸ªåˆ†ææˆ‘ä»¬ä»£ç çš„å·¥å…·ï¼Œå¯ä»¥æ ‡è®°ç¼–ç¨‹é”™è¯¯ã€bugã€é£æ ¼é”™è¯¯ï¼Œæ€»ä½“ä¸Šæœ‰åŠ©äºæ”¹è¿›æˆ‘ä»¬çš„ä»£ç ã€‚

```
- name: Run linter ğŸ‘€
  run: npm run lint
```

æ¯å½“æˆ‘ä»¬å°†ä»£ç æ¨é€åˆ°æˆ‘ä»¬çš„å­˜å‚¨åº“æ—¶ï¼Œè¿™ä¸ªå·¥ä½œæµå°±ä¼šè¿è¡Œï¼Œå½“æˆ‘ä»¬å†æ¬¡è®¿é—®å­˜å‚¨åº“çš„ Actions é€‰é¡¹å¡æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å·¥ä½œæµå·²ç»æ‰§è¡Œçš„æ¬¡æ•°çš„åˆ—è¡¨ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœæ²¡æœ‰å‘ç”Ÿé”™è¯¯ï¼Œæˆ‘ä»¬å°†è·å¾—ä»¥ä¸‹å†…å®¹:

![](img/191014f51af1b2c77412b982d8836662.png)

å°±è¿™æ ·ï¼Œæˆ‘ä»¬ç»“æŸäº†ã€‚

# ç»“è®º

[Github Actions](https://github.com/features/actions) æ˜¯åˆ›å»ºå’Œç»´æŠ¤æŒç»­é›†æˆ/æŒç»­äº¤ä»˜/æŒç»­éƒ¨ç½²(CI/CD)å·¥ä½œæµçš„æœ€ä½³æ–¹å¼ä¹‹ä¸€ï¼Œè¿™ç»å¯¹æ˜¯ä¸€ä¸ªå€¼å¾—å…´å¥‹çš„ç‰¹æ€§ã€‚å®ƒé€šè¿‡å¤„ç†è®¸å¤šæ­¥éª¤ç®€åŒ–äº†å¼€å‘å·¥ä½œæµç¨‹ã€‚

æ‚¨å¯ä»¥ä»è¿™é‡Œè·å¾—æœ¬æ–‡ä¸­ä½¿ç”¨çš„å®Œæ•´ç¤ºä¾‹:

[](https://github.com/ECJ222/reactjs-github-actions-tutorial) [## ecj 222/react js-github-æ“ä½œ-æ•™ç¨‹

### Create React App å…¥é—¨è¿™ä¸ªé¡¹ç›®æ˜¯ç”¨[Create Reactâ€¦

github.com](https://github.com/ECJ222/reactjs-github-actions-tutorial)