<html>
<head>
<title>Sorting extension in Swift</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Swiftä¸­çš„æ’åºæ‰©å±•</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/nerd-for-tech/sorting-extension-in-swift-438ed6f23ce1?source=collection_archive---------5-----------------------#2021-04-01">https://medium.com/nerd-for-tech/sorting-extension-in-swift-438ed6f23ce1?source=collection_archive---------5-----------------------#2021-04-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/a95c0099d4597fdf21d1bdfba23d06a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ty4KjGGmrQnrH-MoGvyWrA.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">æ ¼ä¼¦Â·å¡æ–¯æ»•æ–¯-å½¼å¾—æ–¯åœ¨Unsplashä¸Šçš„ç…§ç‰‡</figcaption></figure></div><div class="ab cl iv iw gp ix" role="separator"><span class="iy bw bk iz ja jb"/><span class="iy bw bk iz ja jb"/><span class="iy bw bk iz ja"/></div><div class="hb hc hd he hf"><p id="48ea" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">åœ¨iOSå¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¤šæ¬¡é‡åˆ°å¯¹æ•°ç»„è¿›è¡Œæ’åºçš„ä»»åŠ¡ï¼Œç„¶åæˆ‘ä»¬åœ¨åº”ç”¨ç¨‹åºä¸­ä»»ä½•éœ€è¦çš„åœ°æ–¹ç¼–å†™å¦‚ä¸‹ä»£ç ã€‚<em class="ka">æ³¨æ„åˆ°</em> <strong class="je hj"> <em class="ka">åŠ¨ç‰©</em> </strong> <em class="ka">çš„æ•°ç»„è¿˜æ²¡æœ‰å®šä¹‰ï¼ŒåŠ¨ç‰©çš„ç»“æ„ä¹Ÿæ²¡æœ‰å®šä¹‰ï¼Œä½†æ˜¯ä¸è¦æ‹…å¿ƒï¼Œå®ƒä»¬å°†åœ¨æœ¬æ–‡çš„åé¢è¢«æŒ‡å®šã€‚</em></p><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="bf26" class="kk kl hi kg b fi km kn l ko kp">animals.sorted { (left, right) -&gt; Bool in {<br/>    return left.id &gt; right.id<br/>}</span></pre></div><div class="ab cl iv iw gp ix" role="separator"><span class="iy bw bk iz ja jb"/><span class="iy bw bk iz ja jb"/><span class="iy bw bk iz ja"/></div><div class="hb hc hd he hf"><h2 id="7931" class="kk kl hi bd kq kr ks kt ku kv kw kx ky jn kz la lb jr lc ld le jv lf lg lh li bi translated">1.é—®é¢˜æ˜¯</h2><p id="f6de" class="pw-post-body-paragraph jc jd hi je b jf lj jh ji jj lk jl jm jn ll jp jq jr lm jt ju jv ln jx jy jz hb bi translated">å¦‚æœä¸æ˜¯æŒ‰<strong class="je hj"> <em class="ka"> id </em> </strong>å¯¹åŠ¨ç‰©æ•°ç»„è¿›è¡Œæ’åºï¼Œè€Œæ˜¯ç°åœ¨éœ€è¦æŒ‰<strong class="je hj"> <em class="ka">åç§°</em> </strong>æˆ–åŠ¨ç‰©æ‹¥æœ‰çš„ä»»ä½•å…¶ä»–å±æ€§è¿›è¡Œæ’åºå‘¢ï¼Ÿå¥½å§ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šé‡å¤ç›¸åŒçš„ä»£ç ï¼Œä½†æ˜¯é€šè¿‡æ‰€éœ€çš„å±æ€§æ¥æ”¹å˜idã€‚</p><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="16c8" class="kk kl hi kg b fi km kn l ko kp">animals.sorted { (left, right) -&gt; Bool in {<br/>    return left.name &gt; right.name<br/>}</span><span id="aa74" class="kk kl hi kg b fi lo kn l ko kp">animals.sorted { (left, right) -&gt; Bool in {<br/>    return left.age &gt; right.age<br/>}</span></pre><p id="6a36" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">éšç€æˆ‘ä»¬å‘é¡¹ç›®ä¸­æ·»åŠ æ›´å¤šå…·æœ‰å¤šä¸ªå±æ€§çš„ç»“æ„ï¼Œè¿™ä¸ªç®€å•çš„ä»»åŠ¡å¼€å§‹å˜å¾—ä¹å‘³ï¼Œå¹¶ä¸”åœ¨å‡ºç°é”™è¯¯çš„æƒ…å†µä¸‹æ›´éš¾è°ƒè¯•ã€‚ä¸€ä¸ªæ›´å¹²å‡€çš„æ–¹æ³•æ˜¯ï¼Œåˆ›å»ºä¸€ä¸ªæ•°ç»„çš„æ‰©å±•ï¼Œå…è®¸æˆ‘ä»¬æ ¹æ®ä»»ä½•å±æ€§å¯¹ä»»ä½•æ•°ç»„è¿›è¡Œæ’åºã€‚</p></div><div class="ab cl iv iw gp ix" role="separator"><span class="iy bw bk iz ja jb"/><span class="iy bw bk iz ja jb"/><span class="iy bw bk iz ja"/></div><div class="hb hc hd he hf"><h2 id="9cd3" class="kk kl hi bd kq kr ks kt ku kv kw kx ky jn kz la lb jr lc ld le jv lf lg lh li bi translated">2.æˆ‘ä»¬æƒ³è¦è¾¾åˆ°çš„ç›®æ ‡</h2><p id="797a" class="pw-post-body-paragraph jc jd hi je b jf lj jh ji jj lk jl jm jn ll jp jq jr lm jt ju jv ln jx jy jz hb bi translated">é‚£ä¹ˆï¼Œæˆ‘ä»¬å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹å‘¢ï¼Ÿè®©æˆ‘ä»¬é¦–å…ˆå®šä¹‰æˆ‘ä»¬å°†åœ¨æœ¬æ–‡ä¸­ä½¿ç”¨çš„ç»“æ„åŠ¨ç‰©ï¼Œå®ƒçš„å±æ€§<em class="ka"> id </em>ä¸ºæ•´æ•°ï¼Œå±æ€§<em class="ka"> name </em>ä¸ºå­—ç¬¦ä¸²ã€‚</p><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="89e8" class="kk kl hi kg b fi km kn l ko kp">struct Animal: CustomStringConvertible {<br/>    let id: Int<br/>    let name: String<br/>    <br/>    var description: String {<br/>        return "Animal(id: \(id), name: \(name))"<br/>    }<br/>}</span></pre><p id="0cae" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ‰¾åˆ°ä¸€ç§æ›´å¥½çš„æ–¹æ³•æ¥ç¼–å†™æˆ‘ä»¬çœ‹åˆ°çš„ç¬¬ä¸€æ®µä»£ç ï¼Œä¸æ˜¯å®ç°ï¼Œè€Œæ˜¯å½“æˆ‘ä»¬éœ€è¦å¯¹ä»»ä½•ç±»å‹çš„æ•°ç»„è¿›è¡Œæ’åºæ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›ä»£ç çœ‹èµ·æ¥æ˜¯ä»€ä¹ˆæ ·å­ã€‚</p><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="9f47" class="kk kl hi kg b fi km kn l ko kp">// 1. Define the array of animals<br/>let animals = [<br/>    Animal(id: 1, name: "platypus"),<br/>    Animal(id: 2, name: "chicken"),<br/>    Animal(id: 3, name: "dog")<br/>]</span><span id="f5d9" class="kk kl hi kg b fi lo kn l ko kp">// 2. This is the way we's like to sort them, by id<br/>animals.sorted(by: { $0.id })</span><span id="7832" class="kk kl hi kg b fi lo kn l ko kp">// 3. or rather by name<br/>animals.sorted(by: { $0.name })</span></pre><p id="4768" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">è¯·è®°ä½ï¼Œæˆ‘ä»¬ä¸æƒ³å°†è¿™ç§è¡Œä¸ºç‰¹åˆ«é™„åŠ åˆ°åŠ¨ç‰©æˆ–ä»»ä½•å…¶ä»–å·²å®šä¹‰çš„ç»“æ„/ç±»ï¼Œç›¸åï¼Œè¿™ç§è§£å†³æ–¹æ¡ˆåº”è¯¥æ˜¯é€šç”¨çš„ï¼Œå¹¶ä¸”åœ¨æœ¬ç¤ºä¾‹ä¹‹å¤–çš„ä»»ä½•å…¶ä»–ä¸Šä¸‹æ–‡ä¸­ä¹Ÿå¯ä»¥é‡ç”¨ã€‚</p></div><div class="ab cl iv iw gp ix" role="separator"><span class="iy bw bk iz ja jb"/><span class="iy bw bk iz ja jb"/><span class="iy bw bk iz ja"/></div><div class="hb hc hd he hf"><h2 id="0d5b" class="kk kl hi bd kq kr ks kt ku kv kw kx ky jn kz la lb jr lc ld le jv lf lg lh li bi translated">3.è§£å†³æ–¹æ¡ˆ</h2><p id="2810" class="pw-post-body-paragraph jc jd hi je b jf lj jh ji jj lk jl jm jn ll jp jq jr lm jt ju jv ln jx jy jz hb bi translated">å› ä¸ºè¯¥æ–¹æ³•æ˜¯ä»»ä½•ç±»å‹çš„æ•°ç»„æ‰©å±•ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªé€šç”¨å‡½æ•°ï¼Œå®ƒå¯ä»¥å¤„ç†ä»»ä½•"<em class="ka"> sortable </em>"å¯¹è±¡ï¼Œæˆ‘æ‰€è¯´çš„sortableæ˜¯æŒ‡ä»»ä½•ç¬¦åˆåè®®<em class="ka"> Comparableã€</em>çš„ä¸œè¥¿ï¼Œè¿™æ ·æˆ‘ä»¬å°±çŸ¥é“å“ªäº›å…ƒç´ æ¯”å…¶ä»–å…ƒç´ å¤§ï¼Œå³ä½¿å®ƒä»¬ä¸æ˜¯å…·ä½“çš„ç±»å‹(T)ã€‚æ­¤å¤–ï¼Œè¿™ä¸ªå‡½æ•°åº”è¯¥è¿”å›ä¸€ä¸ªæ–°çš„æ’åºæ•°ç»„ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é‡ç”¨Swiftçš„â€œsorted()â€å†…ç½®å‡½æ•°ã€‚</p><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="7cb4" class="kk kl hi kg b fi km kn l ko kp">extension Array {<br/>    func sorted&lt;T: Comparable&gt;() -&gt; Array {<br/>        // Here, our nice code<br/>    }<br/>}</span></pre><p id="2ea6" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">è¿™ä¸ªå‡½æ•°éœ€è¦æ¥æ”¶ä»€ä¹ˆå‚æ•°ï¼Ÿè¿™å½“ç„¶æ˜¯ä¸€ä¸ªé—­åŒ…ï¼Œä½†æ˜¯è¿™ä¸ªé—­åŒ…éœ€è¦æ¥å—ä¸€ä¸ªç±»å‹ä¸º<em class="ka">å…ƒç´ </em>çš„å¯¹è±¡ï¼Œå¹¶è¿”å›å¦ä¸€ä¸ªç±»å‹ä¸º<em class="ka"> T </em>çš„å¯¹è±¡ã€‚è¯·æ³¨æ„ï¼Œæˆ‘å°†é—­åŒ…å‘½åä¸º<strong class="je hj"> <em class="ka"> compare </em> </strong>ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªåœ¨æ¯”è¾ƒæ¯ä¸€å¯¹å€¼æ—¶å°†å¯¹æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œçš„å—ã€‚</p><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="7e54" class="kk kl hi kg b fi km kn l ko kp">func sorted&lt;T: Comparable&gt;(by compare: (Element) -&gt; T) -&gt; Array {<br/>    // Here, our nice code<br/>}</span></pre><p id="7425" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¸¦æœ‰ä¸€å¯¹å…ƒç´ çš„<em class="ka">æ¯”è¾ƒ</em>å—ï¼Œæ ¹æ®åŒä¸€ä¸ªå—<em class="ka">æ¯”è¾ƒçš„ç»“æœæ¥æ£€æŸ¥å“ªä¸€ä¸ªå¤§äºå¦ä¸€ä¸ªã€‚</em>ä¾‹å¦‚:</p><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="0710" class="kk kl hi kg b fi km kn l ko kp">// We can now compare using &gt; or &lt; on the results of compare()</span><span id="0d58" class="kk kl hi kg b fi lo kn l ko kp">compare(array.first!) &gt; compare(array.last)</span><span id="9035" class="kk kl hi kg b fi lo kn l ko kp">// NOTE: We don't really know what the result of this operation is, because it's a generic array of T, but what we do know, is that <em class="ka">first</em> and <em class="ka">last</em> elements can be compared, because T is a comformance of the <em class="ka">Comparable </em>protocol</span><span id="5de2" class="kk kl hi kg b fi lo kn l ko kp">compare(array[0]) will give &lt;T: Comparable&gt; value in return<br/>compare(array[1]) will give another &lt;T: Comparable&gt; value in return</span></pre><p id="c9a6" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">å¡«å……å‡½æ•°åï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»æœ‰äº†è¿™æ®µä»£ç ï¼Œçœ‹èµ·æ¥å¾ˆæ•´æ´ï¼Œå¹¶ä¸”(ä¸å®Œå…¨)æŒ‰ç…§æˆ‘ä»¬çš„æœŸæœ›â€¦æŒ‰ç…§ä»»ä½•ç»™å®šçš„å±æ€§å¯¹ä»»ä½•ç±»å‹çš„å…ƒç´ æ•°ç»„è¿›è¡Œæ’åºã€‚</p><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="b65b" class="kk kl hi kg b fi km kn l ko kp">func sorted&lt;T: Comparable&gt;(by compare: (Element) -&gt; T) -&gt; Array {<br/>   return self.sorted {<br/>        // BUG 1. We are forcing the comparison to be &gt;<br/>        compare($0) &gt; compare($1)<br/>    }<br/>}</span></pre><p id="ceee" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">ç„¶è€Œï¼Œæ­£å¦‚è¯„è®º<em class="ka"> BUG 1 </em>ã€‚è¯´ï¼Œæˆ‘ä»¬å¯¹æ‰€æœ‰çš„æ’åºè°ƒç”¨å¼ºåˆ¶è¿›è¡Œå¤§äºæˆ–å°äºçš„æ¯”è¾ƒï¼Œä½†è¿™ä¸æ˜¯åº”è¯¥çš„å·¥ä½œæ–¹å¼ï¼Œæœ‰æ—¶æˆ‘ä»¬éœ€è¦ä¸€ä¸ªåŠ¨ç‰©æ•°ç»„å‡åºæ’åºï¼Œä½†ä¹Ÿéœ€è¦ä¸€ä¸ªç”¨æˆ·æ•°ç»„é™åºæ’åºã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦æ·»åŠ ä¸€ä¸ªæ–°çš„å¸ƒå°”å‚æ•°å«åš<em class="ka"> ascendant(ä¾‹å­ä¸­æ ‡æ³¨ä¸º</em><strong class="je hj"><em class="ka">ASC</em></strong><em class="ka">)</em>å…¶<em class="ka"> </em>é»˜è®¤å€¼ä¸ºtrue <em class="ka">ã€‚</em></p><p id="7d2a" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">è¿™æ˜¯æ•´ä¸ªæ‰©å±•æœ€ç»ˆçš„æ ·å­:</p><figure class="kb kc kd ke fd ij"><div class="bz dy l di"><div class="lp lq l"/></div></figure><h2 id="1791" class="kk kl hi bd kq kr ks kt ku kv kw kx ky jn kz la lb jr lc ld le jv lf lg lh li bi translated">å¥–é‡‘</h2><p id="0b3c" class="pw-post-body-paragraph jc jd hi je b jf lj jh ji jj lk jl jm jn ll jp jq jr lm jt ju jv ln jx jy jz hb bi translated">åœ¨Swiftçš„æ–°ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ä¸ªå®Œå…¨ç›¸åŒçš„æ‰©å±•ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥å‘é€ä¸€ä¸ªå±æ€§KeyPathï¼Œè€Œä¸æ˜¯å‘é€ä¸€ä¸ªé—­åŒ…ï¼Œå¥½çš„ä¸€ç‚¹æ˜¯ï¼Œä»·æ ¼ç›¸åŒï¼Œæˆ‘ä»¬ä¸éœ€è¦é¢å¤–çš„ä»£ç ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·æ’åºæ•°ç»„:</p><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="b491" class="kk kl hi kg b fi km kn l ko kp">// KeyPath for Animal.name<br/>animals.sorted(by: \.name)</span><span id="1cd1" class="kk kl hi kg b fi lo kn l ko kp">// KeyPath for Animal.id<br/>animals.sorted(by: \.id, asc = false)</span></pre><p id="ae9b" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated">è¿™ä¸ªæ’åºåŒ…è£…å™¨æ‰©å±•çš„å¦ä¸€ä¸ªå¾ˆæ£’çš„ç”¨ä¾‹æ˜¯å½“ç»“æ„æœ‰åµŒå¥—å¯¹è±¡æ—¶ã€‚å‡è®¾æ‚¨æœ‰åŠ¨ç‰©å’Œäººï¼Œå…¶ä¸­åŠ¨ç‰©å±äºä¸€ä¸ªäººï¼Œå¹¶ä¸”æ‚¨å¸Œæœ›æŒ‰ç…§åŠ¨ç‰©æ‰€å±çš„äººçš„å±æ€§å¯¹åŠ¨ç‰©è¿›è¡Œæ’åºã€‚ä¾‹å¦‚:</p><pre class="kb kc kd ke fd kf kg kh ki aw kj bi"><span id="f35b" class="kk kl hi kg b fi km kn l ko kp">// CREATE THE STRUCTURES</span><span id="41dc" class="kk kl hi kg b fi lo kn l ko kp">struct Person {<br/>    let id: Int<br/>    let name: String<br/>}</span><span id="77eb" class="kk kl hi kg b fi lo kn l ko kp">struct Animal {<br/>    let id: Int<br/>    let name: String<br/>    let owner: Person<br/>}</span><span id="c401" class="kk kl hi kg b fi lo kn l ko kp">let person1 = Person(id: 3, name: "bob")<br/>let person2 = Person(id: 2, name: "alice")<br/>let person3 = Person(id: 1, name: "charlie")</span><span id="d0c1" class="kk kl hi kg b fi lo kn l ko kp">let animals = [<br/>    Animal(id: 1, name: "dog", owner: person1),<br/>    Animal(id: 2, name: "cat", owner: person2),<br/>    Animal(id: 3, name: "turtle", owner: person3)<br/>]</span><span id="0895" class="kk kl hi kg b fi lo kn l ko kp">// SORT THE ARRAYS</span><span id="54a0" class="kk kl hi kg b fi lo kn l ko kp">// sort animals by the owner's id<br/>animals.sorted(by: { $0.owner.id })</span><span id="5336" class="kk kl hi kg b fi lo kn l ko kp">// =&gt; animal: 3-turtle, person: 1-charlie<br/>// =&gt; animal: 2-cat, person: 2-alice<br/>// =&gt; animal: 1-dog, person: 3-bob</span><span id="895b" class="kk kl hi kg b fi lo kn l ko kp">// sort animals by the owner's name<br/>animals.sorted(by: { $0.owner.name })</span><span id="4993" class="kk kl hi kg b fi lo kn l ko kp">// =&gt; animal: 2-cat, person: 2-alice<br/>// =&gt; animal: 1-dog, person: 3-bob<br/>// =&gt; animal: 3-turtle, person: 1-charlie</span></pre></div><div class="ab cl iv iw gp ix" role="separator"><span class="iy bw bk iz ja jb"/><span class="iy bw bk iz ja jb"/><span class="iy bw bk iz ja"/></div><div class="hb hc hd he hf"><p id="d956" class="pw-post-body-paragraph jc jd hi je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hb bi translated"><em class="ka">æ„Ÿè°¢é˜…è¯»ã€‚æˆ‘å¸Œæœ›ä½ å–œæ¬¢è¿™ä¸ªå°æ•™ç¨‹ï¼Œå¦‚æœå®ƒå¯¹ä½ æœ‰ç”¨ï¼Œä¸è¦å®³ç¾ğŸ‘å…³äºè¿™ç¯‡æ–‡ç« ã€‚ä¸‹æ¬¡è§ã€‚</em></p></div></div>    
</body>
</html>