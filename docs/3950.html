<html>
<head>
<title>Dynamic page generation in GatsbyJS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">GatsbyJS ä¸­çš„åŠ¨æ€é¡µé¢ç”Ÿæˆ</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/nerd-for-tech/dynamic-page-generation-in-gatsbyjs-60c8a4609036?source=collection_archive---------12-----------------------#2021-06-30">https://medium.com/nerd-for-tech/dynamic-page-generation-in-gatsbyjs-60c8a4609036?source=collection_archive---------12-----------------------#2021-06-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="749f" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">é¿å…å¤åˆ¶ç²˜è´´ HTMLï¼Œæ”¯æŒä½¿ç”¨å¸ƒå±€ã€ç»„ä»¶å’Œ GraphQL å˜é‡ï¼</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/8b2a087ae91a4cd8e8384a21c72b38c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*cr9-kjp-jyrQBBpC.jpg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">"ç…§ç‰‡ç”±<a class="ae jn" href="https://unsplash.com/@isaac_slo?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">è‰¾è¨å…‹Â·æ–¯æ´›æ›¼</a>åœ¨<a class="ae jn" href="https://unsplash.com/s/photos/dynamic?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>ä¸Šæ‹æ‘„"</figcaption></figure><p id="91a6" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">ğŸ””è¿™ç¯‡æ–‡ç« æœ€åˆå‘å¸ƒåœ¨æˆ‘çš„ç½‘ç«™ä¸Šï¼Œ<a class="ae jn" href="https://mihaibojin.com/personal-site/dynamic-page-generation-gatsbyjs?utm_source=Medium&amp;utm_medium=organic&amp;utm_campaign=rss" rel="noopener ugc nofollow" target="_blank">MihaiBojin.com</a>ã€‚ğŸ””</p></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="9571" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">æœ€è¿‘ï¼Œæˆ‘ä¸€ç›´åœ¨åŠªåŠ›ä¸ºæˆ‘çš„ç½‘ç«™ç”Ÿæˆå†…å®¹ã€‚å› æ­¤ï¼Œå¾ˆè‡ªç„¶åœ°ï¼Œå®ƒåˆ†ä¸ºå¤šä¸ªç±»åˆ«ã€‚</p><p id="bd37" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">æˆ‘å‘ç°è‡ªå·±åœ¨å¤åˆ¶ç²˜è´´é¡µé¢ï¼Œæ›´æ”¹æ ‡é¢˜ã€æè¿°å’Œ GraphQL æŸ¥è¯¢ï¼Œè¿™å¯¹äºæˆ‘çš„å–œå¥½æ¥è¯´æœ‰ç‚¹å¤ªå¤šäº†ã€‚</p><p id="e0a6" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">æˆ‘æ²¡æœ‰å—åˆ°å¯å‘ï¼</p><p id="e4d2" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">å¹¶å†³å®šåšä¸€äº›æ›´å¥½çš„äº‹æƒ…â€¦</p><p id="0935" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">ä¸‹é¢æ˜¯æˆ‘ä½¿ç”¨ä¸€ä¸ªé€šç”¨æ¨¡æ¿åŠ¨æ€ç”Ÿæˆåˆ†ç±»é¡µé¢çš„æ–¹æ³•ã€‚</p><h2 id="732b" class="kr ks hi bd kt ku kv kw kx ky kz la lb jx lc ld le kb lf lg lh kf li lj lk ll bi translated">åœ¨ gatsby-config.js ä¸­åˆ›å»ºç±»åˆ«å…ƒæ•°æ®</h2><p id="6224" class="pw-post-body-paragraph jo jp hi jq b jr lm ij jt ju ln im jw jx lo jz ka kb lp kd ke kf lq kh ki kj hb bi translated">é¦–å…ˆï¼Œæˆ‘åœ¨<code class="du lr ls lt lu b">gatsby-config.js</code>çš„<code class="du lr ls lt lu b">siteMetadata</code>æ•°ç»„ä¸­å®šä¹‰äº†æˆ‘çš„ç±»åˆ«ã€‚</p><pre class="iy iz ja jb fd lv lu lw lx aw ly bi"><span id="92d6" class="kr ks hi lu b fi lz ma l mb mc">"categories": [<br/>    {<br/>      "title": "Blog",<br/>      "href": "/blog",<br/>      "description": "My blog. I write about my journey as a software engineering lead and content creator.",<br/>      "pageHeading": "From the blog",<br/>      "pageSubtitle": "Explore some of my blog posts as I embark on a journey to build my site from scratch using GatsbyJS and TailwindUI."<br/>    },<br/>    ...<br/>  ]</span></pre><h2 id="3494" class="kr ks hi bd kt ku kv kw kx ky kz la lb jx lc ld le kb lf lg lh kf li lj lk ll bi translated">åœ¨ gatsby-node.js ä¸­åŠ¨æ€åˆ›å»ºé¡µé¢</h2><p id="60a2" class="pw-post-body-paragraph jo jp hi jq b jr lm ij jt ju ln im jw jx lo jz ka kb lp kd ke kf lq kh ki kj hb bi translated">ç„¶åï¼Œæˆ‘æ‰©å±•äº† Gatsby çš„é¡µé¢åˆ›å»º API:</p><pre class="iy iz ja jb fd lv lu lw lx aw ly bi"><span id="2e6c" class="kr ks hi lu b fi lz ma l mb mc">exports.createPages = async ({ graphql, actions, reporter }) =&gt; {<br/>  await createCategoryPages({ graphql, actions, reporter }); // a new async function I created<br/>};</span></pre><p id="05d9" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">æˆ‘æ ¹æ®ä¸Šä¸‹æ–‡æ¥åˆ’åˆ†ä¸åŒçš„åŠŸèƒ½ã€‚æˆ‘å®šä¹‰äº†ä¸€ä¸ªè´Ÿè´£åˆ›å»ºç±»åˆ«çš„å‡½æ•°ã€‚</p><pre class="iy iz ja jb fd lv lu lw lx aw ly bi"><span id="91d0" class="kr ks hi lu b fi lz ma l mb mc">async function createCategoryPages({ graphql, actions, reporter }) {<br/>  const { createPage } = actions;<br/><br/>  // logic here, see below<br/>}</span></pre><p id="b511" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">æˆ‘åœ¨å‡½æ•°ä½“ä¸­åŠ è½½äº†ç«™ç‚¹çš„å…ƒæ•°æ®ï¼›æˆ‘éœ€è¦å…³äºæˆ‘çš„ç±»åˆ«å’Œä½œè€…çš„ä¿¡æ¯ã€‚</p><pre class="iy iz ja jb fd lv lu lw lx aw ly bi"><span id="b804" class="kr ks hi lu b fi lz ma l mb mc">const result = await graphql(<br/>    `<br/>      {<br/>        site {<br/>          siteMetadata {<br/>            categories {<br/>              title<br/>              href<br/>              description<br/>              pageHeading<br/>              pageSubtitle<br/>            }<br/>            author {<br/>              name<br/>              href<br/>            }<br/>          }<br/>        }<br/>      }<br/>    `,<br/>  );</span></pre><p id="f1a1" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">æ¥ä¸‹æ¥æ˜¯éªŒè¯æ­¥éª¤ã€‚æˆ‘è·³è¿‡äº†éªŒè¯ä»£ç ï¼Œä½†åŸºæœ¬ä¸Šï¼Œè¿™æ˜¯å¯¹è¿™äº›å¯¹è±¡çš„ç©ºæ£€æŸ¥ï¼Œç„¶åè°ƒç”¨<code class="du lr ls lt lu b">reporter.warn</code>æˆ–<code class="du lr ls lt lu b">reporter.panicOnBuild</code>ã€‚</p><pre class="iy iz ja jb fd lv lu lw lx aw ly bi"><span id="6bbe" class="kr ks hi lu b fi lz ma l mb mc">const siteMetadata = result.data.site?.siteMetadata;<br/>  const categories = siteMetadata?.categories;<br/>  const author = siteMetadata?.author;</span></pre><p id="56fd" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">å› ä¸ºç»„ä»¶ä¸ä¼šæ”¹å˜ï¼Œæ‰€ä»¥æˆ‘åœ¨è¿­ä»£ä¹‹å‰ç¼“å­˜äº†å®ƒã€‚</p><pre class="iy iz ja jb fd lv lu lw lx aw ly bi"><span id="c5c1" class="kr ks hi lu b fi lz ma l mb mc">const component = path.resolve(`./src/components/category.js`);</span></pre><p id="8fe9" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">æœ€åï¼Œæˆ‘éå†äº†æ‰€æœ‰ç±»åˆ«æ¥åˆ›å»ºæ¯ä¸ªé¡µé¢ã€‚</p><pre class="iy iz ja jb fd lv lu lw lx aw ly bi"><span id="a2be" class="kr ks hi lu b fi lz ma l mb mc">categories.forEach((page) =&gt; {<br/>    createPage({<br/>      path: page.href,<br/>      component,<br/>      context: {<br/>        ...page,<br/>        author,<br/>      },<br/>    });<br/>  });</span></pre><p id="b802" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">æ³¨æ„:<code class="du lr ls lt lu b">component</code>å°†éœ€è¦åŠ è½½æ¯ä¸ªç±»åˆ«çš„æ–‡ç« åˆ—è¡¨ã€‚ç”±äºç«™ç‚¹æœ‰å¤šä¸ªç±»åˆ«çš„æ–‡ç« ï¼Œæˆ‘ä»¬éœ€è¦ä¼ é€’ä¸€äº›ä¸œè¥¿æ¥æ„é€ æ­£ç¡®çš„æŸ¥è¯¢ã€‚åœ¨ Gatsby ä¸­ï¼Œè¿™æ˜¯é€šè¿‡é¡µé¢ä¸Šä¸‹æ–‡ä¼ é€’æ•°æ®æ¥å®ç°çš„ã€‚GraphQL é¡µé¢æŸ¥è¯¢å¯ä»¥åˆ©ç”¨ç”±ä¸Šä¸‹æ–‡ä¼ é€’çš„ä»»ä½•<a class="ae jn" href="https://www.gatsbyjs.com/docs/how-to/querying-data/page-query/#how-to-add-query-variables-to-a-page-query" rel="noopener ugc nofollow" target="_blank">å˜é‡ã€‚</a></p><h2 id="89c0" class="kr ks hi bd kt ku kv kw kx ky kz la lb jx lc ld le kb lf lg lh kf li lj lk ll bi translated">ä½¿ç”¨å˜é‡æŒ‰ç±»åˆ«è¿‡æ»¤æ–‡ç« </h2><p id="1389" class="pw-post-body-paragraph jo jp hi jq b jr lm ij jt ju ln im jw jx lo jz ka kb lp kd ke kf lq kh ki kj hb bi translated">å¯¹äºæˆ‘çš„ç½‘ç«™ï¼Œæˆ‘é€‰æ‹©æŒ‰æ¯ä¸ªç±»åˆ«çš„æ ‡é¢˜è¿›è¡Œè¿‡æ»¤ã€‚æˆ‘å¯ä»¥å¾ˆå®¹æ˜“åœ°é€šè¿‡ç±»åˆ«çš„ href è¿›è¡Œè¿‡æ»¤ï¼Œä½†æˆ‘ä¹Ÿä¸æ‰“ç®—åšå¤ªå¤šæ”¹å˜ã€‚æ—¶é—´ä¼šè¯æ˜è¿™æ˜¯å¦æ˜¯æ­£ç¡®çš„é€‰æ‹©â€¦</p><p id="cfde" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">æˆ‘æ›´æ–°äº†æ—§çš„æŸ¥è¯¢:</p><pre class="iy iz ja jb fd lv lu lw lx aw ly bi"><span id="a3af" class="kr ks hi lu b fi lz ma l mb mc">query {<br/>    allMarkdownRemark(<br/>        sort: { fields: [frontmatter___date], order: DESC }<br/>        filter: {<br/>          frontmatter: {<br/>            category: {<br/>              title: { eq: "A category title" }<br/>            }<br/>          }<br/>        }<br/>    ) {<br/>        nodes {<br/>        ...<br/>        }<br/>    }<br/>}</span></pre><p id="c32a" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">é€šè¿‡ç»™å®ƒä¸€ä¸ªåå­—å¹¶ä¼ é€’<code class="du lr ls lt lu b">$title</code>å˜é‡ã€‚</p><p id="7911" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">è¿™ä¸ªå˜é‡ä»é¡µé¢çš„ä¸Šä¸‹æ–‡ä¸­è‡ªåŠ¨å¡«å……â€”â€”ğŸª„<strong class="jq hj">é­”æ³•</strong> ğŸª„ï¼</p><pre class="iy iz ja jb fd lv lu lw lx aw ly bi"><span id="3aac" class="kr ks hi lu b fi lz ma l mb mc">query CategoryQuery($title: String!) {<br/>    allMarkdownRemark(<br/>        sort: { fields: [frontmatter___date], order: DESC }<br/>        filter: {<br/>          frontmatter: {<br/>            category: {<br/>              title: { eq: $title }<br/>            }<br/>          }<br/>        }<br/>    ) {<br/>        nodes {<br/>        ...<br/>        }<br/>    }<br/>}</span></pre><p id="f72e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">æˆ‘å‰©ä¸‹è¦åšçš„å°±æ˜¯åŠ è½½é¡µé¢æ•°æ®å¹¶å¡«å……æˆ‘çš„æ¨¡æ¿:</p><pre class="iy iz ja jb fd lv lu lw lx aw ly bi"><span id="f605" class="kr ks hi lu b fi lz ma l mb mc">export default function Page({ data, pageContext }) {<br/>  const {<br/>    title,<br/>    description,<br/>    pageHeading,<br/>    pageSubtitle,<br/>    author,<br/>  } = pageContext;<br/>  const posts = data.allMarkdownRemark.nodes;<br/>  return (<br/>    &lt;&gt;<br/>        ...<br/>    &lt;/&gt;<br/>  );<br/>}</span></pre><p id="521d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">ç§å•Šã€‚åŠ¨æ€ç”Ÿæˆçš„é¡µé¢:</p><ul class=""><li id="2219" class="md me hi jq b jr js ju jv jx mf kb mg kf mh kj mi mj mk ml bi translated"><a class="ae jn" href="https://mihaibojin.com/blog?utm_source=Medium&amp;utm_medium=organic&amp;utm_campaign=rss" rel="noopener ugc nofollow" target="_blank">åšå®¢</a></li><li id="9894" class="md me hi jq b jr mm ju mn jx mo kb mp kf mq kj mi mj mk ml bi translated"><a class="ae jn" href="https://mihaibojin.com/coding-puzzles?utm_source=Medium&amp;utm_medium=organic&amp;utm_campaign=rss" rel="noopener ugc nofollow" target="_blank">ç¼–ç æ‹¼å›¾</a></li><li id="0224" class="md me hi jq b jr mm ju mn jx mo kb mp kf mq kj mi mj mk ml bi translated"><a class="ae jn" href="https://mihaibojin.com/ic?utm_source=Medium&amp;utm_medium=organic&amp;utm_campaign=rss" rel="noopener ugc nofollow" target="_blank">ä¸ªäººè´¡çŒ®è€…</a></li></ul></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="7bb8" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œå¹¶æƒ³é˜…è¯»æ›´å¤šç±»ä¼¼çš„æ–‡ç« ï¼Œè¯·è®¢é˜…æˆ‘çš„ç®€è®¯ã€‚æˆ‘æ¯éš”å‡ å‘¨å°±å‘ä¸€å°ï¼</p></div></div>    
</body>
</html>