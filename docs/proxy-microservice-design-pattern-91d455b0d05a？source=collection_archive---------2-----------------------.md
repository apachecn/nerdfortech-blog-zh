# ä»£ç†å¾®æœåŠ¡è®¾è®¡æ¨¡å¼

> åŸæ–‡ï¼š<https://medium.com/nerd-for-tech/proxy-microservice-design-pattern-91d455b0d05a?source=collection_archive---------2----------------------->

å¾®æœåŠ¡è®¾è®¡æ¨¡å¼(**ç¬¬ 3 éƒ¨åˆ†**)

![](img/48ace29abd73cd92f70afef803d6afb8.png)

ä»£ç†å¾®æœåŠ¡è®¾è®¡æ¨¡å¼ä¸èšåˆå™¨ç•¥æœ‰ç›¸ä¼¼ã€‚ä½†æ˜¯æ ¹æ®ä»£ç†è®¾è®¡æ¨¡å¼ï¼Œæˆ‘ä»¬ä¸éœ€è¦æ¶ˆè´¹è€…ä¸Šçš„èšåˆå™¨ï¼Œè€Œæ˜¯åˆ›å»ºä¸€ä¸ªå¾®æœåŠ¡æ¥åŸºäºä¸šåŠ¡éœ€æ±‚è°ƒç”¨å…¶ä»–æœåŠ¡ã€‚è®©æˆ‘ä»¬é€šè¿‡ä¸‹é¢çš„ä¾‹å­æ¥ç†è§£ä»£ç†æ¨¡å¼ã€‚

**ä¸¾ä¾‹:**

ï¸Assume æ‚¨çš„å…¬å¸ç›®å‰æœ‰ä¸€ä¸ªå•ä¸€çš„åº”ç”¨ç¨‹åºã€‚æ‰€ä»¥ç°åœ¨ä½ éœ€è¦è½¬å‘å¾®æœåŠ¡æ¶æ„ã€‚å› æ­¤ï¼Œå½“æ‚¨éƒ¨ç½²å¾®æœåŠ¡æ—¶ï¼Œå¯èƒ½éœ€è¦æ”¹å˜æœåŠ¡ã€‚

â–ªï¸è€ƒè™‘ä¸€ä¸‹ï¼Œä½ æœ‰ä¸€ä¸ªå¾®æœåŠ¡æ¥è·å–å‘˜å·¥çš„ä¼‘å‡ä¿¡æ¯ã€‚å› æ­¤ï¼Œæ¶ˆè´¹è€…éœ€è¦é€šè¿‡ empCode æ¥è·å–ä¼‘å‡ä¿¡æ¯ã€‚(å›¾ 1)

![](img/4f54658504da95b5d0691f651641788d.png)

å›¾ 1

â–ªï¸:ä½†æ˜¯åœ¨æ–°çš„é‡ç»„ä¸­ï¼Œä½ å†³å®šä¿ç•™ empID ä½œä¸ºæ‰€æœ‰è®°å½•çš„å…³ç³»é”®ã€‚

â–ªï¸:ç°åœ¨ä½ éƒ¨ç½²äº†æ–°çš„é‡ç»„å‘˜å·¥æœåŠ¡(æ–°ç‰ˆæœ¬)ã€‚ä½†ä¸å¹¸çš„æ˜¯ï¼Œå·²ç»åœ¨æ¶ˆè´¹ä½ ä¹‹å‰çš„å‘˜å·¥æœåŠ¡çš„æ¶ˆè´¹è€…å°†**æ‰“ç ´**ã€‚ğŸ˜­

## ä¸ºä»€ä¹ˆï¼ŸğŸ§

â–ªï¸ï¼Œå› ä¸ºé‚£äº›æ¶ˆè´¹è€…ä¼šé€šè¿‡â€œempCodeâ€ã€‚ä½†æ˜¯æ–°ç‰ˆæœ¬çš„æœåŠ¡éœ€è¦ empIDã€‚æ‰€ä»¥åœ¨é‚£ä¸ªæ—¶å€™ï¼Œä½ æŠŠå½“å‰çš„æœåŠ¡æ›´æ–°åˆ°æ–°çš„ç‰ˆæœ¬ï¼Œä½ çš„æ¶ˆè´¹è€…å°±ä¼šå´©æºƒã€‚

ğŸŸ¡ **ä½œä¸ºä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œä½¿ç”¨ä»£ç†è®¾è®¡æ¨¡å¼ã€‚**

â–ªï¸ä½ å¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„ä»£ç†æœåŠ¡æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚(å›¾ 2)

![](img/9fcd85abd7dad781c204f383cdda86b6.png)

å›¾ 2

â–ªï¸ç›¸åº”åœ°ï¼Œæ¶ˆè´¹è€…å°†è°ƒç”¨ä»£ç†æœåŠ¡ã€‚æ‚¨å¯ä»¥å°†å…¶ä¿®æ”¹ä¸º(å›¾ 3):

> *å¦‚æœæ¶ˆè´¹è€…é€šè¿‡ empID* ***è°ƒç”¨ç‰ˆæœ¬ 2(æ–°ç‰ˆæœ¬)***
> 
> *å¦‚æœæ¶ˆè´¹è€…é€šè¿‡ empCode* ***è°ƒç”¨ç‰ˆæœ¬ 1(æ—§ç‰ˆæœ¬)***

![](img/f5a64963dee03814cd54589ace1c053f.png)

å›¾ 3

âœ¹:è¿™æ ·ï¼Œä½ å°±å¯ä»¥ç‹¬ç«‹åœ°éƒ¨ç½²æœåŠ¡ï¼Œè€Œä¸ä¼šå½±å“æ¶ˆè´¹è€…ã€‚å½“æ²¡æœ‰æµé‡ï¼Œschema 1 æ²¡æœ‰æ”¶åˆ°æ¥è‡ªæ¶ˆè´¹è€…çš„è¯·æ±‚æ—¶ï¼Œæ‚¨å¯ä»¥åœæ­¢æœåŠ¡ 1ï¼Œä¿ç•™æœåŠ¡ 2(æ–°ç‰ˆæœ¬)ã€‚åœ¨è¿™é‡Œï¼Œè¯­ä¹‰ç‰ˆæœ¬æ§åˆ¶éå¸¸é‡è¦ã€‚

âœ¹ç„¶è€Œï¼Œå½“è°ˆåˆ°ä»£ç†è®¾è®¡æ¨¡å¼æ—¶ï¼Œæˆ‘ä»¬è¿˜å¿…é¡»è€ƒè™‘å…¶ä»–é‡è¦çš„äº‹æƒ…ã€‚ğŸ¡»

## âœ¨ç‰ˆæœ¬æ§åˆ¶

> ***è¯­ä¹‰ç‰ˆæœ¬åŒ–***

è¯­ä¹‰ç‰ˆæœ¬æ§åˆ¶é€šè¿‡ä¸‰ä¸ªéè´Ÿæ•´æ•°å°†æ¯ä¸ªç‰ˆæœ¬æ˜¾ç¤ºä¸ºâ€œ ***MAJORâ€ã€‚MINOR.PATCH*** â€(å¦‚å›¾ 4)è€Œè¿™äº›æ•´æ•°æ¯ä¸€ä¸ªéƒ½æœ‰è‡ªå·±çš„å«ä¹‰ã€‚

![](img/c0c2cda7f11c4a09e466a7200eddc932.png)

â–ªï¸æˆ‘åœ¨æˆ‘çš„â€œ [**å¾®æœåŠ¡æœ€ä½³å®è·µ**](/geekculture/best-practices-for-microservices-microservices-part-2-a8646f3e1753) â€åšå®¢ä¸­è®¨è®ºäº†ç‰ˆæœ¬æ§åˆ¶ã€‚æ›´å¤šè¯¦æƒ…è¯·å‚è€ƒã€‚(ç‚¹å‡»ä¸‹é¢çš„é“¾æ¥)

[](/geekculture/best-practices-for-microservices-microservices-part-2-a8646f3e1753) [## å¾®æœåŠ¡çš„æœ€ä½³å®è·µğŸ“³(å¾®æœåŠ¡â€”ç¬¬ 2 éƒ¨åˆ†)

### å¾®æœåŠ¡:âœ¨æœ€ä½³å®è·µ

medium.com](/geekculture/best-practices-for-microservices-microservices-part-2-a8646f3e1753) 

## âœ¨æœåŠ¡å‘ç°

âœ¹:å½“ä½ åˆ›å»ºä¸€ä¸ªæœåŠ¡æ—¶ï¼Œæœ€å¥½ä½¿ç”¨ä¸€ä¸ªå¤–éƒ¨å›¢ä½“æ¥å‘ç°ä½ çš„æœåŠ¡ã€‚

**ä¸ºä»€ä¹ˆï¼Ÿ** ğŸ§

å› ä¸ºï¼Œå¦‚æœåŸºäºå¾®æœåŠ¡çš„ç³»ç»Ÿä¸­çš„åŸºç¡€æ¶æ„å‘ç”Ÿå˜åŒ–ï¼Œä¸»æœºåã€IP åœ°å€ç­‰ã€‚ä¹Ÿå¯ä»¥æ”¹ã€‚ã€‚ä¸ºäº†ä¿æŒå®‰å…¨ï¼Œæ¶ˆè´¹è€…éœ€è¦ä¸€ç§æ–¹æ³•æ¥è¯†åˆ«å¯ç”¨æœåŠ¡çš„å®ä¾‹ã€‚å› æ­¤ï¼Œå¦‚æœæ‚¨æœ‰ä¸€ä¸ªæœåŠ¡å‘ç°å·¥å…·ï¼Œä»£ç†å¯ä»¥è°ƒç”¨æœåŠ¡å‘ç°å·¥å…·ï¼Œå¹¶å¯ä»¥è·å¾—æ›´æ–°çš„åœ°å€ã€‚è¿™å°±æ˜¯æœåŠ¡å‘ç°å‡ºç°çš„æ–¹å¼ã€‚

![](img/acb589fecdec1d3919839a998b2fa4a3.png)![](img/c8d22d85967aa6c453bdf12dae688389.png)

ä¸€äº›æœåŠ¡å‘ç°å·¥å…·çš„ä¾‹å­: **WSO2 æ²»ç†æ³¨å†Œä¸­å¿ƒï¼ŒHashicorp å’¨è¯¢ï¼ŒZookeeperï¼Œsmart stackâ€¦ç­‰ç­‰ã€‚**

**ç¬”è®°ğŸ“:**

âœ¤:å½“ä½ å®ç°ä»£ç†æ¨¡å¼æ—¶ï¼Œä½ éœ€è¦æ³¨æ„çº¿ç¨‹æ± ã€‚å› ä¸ºå¦‚æœæ²¡æœ‰å®ç°é€‚å½“çš„çº¿ç¨‹æ± åŠŸèƒ½ï¼Œçº¿ç¨‹å¯èƒ½ä¼šè¢«é˜»å¡ã€‚(æœ€å¥½ç›¸åº”åœ°ä½¿ç”¨å¤šçº¿ç¨‹æ± æˆ–çº¿ç¨‹ç§»äº¤æœºåˆ¶)

âœ¤ä»£ç†ä½äºæ¶ˆè´¹è€…å’Œæ–°çš„å¾®æœåŠ¡(æ–°åˆ›å»ºçš„å¾®æœåŠ¡ç‰ˆæœ¬)ä¹‹é—´ã€‚ä»£ç†ä¿ç•™äº†åŸå§‹çš„ APIï¼Œä»è€Œå…è®¸æ¶ˆè´¹è€…ä¸ä¹‹äº¤äº’ã€‚ä»£ç†æœåŠ¡å…·æœ‰æ‰€éœ€çš„é€»è¾‘æ¥ä¸æ–°çš„å¾®æœåŠ¡ç»“åˆï¼Œä»¥ä¾¿å‘æ¶ˆè´¹è€…æä¾›æ•°æ®å’ŒåŸå§‹é€»è¾‘ã€‚

## âœ¨æš‚åœ

![](img/b63475d2f904bfef2f3579c67065a4a8.png)

å½“ä½ æœ‰ä¸€ä¸ªä»£ç†æœåŠ¡ï¼Œå¹¶å‡è®¾æœåŠ¡ç‰ˆæœ¬ 1.0 è¢«å»¶è¿Ÿã€‚å› æ­¤ï¼Œå¦‚æœæ‚¨æ²¡æœ‰å®ç°â€œè¶…æ—¶â€ï¼Œå®ƒå¯èƒ½ä¼šé˜»å¡çº¿ç¨‹ï¼Œå¹¶å¯èƒ½ä¼šå½±å“æ–°çš„æœåŠ¡ç‰ˆæœ¬ 2.0ã€‚

![](img/016cbbe671b53cd11486619e48b8da91.png)

ref:[https://dzone . com/articles/the-hard-part-of-micro services-calling-your-ser](https://dzone.com/articles/the-hardest-part-of-microservices-calling-your-ser)

æˆ‘åœ¨åšå®¢â€œ [**æ–­è·¯å™¨æ¨¡å¼**](/nerd-for-tech/circuit-breaker-design-pattern-ce6378f5a929) â€ä¸­è®¨è®ºè¿‡è¶…æ—¶é—®é¢˜ã€‚æ›´å¤šè¯¦æƒ…è¯·å‚è€ƒã€‚(ç‚¹å‡»ä¸‹é¢çš„é“¾æ¥)

[](/nerd-for-tech/circuit-breaker-design-pattern-ce6378f5a929) [## æ–­è·¯å™¨è®¾è®¡æ¨¡å¼ğŸ”©

### å¾®æœåŠ¡è®¾è®¡æ¨¡å¼â€”ç¬¬ 2 éƒ¨åˆ†

medium.com](/nerd-for-tech/circuit-breaker-design-pattern-ce6378f5a929) 

# ä»£ç†è®¾è®¡æ¨¡å¼çš„ä¼˜ç¼ºç‚¹

## ä¼˜åŠ¿:

âœ¹è¿™å¾ˆå®¹æ˜“å®ç°ã€‚

âœ¹ç®€å•ã€‚

å¯ä»¥å®ç°ä¸å¤–éƒ¨æœåŠ¡ç›¸å…³çš„âœ¹éªŒè¯å’Œå®‰å…¨æ€§ï¼Œå¹¶ä¸”å¯ä»¥éå¸¸å®¹æ˜“åœ°å°è£…åœ¨ä»£ç†ä¸­ã€‚

## ç¼ºç‚¹:

âœ¹ç“¶é¢ˆ

âœ¹ä¸é€‚å®œæ”¹å˜ååº”

# å‚è€ƒ

[å¾®æœåŠ¡çš„è®¾è®¡æ¨¡å¼â€”ä»£ç†](https://www.youtube.com/watch?v=7mBvb7nKONg&list=PLD-mYtebG3X9HaZ1T39-aF4ghEtWy9-v3&index=7)

[https://www.geeksforgeeks.org/proxy-design-pattern](https://www.geeksforgeeks.org/proxy-design-pattern/)

[https://www . tutorialspoint . com/microservice _ architecture/microservice _ architecture _ composition _ patterns . ht](https://www.tutorialspoint.com/microservice_architecture/microservice_architecture_composition_patterns.htm)ml

[https://www . oreilly . com/library/view/microservice-patterns-and/9781788474030/5b 4d 76 ce-184 b-4480-a050-AEC 1582 c8 c 83 . html](https://www.oreilly.com/library/view/microservice-patterns-and/9781788474030/5b4d76ce-184b-4480-a050-aec1582c8c83.xhtml)

[https://8 thlight . com/blog/Colin-Jones/2018/09/18/microservice sarent-magic-handling-time outs . html](https://8thlight.com/blog/colin-jones/2018/09/18/microservices-arent-magic-handling-timeouts.html)

[https://www . nginx . com/blog/service-discovery-in-a-micro services-architecture](https://www.nginx.com/blog/service-discovery-in-a-microservices-architecture/)

[https://search apparchitecture . tech target . com/tip/Navigate-service-discovery-in-a-micro services-architecture](https://searchapparchitecture.techtarget.com/tip/Navigate-service-discovery-in-a-microservices-architecture)