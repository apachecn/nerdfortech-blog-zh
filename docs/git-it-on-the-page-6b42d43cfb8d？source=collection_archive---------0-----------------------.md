# æŠŠå®ƒæ”¾åˆ°é¡µé¢ä¸Šï¼

> åŸæ–‡ï¼š<https://medium.com/nerd-for-tech/git-it-on-the-page-6b42d43cfb8d?source=collection_archive---------0----------------------->

## è®¾ç½®ä¸ GitHub åŠ¨ä½œçš„æŒç»­é›†æˆ

![](img/797c5d263582bf87e07b268c93f7fe80.png)

ç…§ç‰‡ç”±[æ€æƒ³ç›®å½•](https://unsplash.com/@thoughtcatalog?utm_source=medium&utm_medium=referral)åœ¨ [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) ä¸Šæ‹æ‘„

## å‘å¸ƒåˆ° GitHub é¡µé¢

åœ¨æˆ‘çš„ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ç ”ç©¶äº†å¦‚ä½•ä½¿ç”¨ GitHub Actions è®¾ç½®ç®¡é“çš„è¿ç»­äº¤ä»˜éƒ¨åˆ†ï¼Œä»¥ä¾¿æˆ‘ä»¬æ¯æ¬¡åœ¨ GitHub å­˜å‚¨åº“ä¸­åˆ›å»ºä¸€ä¸ªæ–°ç‰ˆæœ¬æ—¶ï¼Œæˆ‘ä»¬çš„é¡¹ç›®éƒ½ä¼šå‘å¸ƒåˆ°æˆ‘ä»¬çš„ itch.io å¸æˆ·ã€‚itch.io å¹¶ä¸æ˜¯æˆ‘ä»¬å”¯ä¸€å¯ä»¥å‘å¸ƒçš„åœ°æ–¹ï¼äº‹å®ä¸Šï¼ŒGitHub æœ‰ä¸€ä¸ªæœåŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æˆ‘ä»¬çš„å­˜å‚¨åº“ä¸­æ‰“å¼€è¿™ä¸ªæœåŠ¡ï¼Œå«åš GitHub Pagesï¼Œå®ƒå…è®¸æˆ‘ä»¬å°†æˆ‘ä»¬çš„å­˜å‚¨åº“(æˆ–å­˜å‚¨åº“çš„ä¸€ä¸ªåˆ†æ”¯)ä½œä¸ºä¸€ä¸ªç½‘ç«™æ¥æ‰˜ç®¡ã€‚æ­¤åŠŸèƒ½æ›´å¸¸ç”¨äºå°†åŸºäºç½‘ç«™çš„é¡¹ç›®å­˜å‚¨åº“ç›´æ¥å‘å¸ƒåˆ°æ‰˜ç®¡çŠ¶æ€ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†åœ¨æˆ‘ä»¬çš„å­˜å‚¨åº“ä¸­è®¾ç½®ä¸€ä¸ªç‰¹æ®Šçš„åˆ†æ”¯ï¼Œä¿å­˜æˆ‘ä»¬æ¸¸æˆçš„ WebGL æ„å»ºå’Œåœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤ºå®ƒæ‰€å¿…éœ€çš„æ¨¡æ¿æ–‡ä»¶ã€‚ç„¶åï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ GitHub åŠ¨ä½œæ¥åˆ›å»ºæ¸¸æˆï¼Œå¹¶å°†å…¶å‘å¸ƒåˆ° GitHub é¡µé¢çš„è¿™ä¸ªåˆ†æ”¯ä¸­ã€‚

## ç”Ÿæˆä¸ªäººè®¿é—®ä»¤ç‰Œ

1.  åœ¨ä»»ä¸€é¡µé¢çš„å³ä¸Šè§’ï¼Œç‚¹æŒ‰æ‚¨çš„ä¸ªäººèµ„æ–™ç…§ç‰‡ï¼Œç„¶åç‚¹æŒ‰â€œè®¾ç½®â€ã€‚
2.  åœ¨å·¦ä¾§è¾¹æ ä¸­ï¼Œå•å‡»å¼€å‘è€…è®¾ç½®ã€‚
3.  åœ¨å·¦ä¾§è¾¹æ ä¸­ï¼Œå•å‡»ä¸ªäººè®¿é—®ä»¤ç‰Œã€‚
4.  å•å‡»ç”Ÿæˆæ–°ä»¤ç‰Œã€‚
5.  ç»™ä½ çš„ä»¤ç‰Œä¸€ä¸ªæè¿°æ€§çš„åå­—ã€‚
6.  è¦è®©æ‚¨çš„ä»¤ç‰Œè¿‡æœŸï¼Œè¯·é€‰æ‹©â€œè¿‡æœŸâ€ä¸‹æ‹‰èœå•ï¼Œç„¶åå•å‡»é»˜è®¤å€¼æˆ–ä½¿ç”¨æ—¥å†é€‰æ‹©å™¨ã€‚
7.  é€‰æ‹©æ‚¨è¦æˆäºˆæ­¤ä»¤ç‰Œçš„ä½œç”¨åŸŸæˆ–æƒé™ã€‚è¦ä½¿ç”¨ä»¤ç‰Œä»å‘½ä»¤è¡Œè®¿é—®å­˜å‚¨åº“ï¼Œè¯·é€‰æ‹© repoã€‚
8.  å•å‡»ç”Ÿæˆä»¤ç‰Œã€‚
9.  å¤åˆ¶ä»¤ç‰Œå¹¶å­˜å‚¨åœ¨å®‰å…¨çš„åœ°æ–¹(å¦‚å¯†ç åº“åº”ç”¨ç¨‹åº)ï¼Œå› ä¸ºè¿™å°†ä¸ä¼šå†æ¬¡æ˜¾ç¤º

## åˆ›å»º GitHub ç§˜å¯†

å‡ºäºå®‰å…¨åŸå› ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›ä»»ä½•äººè®¿é—®æˆ‘ä»¬çš„ä¸ªäººè®¿é—®ä»¤ç‰Œï¼Œæ‰€ä»¥æˆ‘ä»¬å°†æŠŠå®ƒä½œä¸ºç§˜å¯†å­˜å‚¨åœ¨æˆ‘ä»¬çš„ GitHub å­˜å‚¨åº“ä¸­ã€‚

1.  å¯¼èˆªåˆ° GitHub ä¸Šçš„å­˜å‚¨åº“
2.  é€‰æ‹©è®¾ç½®
3.  é€‰æ‹©ç§˜å¯†
4.  ç‚¹æŒ‰â€œæ–°å­˜å‚¨åº“å¯†ç â€æŒ‰é’®
5.  åˆ›å»ºä¸€ä¸ªåä¸º GH_CREDENTIALS çš„ç§˜å¯†ï¼Œå¹¶å°†æ‚¨çš„ä»¤ç‰Œå€¼ç²˜è´´åˆ°å…¶ä¸­ã€‚
6.  ç‚¹å‡»â€œæ·»åŠ å¯†ç â€æŒ‰é’®

![](img/92b1f6eea3d4e8b243fbbf3a965e4862.png)

*****ç¡®ä¿ç»Ÿä¸€å…³é—­åå†ç»§ç»­*****

## åˆ›å»ºå¹²å‡€(å­¤ç«‹)â€œgh-pagesâ€åˆ†æ”¯

***ä¸€ä¸ªå­¤ç«‹åˆ†æ”¯æ²¡æœ‰è¿æ¥åˆ°å…¶ä»–åˆ†æ”¯å¹¶æäº¤ï¼Œå…¶å·¥ä½œæ ‘æ ¹æœ¬æ²¡æœ‰æ–‡ä»¶ã€‚***

åˆ›å»ºå­¤ç«‹ gh-pages åˆ†æ”¯:åœ¨ç»ˆç«¯ä¸­ï¼Œå¯¼èˆªåˆ° repositories æ–‡ä»¶å¤¹ï¼Œç¡®ä¿ä»å‘½ä»¤è¡Œä¸º git æä¾›ç¨‹åºè®¾ç½®äº†å‡­æ®ï¼Œç„¶åé”®å…¥ä»¥ä¸‹å†…å®¹:

```
git checkout --orphan gh-pages
git reset --hard
git commit --allow-empty -m "Initializing gh-pages branch"
git config lfs.locksverify false
git push origin gh-pages
git checkout develop (or whatever your previous branch was)
```

## å¯ç”¨ GitHub é¡µé¢

1.  å¯¼èˆªåˆ° GitHub ä¸Šçš„å­˜å‚¨åº“
2.  é€‰æ‹©è®¾ç½®
3.  é€‰æ‹©é¡µé¢
4.  ä»â€œSourceâ€éƒ¨åˆ†ä¸‹çš„ä¸‹æ‹‰åˆ—è¡¨ä¸­é€‰æ‹©â€œGH-pagesâ€repo(å¦‚æœå°šæœªé€‰æ‹©)
5.  ä»æ–‡ä»¶å¤¹ä¸‹æ‹‰åˆ—è¡¨ä¸­é€‰æ‹©â€œ/(æ ¹)â€(å¦‚æœå°šæœªé€‰æ‹©)

## å°† GitHub Pages éƒ¨ç½²å—æ·»åŠ åˆ° Main.yml

```
releaseToGitHubPages:
    name: Release to GitHub Pages
    runs-on: ubuntu-latest
    needs: buildWithLinux
    if: github.event.action == 'published' || (contains(github.event.inputs.mode, 'release') && contains(github.event.inputs.mode, 'Web')) 
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Download WebGL Artifact
        uses: actions/download-artifact@v2
        with:
          name: build-WebGL
          path: build/WebGL
      - name: Deploy to GitHub Pages ğŸš€
        uses: JamesIves/github-pages-deploy-action@4.1.3
        with:
          branch: gh-pages # The branch the action should deploy to.
          folder: build/WebGL # The folder the action should deploy.
          target-folder: build # The folder the action should be deployed to within the deployment branch
```

## å®Œæ•´çš„æ–‡ä»¶

ä¸‹é¢æ˜¯åŒ…å«é™„åŠ å¹³å°çš„å®Œæ•´åŠ¨ä½œå·¥ä½œæµæ–‡ä»¶ã€‚

```
name: CI - Build All Platforms
on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]
  release:
    types: [ published ]# Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:
    inputs:
      mode:
        description: 'check OR release (platform)'
        required: true
        default: 'check'
permissions: 
  contents: write
jobs:#-------------------------------------------------------------------
# Build Project (with Linux)
#-------------------------------------------------------------------
  buildWithLinux:
    name: Build for ${{ matrix.targetPlatform }} on version ${{ matrix.unityVersion }}
    runs-on: ubuntu-latest
    strategy: 
      fail-fast: false
      matrix:
        unityVersion: 
          - 2020.3.15f2
        targetPlatform: 
          - StandaloneWindows # build a Windows Standalone
          - StandaloneOSX # build a MacOS Standalone (Intel 64-bit)
          - StandaloneLinux64 # build a Linux 64-bit Standalone 
          - WebGL # WebGL        
    steps:
      - name: Free Disk Space for Android
        if: matrix.targetPlatform == 'Android'
        run: |
          df -h
          sudo swapoff -a
          sudo rm -f /swapfile
          sudo rm -rf /usr/share/dotnet
          sudo rm -rf /opt/ghc
          sudo rm -rf "/usr/local/share/boost"
          sudo rm -rf "$AGENT_TOOLSDIRECTORY"
          df -h
      - name: Checkout Repository
        uses: actions/checkout@v3
        with:
          fetch-depth: 0
          lfs: true
      - name: Cache Library
        uses: actions/cache@v3
        with:
          path: Library
          key: Library-${{ matrix.targetPlatform }}
          restore-keys: Library-
      - name: Build Unity Project
        uses: game-ci/unity-builder@v2.0-alpha-10
        env:
          UNITY_LICENSE: ${{ secrets.UNITY_LICENSE }}
        with:
          unityVersion: ${{ matrix.unityVersion }}
          targetPlatform: ${{ matrix.targetPlatform }}
          buildName: ${{ matrix.targetPlatform }}
          versioning: Semantic
      - name: Upload Build
        uses: actions/upload-artifact@v3
        if: github.event.action == 'published' || contains(github.event.inputs.mode, 'release')
        with:
          name: build-${{ matrix.targetPlatform }}
          path: build/${{ matrix.targetPlatform }}
      - name: Zip build/${{ matrix.targetPlatform }}
        uses: montudor/action-zip@v1
        if: (github.event.action == 'published' || contains(github.event.inputs.mode, 'release')) 
        with:
          args: zip -qq -r build/build-${{ matrix.targetPlatform }}.zip build/${{ matrix.targetPlatform }}
      - name: Upload build-${{ matrix.targetPlatform }}.zip to GitHub Release
        uses: svenstaro/upload-release-action@v2
        if: (github.event.action == 'published' || contains(github.event.inputs.mode, 'release')) 
        with:
          repo_token: ${{ secrets.GH_CREDENTIALS }}
          asset_name: build-${{ matrix.targetPlatform }}.zip
          file: build/build-${{ matrix.targetPlatform }}.zip
          tag: ${{ github.ref }}
          overwrite: true
          body:  ${{ github.event.release.body }}#-------------------------------------------------------------------
# Deploy to GitHub Pages
#-------------------------------------------------------------------releaseToGitHubPages:
    name: Release to GitHub Pages
    runs-on: ubuntu-latest
    needs: buildWithLinux
    if: github.event.action == 'published' || (contains(github.event.inputs.mode, 'release') && contains(github.event.inputs.mode, 'Web')) 
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v3
      - name: Download WebGL Artifact
        uses: actions/download-artifact@v3
        with:
          name: build-WebGL
          path: build/WebGL
      - name: Deploy to GitHub Pages ğŸš€
        uses: JamesIves/github-pages-deploy-action@v4.3.3
        with:
          branch: gh-pages # The branch the action should deploy to.
          folder: build/WebGL # The folder the action should deploy.
          target-folder: build # The folder the action should be deployed to within the deployment branch#-------------------------------------------------------------------
# Deploy to itch.io
#-------------------------------------------------------------------release_webgl_to_itch:
    name: Release WebGL to itch.io
    runs-on: ubuntu-latest
    needs: buildWithLinux
    if: github.event.action == 'published' || (contains(github.event.inputs.mode, 'release') && contains(github.event.inputs.mode, 'Web'))
    steps:
      - name: download WEBGL
        id: download-webgl
        uses: dsaltares/fetch-gh-release-asset@master
        with:
          version: "latest"
          file: build-WebGL.zip
          token: "${{ secrets.GH_CREDENTIALS }}"
      - name: deploy to itch.io (WEBGL)
        uses: josephbmanley/butler-publish-itchio-action@master
        env:
          BUTLER_CREDENTIALS: ${{ secrets.BUTLER_CREDENTIALS }}
          CHANNEL: html
          ITCH_GAME: space-shooter-pro-redux
          ITCH_USER: Arynoyn
          PACKAGE: build-WebGL.zip
          VERSION: ${{ steps.download-webgl.outputs.version }}release_windows_to_itch:
    name: Release Windows (32-Bit) to itch.io
    runs-on: ubuntu-latest
    needs: buildWithLinux
    if: github.event.action == 'published' || (contains(github.event.inputs.mode, 'release') && contains(github.event.inputs.mode, 'Windows'))
    steps:
      - name: download Windows
        id: download-windows
        uses: dsaltares/fetch-gh-release-asset@master
        with:
          version: "latest"
          file: build-StandaloneWindows.zip
          token: "${{ secrets.GH_CREDENTIALS }}"
      - name: deploy to itch.io (Windows)
        uses: josephbmanley/butler-publish-itchio-action@master
        env:
          BUTLER_CREDENTIALS: ${{ secrets.BUTLER_CREDENTIALS }}
          CHANNEL: windows
          ITCH_GAME: space-shooter-pro-redux
          ITCH_USER: Arynoyn
          PACKAGE: build-StandaloneWindows.zip
          VERSION: ${{ steps.download-windows.outputs.version }}release_macos_to_itch:
    name: Release Mac OSX to itch.io
    runs-on: ubuntu-latest
    needs: buildWithLinux
    if: github.event.action == 'published' || (contains(github.event.inputs.mode, 'release') && contains(github.event.inputs.mode, 'Mac'))
    steps:
      - name: download MacOS
        id: download-macos
        uses: dsaltares/fetch-gh-release-asset@master
        with:
          version: "latest"
          file: build-StandaloneOSX.zip
          token: "${{ secrets.GH_CREDENTIALS }}"
      - name: deploy to itch.io (MacOS)
        uses: josephbmanley/butler-publish-itchio-action@master
        env:
          BUTLER_CREDENTIALS: ${{ secrets.BUTLER_CREDENTIALS }}
          CHANNEL: mac
          ITCH_GAME: space-shooter-pro-redux
          ITCH_USER: Arynoyn
          PACKAGE: build-StandaloneOSX.zip
          VERSION: ${{ steps.download-macos.outputs.version }}

  release_linux_to_itch:
    name: Release Linux (64-bit) to itch.io
    runs-on: ubuntu-latest
    needs: buildWithLinux
    if: github.event.action == 'published' || (contains(github.event.inputs.mode, 'release') && contains(github.event.inputs.mode, 'Linux'))
    steps:
      - name: download Linux
        id: download-linux
        uses: dsaltares/fetch-gh-release-asset@master
        with:
          version: "latest"
          file: build-StandaloneLinux64.zip
          token: "${{ secrets.GH_CREDENTIALS }}"
      - name: deploy to itch.io (Linux)
        uses: josephbmanley/butler-publish-itchio-action@master
        env:
          BUTLER_CREDENTIALS: ${{ secrets.BUTLER_CREDENTIALS }}
          CHANNEL: linux
          ITCH_GAME: space-shooter-pro-redux
          ITCH_USER: Arynoyn
          PACKAGE: build-StandaloneLinux64.zip
          VERSION: ${{ steps.download-linux.outputs.version }}
```

## ä¸‹æ¬¡å§ï¼

å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œæˆ–è€…æƒ³åœ¨æˆ‘çš„æ—…ç¨‹ä¸­ä¸æˆ‘åŒè¡Œï¼Œè¯·åœ¨[gamedevchris.medium.com](#https://gamedevchris.medium.com)å…³æ³¨æˆ‘ã€‚