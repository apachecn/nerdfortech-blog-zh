<html>
<head>
<title>TypeScript Generics and Type Composition</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ç±»å‹è„šæœ¬æ³›å‹å’Œç±»å‹ç»„åˆ</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/nerd-for-tech/typescript-generics-and-dynamic-type-composition-8f055151711f?source=collection_archive---------18-----------------------#2021-06-06">https://medium.com/nerd-for-tech/typescript-generics-and-dynamic-type-composition-8f055151711f?source=collection_archive---------18-----------------------#2021-06-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="6663" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">TypeScript æ³›å‹ç±»å‹éå¸¸å¼ºå¤§ï¼Œå®ƒä»¬å…è®¸æˆ‘ä»¬è¿›è¡Œç±»å‹ç»„åˆï¼Œè¿™æ˜¯ä¸€ç§å¯ä»¥åœ¨æ¯ä¸ª TS é¡¹ç›®ä¸­ä½¿ç”¨çš„æƒŠäººæ¨¡å¼ã€‚</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/9ed6f589f071251da2ff6da6810db5a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jTTpW1Pjmmx930u6U3vPcg.jpeg"/></div></div></figure><p id="5ecd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å¦‚ä½•ä½¿ç”¨æ³›å‹ï¼Ÿä½¿ç”¨æ³›å‹çœŸçš„å¾ˆç®€å•ï¼Œæˆ‘ä»¬åªéœ€è¦å‘Šè¯‰ TS æˆ‘ä»¬çš„ç±»å‹æ¥å—å…¶ä»–ç±»å‹æ˜¯â€œå®Œæ•´çš„â€ã€‚<br/>å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬æœ‰ä¸€äº›ç±»å‹<strong class="ih hj"> <em class="jp"> A </em> </strong>å’Œä¸€äº›åŠ¨æ€å±æ€§â€œ<em class="jp"> dynamicObj </em>â€åŸºäºä½¿ç”¨åœ°ç‚¹ï¼Œå¾ˆéš¾é™æ€åœ°å®šä¹‰æ‰€æœ‰å±æ€§ç±»å‹ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦ä¸ºâ€œ<em class="jp"> dynamicObj </em>â€æŒ‡å®šæ‰€æœ‰å¯èƒ½çš„ç±»å‹ã€‚</p><pre class="je jf jg jh fd jq jr js jt aw ju bi"><span id="572c" class="jv jw hi jr b fi jx jy l jz ka">type B = {<br/>  keyA: string;<br/>  keyB: string;<br/>}</span><span id="fa7f" class="jv jw hi jr b fi kb jy l jz ka">type C = {<br/>  keyT: number;<br/>  keyV: boolean;<br/>}</span></pre><p id="0534" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ç°åœ¨æœ‰ä¸€ä¸ªç®€å•ä¸”å®Œå…¨ä¸å®‰å…¨çš„è§£å†³æ–¹æ¡ˆ:<strong class="ih hj"> <em class="jp">â€œå°±è¯´ dynamicObject æ˜¯ any ç±»å‹çš„â€<br/> </em> </strong> <em class="jp">å½“ç„¶ï¼Œä½ æ°¸è¿œä¸åº”è¯¥ä½¿ç”¨è¿™ä¸ªï¼Œåœ¨ä½ çš„ä»£ç ä¸­æœ‰ä»»ä½•ç±»å‹éƒ½æ˜¯â€œä»£ç å‘³â€çš„ä¸€ä¸ªå·¨å¤§æ ‡å¿—ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æœªçŸ¥çš„ï¼Œç„¶ååšå®šå‹ã€‚</em></p><pre class="je jf jg jh fd jq jr js jt aw ju bi"><span id="819d" class="jv jw hi jr b fi jx jy l jz ka"><em class="jp">type A </em>= {<br/>  prop: <em class="jp">string</em>;<br/>  dynamicObject: unknown;<br/>};</span><span id="9459" class="jv jw hi jr b fi kb jy l jz ka">const aWithB: A = {<br/>  prop: 'ok',<br/>  dynamicObject: {<br/>    keyA: 'test',<br/>    keyB: 'ok'<br/>  }<br/>}</span><span id="ec03" class="jv jw hi jr b fi kb jy l jz ka">console.log((aWithB.dynamicObject as B).keyA) // NOT SO GOOD ğŸ˜“ </span></pre><p id="a345" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æˆ‘ä»¬å¯ä»¥åœ¨ dynamicObject å±æ€§ä¸Šç”¨<strong class="ih hj"> UnionType </strong>æ›´è¿›ä¸€æ­¥ã€‚</p><pre class="je jf jg jh fd jq jr js jt aw ju bi"><span id="b5fb" class="jv jw hi jr b fi jx jy l jz ka"><em class="jp">type A </em>= {<br/>  prop: <em class="jp">string</em>;<br/>  dynamicObject: B | C;<br/>};</span><span id="25fd" class="jv jw hi jr b fi kb jy l jz ka">const aWithB: A = {<br/>  prop: 'ok',<br/>  dynamicObject: {<br/>    keyA: 'test',<br/>    keyB: 'ok'<br/>  }<br/>}</span><span id="bc83" class="jv jw hi jr b fi kb jy l jz ka">console.log(<br/>  (aWithB.dynamicObject as B).keyA // We still need to cast type ğŸ˜ <br/>)</span></pre><p id="29cb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">æ‰€ä»¥è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ç”¨æ³›å‹è§£å†³è¿™ä¸ªé—®é¢˜</strong></p><p id="fab3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å¦‚æœæˆ‘ä»¬å°†ç±»å‹ A æŒ‡å®šä¸ºå…·æœ‰æŸäº›å±æ€§(å¦‚ prop å’Œ dynamicObj)çš„ç±»å‹ï¼Œæˆ‘ä»¬çŸ¥é“ dynamicObj ä¾èµ–äºä½¿ç”¨ä½ç½®ã€‚ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥å°†ç±»å‹ A å®šä¹‰ä¸ºæ¥å—å¦ä¸€ä¸ªç±»å‹çš„ç±»å‹ï¼Œè¯¥ç±»å‹å°†æ˜¯å±æ€§ dynamicObject çš„ç±»å‹ã€‚å¬èµ·æ¥æ¯”å®é™…æ›´å¤æ‚ã€‚</p><pre class="je jf jg jh fd jq jr js jt aw ju bi"><span id="067e" class="jv jw hi jr b fi jx jy l jz ka"><em class="jp">type A&lt;DynamicObjectType&gt; </em>= {<br/>  prop: <em class="jp">string</em>;<br/>  dynamicObject: <em class="jp">DynamicObjectType</em>;<br/>};</span><span id="c5ce" class="jv jw hi jr b fi kb jy l jz ka">const aWithB: A&lt;B&gt; = {<br/>  prop: 'ok',<br/>  dynamicObject: {<br/>    keyA: 'test',<br/>    keyB: 'ok'<br/>  }<br/>}</span><span id="5638" class="jv jw hi jr b fi kb jy l jz ka">const aWithC: A&lt;C&gt; = {<br/>  prop: 'ok',<br/>  dynamicObject: {<br/>    keyT: 11,<br/>    keyV: true<br/>  }<br/>}</span><span id="da26" class="jv jw hi jr b fi kb jy l jz ka">console.log(aWithB.dynamicObject.keyA);<br/>console.log(aWithC.dynamicObject.keyV);</span><span id="ae8f" class="jv jw hi jr b fi kb jy l jz ka">// No warnings, no compilation error ğŸ¤© </span></pre><p id="3edc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ä¹Ÿå°±æ˜¯è¯´ï¼Œç°åœ¨æˆ‘ä»¬çš„ç±»å‹ A æ˜¯å¯ä¼¸ç¼©çš„ï¼Œå¯ä»¥æ‰©å±•åˆ°ä»»æ„æ•°é‡çš„å¯ä»¥æ˜¯ dynamicObject å±æ€§çš„ç±»å‹ã€‚ç”šè‡³è¿™ä¹Ÿæ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ç±»å‹:</p><pre class="je jf jg jh fd jq jr js jt aw ju bi"><span id="00b8" class="jv jw hi jr b fi jx jy l jz ka">const foo: A&lt;number&gt; = {<br/>  prop: "lol",<br/>  dynamicObject: 11<br/>}</span></pre><p id="c087" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">è¿™å°±æ˜¯ä½ å¦‚ä½•åœ¨ç±»å‹ç»„åˆä¸­æ”¶è·æ³›å‹çš„åŠ›é‡ï¼Œéå¸¸ç®€å•ï¼</p><p id="e16b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å¿«ä¹çš„ç¼–ç ï¼</p></div></div>    
</body>
</html>